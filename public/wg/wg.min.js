let unsafeWindow=window,GM_info={};var httpRequest=new XMLHttpRequest;function GM_addStyle(e){try{var t=document.createElement("style");t.textContent=e,(document.head||document.body||document.documentElement||document).appendChild(t)}catch(e){console.log("GM_addStyle: "+e)}}function GM_setValue(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log("GM_setValue: "+e)}}function GM_getValue(e,t){e=localStorage.getItem(e);if(!e)return t;try{return JSON.parse(e)}catch(e){return console.log("GM_getValue: "+e),t}}function GM_listValues(){var t=localStorage.length,o=[];for(let e=0;e<t;e++)"roles"!=localStorage.key(e)&&o.push(localStorage.key(e));return o}function GM_deleteValue(e){localStorage.removeItem(e)}function GM_setClipboard(e){var t=document.createElement("input");document.body.appendChild(t),t.value=e,t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.log("GM_setClipboard: "+e.message)}t.blur(),document.body.removeChild(t)}function GM_export(){try{var t=GM_listValues(),o={};for(let e=0;e<t.length;e++)o[t[e]]=GM_getValue(t[e]);var e=JSON.stringify(o);console.log(e),android.myexport(e)}catch(e){console.log("GM_export: "+e.message)}}function GM_import(e){var t,o=e;for(t in o)GM_setValue(t,o[t])}httpRequest.open("GET","http://wsmud.ii74.com/S/version",!0),httpRequest.send(),httpRequest.onreadystatechange=function(){var e;4==httpRequest.readyState&&200==httpRequest.status&&(e=httpRequest.responseText,console.log(e),GM_info.script=JSON.parse(e))},GM_info.script={version:""},!function(){Array.prototype.baoremove=function(e){if(isNaN(e)||e>this.length)return!1;this.splice(e,1)},Array.prototype.remove=function(e){e=this.indexOf(e);-1<e&&this.splice(e,1)},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)};var copyToClipboard=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.parentNode.removeChild(t)};function dateFormat(e,t){var o,n,s={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(n in s)(o=new RegExp("("+n+")").exec(e))&&(e=e.replace(o[1],1==o[1].length?s[n]:s[n].padStart(o[1].length,"0")));return e}function AutoScroll(e){var t,o,n;e&&0!=$(e).length&&(t=$(e)[0].scrollTop)<(n=$(e)[0].scrollHeight)-(o=Math.ceil($(e).height()))&&(n=n-o<120?1:Math.ceil((n-o)/120),$(e)[0].scrollTop=t+n,setTimeout(function(){AutoScroll(e)},1e3/120))}function addWan(e,t,o,n){var e=getDigit(e);return 3<e?(5<=(e=e%8)&&(e=4),Math.round(t/Math.pow(10,e+o-n))/Math.pow(10,n)+"ä¸‡"):Math.round(t/Math.pow(10,o-n))/Math.pow(10,n)}function getDigit(e){for(var t=-1;1<=e;)t++,e/=10;return t}function addChineseUnit(e,t){t=null==t?2:t;var o=Math.floor(e),n=getDigit(o),s=[];if(3<n){var i=Math.floor(n/8);if(1<=i){n=Math.round(o/Math.pow(10,8*i));s.push(addWan(n,e,8*i,t));for(var a=0;a<i;a++)s.push("äº¿");return s.join("")}return addWan(o,e,0,t)}return e}function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var n=t[o].split("=");if(n[0]==e)return n[1]}return!1}var CanUse=!1,CanUse,_ws,ws,ws_on_message,cmd_queue,cmd_busy,echo,_send_cmd,send_cmd;function show_msg(e){ws_on_message({type:"text",data:e})}WebSocket?(console.log("æ’ä»¶å¯æ­£å¸¸è¿è¡Œ,Plugins can run normally"),CanUse=!0,_ws=WebSocket,unsafeWindow.WebSocket=function(e){ws=new _ws(e)},unsafeWindow.WebSocket.prototype={CONNECTING:_ws.CONNECTING,OPEN:_ws.OPEN,CLOSING:_ws.CLOSING,CLOSED:_ws.CLOSED,get url(){return ws.url},get protocol(){return ws.protocol},get readyState(){return ws.readyState},get bufferedAmount(){return ws.bufferedAmount},get extensions(){return ws.extensions},get binaryType(){return ws.binaryType},set binaryType(e){ws.binaryType=e},get onopen(){return ws.onopen},set onopen(e){ws.onopen=e},get onmessage(){return ws.onmessage},set onmessage(e){ws_on_message=e,ws.onmessage=WG.receive_message,unsafeWindow.funny&&null!=unsafeWindow.funny.API&&(unsafeWindow.funny.API.ws_on_message=e,unsafeWindow.funny.API.websocket=ws)},get onclose(){return ws.onclose},set onclose(t){ws.onclose=e=>{WG.online=!1,G.connected=!1,auto_relogin=GM_getValue(roleid+"_auto_relogin",auto_relogin),t(e),"å¼€"==auto_relogin&&setTimeout(()=>{console.log(new Date),KEY.do_command("score")},1e4)}},get onerror(){return ws.onerror},set onerror(e){ws.onerror=e},send:function(t){if(null==G.cookie&&(G.cookie=t),-1<t.indexOf(G.id)&&!G.connected&&(t=G.cookie+" "+G.id),G.cmd_echo&&show_msg("<hiy>"+t+"</hiy>"),"$"==t[0])WG.SendCmd(t);else{if("@"==t[0]){if(unsafeWindow&&unsafeWindow.ToRaid)return void ToRaid.perform(t);messageAppend("æ’ä»¶æœªå®‰è£…,è¯·è®¿é—® https://greasyfork.org/zh-CN/scripts/375851-wsmud-raid ä¸‹è½½å¹¶å®‰è£…"),window.open("https://greasyfork.org/zh-CN/scripts/375851-wsmud-raid ","_blank").location}var e;if(0==t.indexOf("drop"))e=(e=t.split(" "))[e.length-1],WG.getItemNameByid(e,function(e){0<=lock_list.indexOf(e)?messageAppend(`å·²é”ç‰©å“${e}ï¼Œæ— æ³•ä¸¢å¼ƒï¼Œè¯·è§£é”åé‡è¯•`):ws.send(t)});else switch(0!=t.indexOf("jh ")&&0!=t.indexOf("go ")||"å¼€"==auto_rewardgoto&&WG.Send("tm "+t),t){case"sm":T.sm();break;case"wk":WG.zdwk();break;case"backup":WG.make_config();break;case"load":WG.load_config();break;default:ws.send(t)}}},close:function(){ws.close()}},cmd_queue=[],cmd_busy=!1,echo=!1,_send_cmd=function(){if(ws&&1==ws.readyState)if(0<cmd_queue.length){cmd_busy=!0;for(var e=(new Date).getTime(),t=0;t<cmd_queue.length;t++)if(!cmd_queue[t].timestamp||cmd_queue[t].timestamp>=e-1300){cmd_queue.splice(0,t);break}for(t=0;t<Math.min(cmd_queue.length,5);t++)if(!cmd_queue[t].timestamp)try{ws.send(cmd_queue[t].cmd),cmd_queue[t].timestamp=e}catch(e){return cmd_busy=!1,void(cmd_queue=[])}cmd_queue[cmd_queue.length-1].timestamp?cmd_busy=!1:setTimeout(_send_cmd,100)}else cmd_busy=!1;else cmd_busy=!1,cmd_queue=[]},send_cmd=function(e,t){if(ws&&1==ws.readyState)if(e=e instanceof Array?e:e.split(";"),t)for(var o=0;o<e.length;o++)G.cmd_echo&&show_msg("<hiy>"+e[o]+"</hiy>"),ws.send(e[o]);else{for(o=0;o<e.length;o++)cmd_queue.push({cmd:e[o],timestamp:0});cmd_busy||_send_cmd()}}):console.log("æ’ä»¶ä¸å¯è¿è¡Œ,è¯·æ‰“å¼€'https://greasyfork.org/zh-CN/forum/discussion/41547/x'");var L={msg:function(t){let o=setInterval(()=>{var e;"undefined"!=typeof layer?(clearInterval(o),layer.msg(t,{offset:"50%",shift:5})):((e=document.createElement("script")).setAttribute("src","https://cdn.staticfile.org/layer/2.3/layer.js"),document.head.appendChild(e))},500)},isMobile:function(){var e=navigator.userAgent,t=!e.match(/(iPad).*OS\s([\d_]+)/)&&e.match(/(iPhone\sOS)\s([\d_]+)/),e=e.match(/(Android)\s+([\d.]+)/);return t||e}},roomItemSelectIndex=-1,timer=0,cnt=0,zb_npc,zb_place,next=0,roomData=[],packData=[],storeData=[],eqData=[],store_list=[],lock_list=[],needfind={"æ­¦å½“æ´¾-æ—é—´å°å¾„":["go south"],"å³¨çœ‰æ´¾-èµ°å»Š":["go north","go south;go south","go north;go east;go east"],"ä¸å¸®-æš—é“":["go east","go east;go east","go east"],"é€é¥æ´¾-æ—é—´å°é“":["go west;go north","go south;go south","go north;go west"],"å°‘æ—æ´¾-ç«¹æ—":["go north"],"é€é¥æ´¾-åœ°ä¸‹çŸ³å®¤":["go up"],"é€é¥æ´¾-æœ¨å±‹":["go south;go south;go south;go south"]},pgoods={},goods={"ç±³é¥­":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"åŒ…å­":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"é¸¡è…¿":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"é¢æ¡":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"æ‰¬å·ç‚’é¥­":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"ç±³é…’":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"èŠ±é›•é…’":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"å¥³å„¿çº¢":{id:null,type:"wht",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"é†‰ä»™é…¿":{id:null,type:"hig",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"ç¥ä»™é†‰":{id:null,type:"hiy",sales:"åº—å°äºŒ",place:"æ‰¬å·åŸ-é†‰ä»™æ¥¼"},"å¸ƒè¡£":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é’¢åˆ€":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é’¢åˆ€":{id:null,type:"wht",sales:"é“åŒ é“ºè€æ¿ é“åŒ ",place:"æ‰¬å·åŸ-æ‰“é“é“º"},"æœ¨æ£":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"è‹±é›„å·¾":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"å¸ƒé‹":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é“æˆ’æŒ‡":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"ç°ªå­":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é•¿é­":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é’“é±¼ç«¿":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é±¼é¥µ":{id:null,type:"wht",sales:"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦",place:"æ‰¬å·åŸ-æ‚è´§é“º"},"é“å‰‘":{id:null,type:"wht",sales:"é“åŒ é“ºè€æ¿ é“åŒ ",place:"æ‰¬å·åŸ-æ‰“é“é“º"},"é“æ£":{id:null,type:"wht",sales:"é“åŒ é“ºè€æ¿ é“åŒ ",place:"æ‰¬å·åŸ-æ‰“é“é“º"},"é“æ–":{id:null,type:"wht",sales:"é“åŒ é“ºè€æ¿ é“åŒ ",place:"æ‰¬å·åŸ-æ‰“é“é“º"},"é“é•":{id:null,type:"wht",sales:"é“åŒ é“ºè€æ¿ é“åŒ ",place:"æ‰¬å·åŸ-æ‰“é“é“º"},"é£é•–":{id:null,type:"wht",sales:"é“åŒ é“ºè€æ¿ é“åŒ ",place:"æ‰¬å·åŸ-æ‰“é“é“º"},"higé‡‘åˆ›è¯":{id:null,type:"hig",sales:"è¯é“ºè€æ¿ å¹³ä¸€æŒ‡",place:"æ‰¬å·åŸ-è¯é“º"},"higå¼•æ°”ä¸¹":{id:null,type:"hig",sales:"è¯é“ºè€æ¿ å¹³ä¸€æŒ‡",place:"æ‰¬å·åŸ-è¯é“º"}},equip={"é“é•":0},npcs={"åº—å°äºŒ":0,"é“åŒ é“ºè€æ¿ é“åŒ ":0,"è¯é“ºè€æ¿ å¹³ä¸€æŒ‡":0,"æ‚è´§é“ºè€æ¿ æ¨æ°¸ç¦":0},place={"ä½æˆ¿":"jh fam 0 start;go west;go west;go north;go enter","ä½æˆ¿-å§å®¤":"jh fam 0 start;go west;go west;go north;go enter;go north;store","ä½æˆ¿-å°èŠ±å›­":"jh fam 0 start;go west;go west;go north;go enter;go northeast","ä½æˆ¿-ç‚¼è¯æˆ¿":"jh fam 0 start;go west;go west;go north;go enter;go east","ä½æˆ¿-ç»ƒåŠŸæˆ¿":"jh fam 0 start;go west;go west;go north;go enter;go west","æ‰¬å·åŸ-é’±åº„":"jh fam 0 start;go north;go west;store","æ‰¬å·åŸ-å¹¿åœº":"jh fam 0 start","æ‰¬å·åŸ-ä¹¦é™¢":"jh fam 0 start;go east;go north","æ‰¬å·åŸ-é†‰ä»™æ¥¼":"jh fam 0 start;go north;go north;go east","æ‰¬å·åŸ-æ‚è´§é“º":"jh fam 0 start;go east;go south","æ‰¬å·åŸ-æ‰“é“é“º":"jh fam 0 start;go east;go east;go south","æ‰¬å·åŸ-è¯é“º":"jh fam 0 start;go east;go east;go north","æ‰¬å·åŸ-è¡™é—¨æ­£å…":"jh fam 0 start;go west;go north;go north","æ‰¬å·åŸ-é•–å±€æ­£å…":"jh fam 0 start;go west;go west;go south;go south","æ‰¬å·åŸ-çŸ¿å±±":"jh fam 0 start;go west;go west;go west;go west","æ‰¬å·åŸ-å–œå®´":"jh fam 0 start;go north;go north;go east;go up","æ‰¬å·åŸ-æ“‚å°":"jh fam 0 start;go west;go south","æ‰¬å·åŸ-å½“é“º":"jh fam 0 start;go south;go east","æ‰¬å·åŸ-å¸®æ´¾":"jh fam 0 start;go south;go south;go east","æ‰¬å·åŸ-æœ‰é—´å®¢æ ˆ":"jh fam 0 start;go north;go east","æ‰¬å·åŸ-èµŒåœº":"jh fam 0 start;go south;go west","å¸®ä¼š-å¤§é—¨":"jh fam 0 start;go south;go south;go east;go east","å¸®ä¼š-å¤§é™¢":"jh fam 0 start;go south;go south;go east;go east;go east","å¸®ä¼š-ç»ƒåŠŸæˆ¿":"jh fam 0 start;go south;go south;go east;go east;go east;go north","å¸®ä¼š-èšä¹‰å ‚":"jh fam 0 start;go south;go south;go east;go east;go east;go east","å¸®ä¼š-ä»“åº“":"jh fam 0 start;go south;go south;go east;go east;go east;go east;go north","å¸®ä¼š-ç‚¼è¯æˆ¿":"jh fam 0 start;go south;go south;go east;go east;go east;go south","æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†":"jh fam 0 start;go south;go south;go west","æ‰¬å·åŸ-æ­¦åº™":"jh fam 0 start;go north;go north;go west","æ­¦å½“æ´¾-å¹¿åœº":"jh fam 1 start;","æ­¦å½“æ´¾-ä¸‰æ¸…æ®¿":"jh fam 1 start;go north","æ­¦å½“æ´¾-çŸ³é˜¶":"jh fam 1 start;go west","æ­¦å½“æ´¾-ç»ƒåŠŸæˆ¿":"jh fam 1 start;go west;go west","æ­¦å½“æ´¾-å¤ªå­å²©":"jh fam 1 start;go west;go northup","æ­¦å½“æ´¾-æ¡ƒå›­å°è·¯":"jh fam 1 start;go west;go northup;go north","æ­¦å½“æ´¾-èˆèº«å´–":"jh fam 1 start;go west;go northup;go north;go east","æ­¦å½“æ´¾-å—å²©å³°":"jh fam 1 start;go west;go northup;go north;go west","æ­¦å½“æ´¾-ä¹Œé¸¦å²­":"jh fam 1 start;go west;go northup;go north;go west;go northup","æ­¦å½“æ´¾-äº”è€å³°":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup","æ­¦å½“æ´¾-è™å¤´å²©":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup","æ­¦å½“æ´¾-æœå¤©å®«":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup;go north","æ­¦å½“æ´¾-ä¸‰å¤©é—¨":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup;go north;go north","æ­¦å½“æ´¾-ç´«é‡‘åŸ":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup;go north;go north;go north","æ­¦å½“æ´¾-æ—é—´å°å¾„":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup;go north;go north;go north;go north;go north","æ­¦å½“æ´¾-åå±±å°é™¢":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup;go north;go north;go north;go north;go north;go north","å°‘æ—æ´¾-å¹¿åœº":"jh fam 2 start;","å°‘æ—æ´¾-å±±é—¨æ®¿":"jh fam 2 start;go north","å°‘æ—æ´¾-ä¸œä¾§æ®¿":"jh fam 2 start;go north;go east","å°‘æ—æ´¾-è¥¿ä¾§æ®¿":"jh fam 2 start;go north;go west","å°‘æ—æ´¾-å¤©ç‹æ®¿":"jh fam 2 start;go north;go north","å°‘æ—æ´¾-å¤§é›„å®æ®¿":"jh fam 2 start;go north;go north;go northup","å°‘æ—æ´¾-é’Ÿæ¥¼":"jh fam 2 start;go north;go north;go northeast","å°‘æ—æ´¾-é¼“æ¥¼":"jh fam 2 start;go north;go north;go northwest","å°‘æ—æ´¾-åæ®¿":"jh fam 2 start;go north;go north;go northwest;go northeast","å°‘æ—æ´¾-ç»ƒæ­¦åœº":"jh fam 2 start;go north;go north;go northwest;go northeast;go north","å°‘æ—æ´¾-ç½—æ±‰å ‚":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go east","å°‘æ—æ´¾-èˆ¬è‹¥å ‚":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go west","å°‘æ—æ´¾-æ–¹ä¸ˆæ¥¼":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go north","å°‘æ—æ´¾-æˆ’å¾‹é™¢":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go north;go east","å°‘æ—æ´¾-è¾¾æ‘©é™¢":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go north;go west","å°‘æ—æ´¾-ç«¹æ—":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go north;go north","å°‘æ—æ´¾-è—ç»é˜":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go north;go north;go west","å°‘æ—æ´¾-è¾¾æ‘©æ´":"jh fam 2 start;go north;go north;go northwest;go northeast;go north;go north;go north;go north;go north","åå±±æ´¾-é•‡å²³å®«":"jh fam 3 start;","åå±±æ´¾-è‹é¾™å²­":"jh fam 3 start;go eastup","åå±±æ´¾-èˆèº«å´–":"jh fam 3 start;go eastup;go southup","åå±±æ´¾-å³­å£":"jh fam 3 start;go eastup;go southup;jumpdown","åå±±æ´¾-å±±è°·":"jh fam 3 start;go eastup;go southup;jumpdown;go southup","åå±±æ´¾-å±±é—´å¹³åœ°":"jh fam 3 start;go eastup;go southup;jumpdown;go southup;go south","åå±±æ´¾-æ—é—´å°å±‹":"jh fam 3 start;go eastup;go southup;jumpdown;go southup;go south;go east","åå±±æ´¾-ç‰å¥³å³°":"jh fam 3 start;go westup","åå±±æ´¾-ç‰å¥³ç¥ ":"jh fam 3 start;go westup;go west","åå±±æ´¾-ç»ƒæ­¦åœº":"jh fam 3 start;go westup;go north","åå±±æ´¾-ç»ƒåŠŸæˆ¿":"jh fam 3 start;go westup;go north;go east","åå±±æ´¾-å®¢å…":"jh fam 3 start;go westup;go north;go north","åå±±æ´¾-åå…":"jh fam 3 start;go westup;go north;go north;go east","åå±±æ´¾-å¯å®¤":"jh fam 3 start;go westup;go north;go north;go north","åå±±æ´¾-ç‰å¥³å³°å±±è·¯":"jh fam 3 start;go westup;go south","åå±±æ´¾-ç‰å¥³å³°å°å¾„":"jh fam 3 start;go westup;go south;go southup","åå±±æ´¾-æ€è¿‡å´–":"jh fam 3 start;go westup;go south;go southup;go southup","åå±±æ´¾-å±±æ´":"jh fam 3 start;go westup;go south;go southup;go southup;break bi;go enter","åå±±æ´¾-é•¿ç©ºæ ˆé“":"jh fam 3 start;go westup;go south;go southup;go southup;break bi;go enter;go westup","åå±±æ´¾-è½é›å³°":"jh fam 3 start;go westup;go south;go southup;go southup;break bi;go enter;go westup;go westup","åå±±æ´¾-åå±±ç»é¡¶":"jh fam 3 start;go westup;go south;go southup;go southup;break bi;go enter;go westup;go westup;jumpup","å³¨çœ‰æ´¾-é‡‘é¡¶":"jh fam 4 start","å³¨çœ‰æ´¾-åº™é—¨":"jh fam 4 start;go west","å³¨çœ‰æ´¾-å¹¿åœº":"jh fam 4 start;go west;go south","å³¨çœ‰æ´¾-èµ°å»Š":"jh fam 4 start;go west;go south;go west","å³¨çœ‰æ´¾-ä¼‘æ¯å®¤":"jh fam 4 start;go west;go south;go east;go south","å³¨çœ‰æ´¾-å¨æˆ¿":"jh fam 4 start;go west;go south;go east;go east","å³¨çœ‰æ´¾-ç»ƒåŠŸæˆ¿":"jh fam 4 start;go west;go south;go west;go west","å³¨çœ‰æ´¾-å°å±‹":"jh fam 4 start;go west;go south;go west;go north;go north","å³¨çœ‰æ´¾-æ¸…ä¿®æ´":"jh fam 4 start;go west;go south;go west;go south;go south","å³¨çœ‰æ´¾-å¤§æ®¿":"jh fam 4 start;go west;go south;go south","å³¨çœ‰æ´¾-ç¹å…‰å°":"jh fam 4 start;go northup","å³¨çœ‰æ´¾-åè—åºµ":"jh fam 4 start;go northup;go east","é€é¥æ´¾-é’è‰åª":"jh fam 5 start","é€é¥æ´¾-æ—é—´å°é“":"jh fam 5 start;go east","é€é¥æ´¾-ç»ƒåŠŸæˆ¿":"jh fam 5 start;go east;go north","é€é¥æ´¾-æœ¨æ¿è·¯":"jh fam 5 start;go east;go south","é€é¥æ´¾-å·¥åŒ å±‹":"jh fam 5 start;go east;go south;go south","é€é¥æ´¾-ä¼‘æ¯å®¤":"jh fam 5 start;go west;go south","é€é¥æ´¾-æœ¨å±‹":"jh fam 5 start;go north;go north","é€é¥æ´¾-åœ°ä¸‹çŸ³å®¤":"jh fam 5 start;go down;go down","ä¸å¸®-æ ‘æ´å†…éƒ¨":"jh fam 6 start","ä¸å¸®-æ ‘æ´ä¸‹":"jh fam 6 start;go down","ä¸å¸®-æš—é“":"jh fam 6 start;go down;go east","ä¸å¸®-ç ´åº™å¯†å®¤":"jh fam 6 start;go down;go east;go east;go east","ä¸å¸®-åœŸåœ°åº™":"jh fam 6 start;go down;go east;go east;go east;go up","ä¸å¸®-æ—é—´å°å±‹":"jh fam 6 start;go down;go east;go east;go east;go east;go east;go up","æ€æ‰‹æ¥¼-å¤§é—¨":"jh fam 7 start","æ€æ‰‹æ¥¼-å¤§å…":"jh fam 7 start;go north","æ€æ‰‹æ¥¼-æš—é˜":"jh fam 7 start;go north;go up","æ€æ‰‹æ¥¼-é“œæ¥¼":"jh fam 7 start;go north;go up;go up","æ€æ‰‹æ¥¼-ä¼‘æ¯å®¤":"jh fam 7 start;go north;go up;go up;go east","æ€æ‰‹æ¥¼-é“¶æ¥¼":"jh fam 7 start;go north;go up;go up;go up;go up","æ€æ‰‹æ¥¼-ç»ƒåŠŸæˆ¿":"jh fam 7 start;go north;go up;go up;go up;go up;go east","æ€æ‰‹æ¥¼-é‡‘æ¥¼":"jh fam 7 start;go north;go up;go up;go up;go up;go up;go up","æ€æ‰‹æ¥¼-ä¹¦æˆ¿":"jh fam 7 start;go north;go up;go up;go up;go up;go up;go up;go west","æ€æ‰‹æ¥¼-å¹³å°":"jh fam 7 start;go north;go up;go up;go up;go up;go up;go up;go up","è¥„é˜³åŸ-å¹¿åœº":"jh fam 8 start","è¥„é˜³åŸ-å—åŸé—¨":"jh fam 8 start;go south;go south;go south;go south","è¥„é˜³åŸ-åŒ—åŸé—¨":"jh fam 8 start;go north;go north;go north;go north;","è¥„é˜³åŸ-è¥¿åŸé—¨":"jh fam 8 start;go west;go west;go west;go west","è¥„é˜³åŸ-ä¸œåŸé—¨":"jh fam 8 start;go east;go eastgo east;go east","æ­¦é“å¡”":"jh fam 9 start"},mpz_path={"æ­¦å½“æ´¾":"jh fam 1 start;go west;go northup;go north;go west;go northup;go northup;go northup;go north;go north;go north;go north;go north","åå±±æ´¾":"jh fam 3 start;go westup;go north","å°‘æ—æ´¾":"jh fam 2 start;go north;go north;go northwest;go northeast;go north","å³¨çœ‰æ´¾":"jh fam 4 start;go west;go south;go west;go south","é€é¥æ´¾":"jh fam 5 start;go west;go east;go down","ä¸å¸®":"jh fam 6 start;go down;go east;go east;go east;go east;go east"},diff_colors={normal:"",access:"https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script/plugins/wsmud_color_accessibility.css",flat:"https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script/plugins/wsmud_color_flat.css"},fb_path=[],drop_list=[],fenjie_list=[],blacklist="",blackpfm=[],role,roleid,family=null,sm_loser="å¼€",sm_price=null,sm_getstore=null,sm_any="å¼€",wudao_pfm="",ks_pfm="2000",ks_wait="120",automarry=null,autoKsBoss=null,stopauto=!1,getitemShow=null,zmlshowsetting=0,bagFull=0,pushSwitch="å…³",pushType="0",pushToken="",auto_command=null,eqlist={},skilllist={},unauto_pfm="",auto_pfmswitch="å¼€",auto_pfm_mode="å¼€",auto_rewardgoto="å…³",busy_info="å…³",saveAddr="å…³",auto_updateStore="å…³",auto_relogin="å…³",autoeq="",zml=[],zdy_item_store="",zdy_item_store2="",zdy_item_lock="",zdy_item_drop="",zdy_item_fenjie="",ztjk_item=[],zdyskills="å…³",zdyskilllist="",welcome="",shieldswitch="å¼€",shield="",shieldkey="",statehml="",backimageurl="",loginhml="",timequestion=[],silence="å¼€",pfmnum=0,pfmdps=0,dpssakada="å¼€",critical=0,criticalnum=0,dpslock=0,battletime=0,lastcri=0,lastpfm=0,funnycalc="å…³",inzdy_btn=!1,zdy_btnlist=[],auto_buylist="",auto_skillPaperSelllist="",color_select="normal",die_str="èœ",exit1=void 0,exit2=void 0,exit3=void 0,KEY={keys:[],roomItemSelectIndex:-1,init:function(){$("span[command=stopstate] span:eq(0)").html("S"),$("span[command=showcombat] span:eq(0)").html("A"),$("span[command=showtool] span:eq(0)").html("C"),$("span[command=pack] span:eq(0)").html("B"),$("span[command=tasks] span:eq(0)").html("L"),$("span[command=score] span:eq(0)").html("O"),$("span[command=jh] span:eq(0)").html("J"),$("span[command=skills] span:eq(0)").html("K"),$("span[command=message] span:eq(0)").html("U"),$("span[command=shop] span:eq(0)").html("P"),$("span[command=stats] span:eq(0)").html("I"),$("span[command=setting] span:eq(0)").html(","),$(document).on("keydown",this.e),this.add(27,function(){KEY.dialog_close()}),this.add(192,function(){$(".map-icon").click()}),this.add(32,function(){KEY.dialog_confirm()}),this.add(83,function(){KEY.do_command("stopstate")}),this.add(13,function(){KEY.do_command("showchat")}),this.add(65,function(){KEY.do_command("showcombat")}),this.add(67,function(){KEY.do_command("showtool")}),this.add(66,function(){KEY.do_command("pack")}),this.add(76,function(){KEY.do_command("tasks")}),this.add(79,function(){KEY.do_command("score")}),this.add(74,function(){KEY.do_command("jh")}),this.add(75,function(){KEY.do_command("skills")}),this.add(73,function(){KEY.do_command("stats")}),this.add(85,function(){KEY.do_command("message")}),this.add(80,function(){KEY.do_command("shop")}),this.add(188,function(){KEY.do_command("setting")}),this.add(81,function(){inzdy_btn?WG.zdybtnfunc(0):WG.sm_button()}),this.add(87,function(){inzdy_btn?WG.zdybtnfunc(1):WG.go_yamen_task()}),this.add(69,function(){inzdy_btn?WG.zdybtnfunc(2):WG.kill_all()}),this.add(82,function(){inzdy_btn?WG.zdybtnfunc(3):WG.get_all()}),this.add(84,function(){inzdy_btn?WG.zdybtnfunc(4):WG.sell_all()}),this.add(89,function(){inzdy_btn?WG.zdybtnfunc(5):WG.zdwk()}),this.add(9,function(){return KEY.onRoomItemSelect(),!1}),this.add(102,function(){exit1=G.exits.get("east"),exit2=G.exits.get("eastup"),exit3=G.exits.get("eastdown"),exit1?WG.Send("go east"):exit2?WG.Send("go eastup"):exit3&&WG.Send("go eastdown"),KEY.onChangeRoom()}),this.add(39,function(){exit1=G.exits.get("east"),exit2=G.exits.get("eastup"),exit3=G.exits.get("eastdown"),exit1?WG.Send("go east"):exit2?WG.Send("go eastup"):exit3&&WG.Send("go eastdown"),KEY.onChangeRoom()}),this.add(100,function(){exit1=G.exits.get("west"),exit2=G.exits.get("westup"),exit3=G.exits.get("westdown"),exit1?WG.Send("go west"):exit2?WG.Send("go westup"):exit3&&WG.Send("go westdown"),KEY.onChangeRoom()}),this.add(37,function(){exit1=G.exits.get("west"),exit2=G.exits.get("westup"),exit3=G.exits.get("westdown"),exit1?WG.Send("go west"):exit2?WG.Send("go westup"):exit3&&WG.Send("go westdown"),KEY.onChangeRoom()}),this.add(98,function(){exit1=G.exits.get("south"),exit2=G.exits.get("southup"),exit3=G.exits.get("southdown"),exit1?WG.Send("go south"):exit2?WG.Send("go southup"):exit3&&WG.Send("go southdown"),KEY.onChangeRoom()}),this.add(40,function(){exit1=G.exits.get("south"),exit2=G.exits.get("southup"),exit3=G.exits.get("southdown"),exit1?WG.Send("go south"):exit2?WG.Send("go southup"):exit3&&WG.Send("go southdown"),KEY.onChangeRoom()}),this.add(101,function(){WG.Send("go down")}),this.add(613,function(){WG.Send("go up")}),this.add(104,function(){exit1=G.exits.get("north"),exit2=G.exits.get("northup"),exit3=G.exits.get("northdown"),exit1?WG.Send("go north"):exit2?WG.Send("go northup"):exit3&&WG.Send("go northdown"),KEY.onChangeRoom()}),this.add(38,function(){exit1=G.exits.get("north"),exit2=G.exits.get("northup"),exit3=G.exits.get("northdown"),exit1?WG.Send("go north"):exit2?WG.Send("go northup"):exit3&&WG.Send("go northdown"),KEY.onChangeRoom()}),this.add(99,function(){WG.Send("go southeast"),KEY.onChangeRoom()}),this.add(97,function(){WG.Send("go southwest"),KEY.onChangeRoom()}),this.add(105,function(){WG.Send("go northeast"),KEY.onChangeRoom()}),this.add(103,function(){WG.Send("go northwest"),KEY.onChangeRoom()}),this.add(49,function(){KEY.combat_commands(0)}),this.add(50,function(){KEY.combat_commands(1)}),this.add(51,function(){KEY.combat_commands(2)}),this.add(52,function(){KEY.combat_commands(3)}),this.add(53,function(){KEY.combat_commands(4)}),this.add(54,function(){KEY.combat_commands(5)}),this.add(55,function(){KEY.combat_commands(6)}),this.add(56,function(){KEY.combat_commands(7)}),this.add(57,function(){KEY.combat_commands(8)}),this.add(48,function(){KEY.combat_commands(9)}),this.add(45,function(){KEY.combat_commands(10)}),this.add(61,function(){KEY.combat_commands(11)}),this.add(561,function(){KEY.onRoomItemAction(0)}),this.add(562,function(){KEY.onRoomItemAction(1)}),this.add(563,function(){KEY.onRoomItemAction(2)}),this.add(564,function(){KEY.onRoomItemAction(3)}),this.add(565,function(){KEY.onRoomItemAction(4)}),this.add(566,function(){KEY.onRoomItemAction(5)}),this.add(1073,function(){KEY.room_commands(0)}),this.add(1074,function(){KEY.room_commands(1)}),this.add(1075,function(){KEY.room_commands(2)}),this.add(1076,function(){KEY.room_commands(3)}),this.add(1077,function(){KEY.room_commands(4)}),this.add(1078,function(){KEY.room_commands(5)})},add:function(e,t){this.keys.push({key:e,callback:t})},e:function(e){if($(".channel-box").is(":visible"))KEY.chatModeKeyEvent(e);else if(!($(".dialog-confirm").is(":visible")&&(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105)||$("input").is(":focus")||$("textarea").is(":focus"))){var t,o=(e.ctrlKey||e.metaKey?1024:0)+(e.altKey?512:0)+e.keyCode;for(t of KEY.keys)if(t.key==o)return t.callback()}},isallow:!0,dialog_close:function(){$(".dialog-close").click()},dialog_confirm:function(){0<=$(".dialog-confirm").attr("style").indexOf("block")&&this.isallow&&(this.isallow=!1,$(".dialog-btn.btn-ok").click(),setTimeout(()=>{this.isallow=!0},500))},do_command:function(e){$("span[command="+e+"]").click()},room_commands:function(e){$("div.combat-panel div.room-commands span:eq("+e+")").click()},combat_commands:function(e){$("div.combat-panel div.combat-commands span.pfm-item:eq("+e+")").click()},chatModeKeyEvent:function(e){27==e.keyCode?KEY.dialog_close():13==e.keyCode&&($(".sender-box").val().length?$(".sender-btn").click():KEY.dialog_close())},onChangeRoom:function(){KEY.roomItemSelectIndex=-1},onRoomItemSelect:function(){-1!=KEY.roomItemSelectIndex&&$(".room_items div.room-item:eq("+KEY.roomItemSelectIndex+")").css("background","#000"),KEY.roomItemSelectIndex=(KEY.roomItemSelectIndex+1)%$(".room_items div.room-item").length;var e=$(".room_items div.room-item:eq("+KEY.roomItemSelectIndex+")");e.css("background","#444"),e.click()},onRoomItemAction:function(e){$(".room_items .item-commands span:eq("+e+")").click()}};function textBecomeImg(e,t,o){var n=document.createElement("canvas"),s=0,s=(t<=32?s=1:32<t&&t<=60?s=2:60<t&&t<=80?s=4:80<t&&t<=100?s=6:100<t&&(s=10),n.height=t+s,n.getContext("2d"));return s.clearRect(0,0,n.width,n.height),s.fillStyle=o,s.font=t+"px KaiTi",s.textBaseline="middle",s.fillText(e,0,t/2),n.width=s.measureText(e).width,s.fillStyle=o,s.font=t+"px KaiTi",s.textBaseline="middle",s.fillText(e,0,t/2),n.toDataURL("image/png")}function messageClear(){$(".WG_log pre").html("")}var log_line=0;function textShow(e){imgShow(textBecomeImg(e,90,"red"))}function imgShow(e,t=2e3){$(".container > .content-message").css("background","url("+e+") no-repeat center center"),setTimeout(()=>{$(".container > .content-message").css("background","")},t)}function messageAppend(e,t=0,o=0){var n;o?(n=e+"\n",1==t?n="<hiy>"+n+"</hiy>":2==t?n="<hig>"+n+"</hig>":3==t?n="<hiw>"+n+"</hiw>":4==t&&(n="<hir>"+n+"</hir>"),$(".content-message pre").append(n)):(100<log_line&&(log_line=0,$(".WG_log pre").empty()),n=e+"\n",1==t?n="<hiy>"+n+"</hiy>":2==t?n="<hig>"+n+"</hig>":3==t?n="<hiw>"+n+"</hiw>":4==t&&(n="<hir>"+n+"</hir>"),$(".WG_log pre").append(n),log_line++,$(".WG_log")[0].scrollTop=99999)}var sm_array={"æ­¦å½“":{place:"æ­¦å½“æ´¾-ä¸‰æ¸…æ®¿",npc:"æ­¦å½“æ´¾ç¬¬äºŒä»£å¼Ÿå­ æ­¦å½“é¦–ä¾  å®‹è¿œæ¡¥",sxplace:"æ­¦å½“æ´¾-å¤ªå­å²©",sx:"é¦–å¸­å¼Ÿå­"},"åå±±":{place:"åå±±æ´¾-é•‡å²³å®«",npc:"å¸‚äº•è±ªæ° é«˜æ ¹æ˜",sxplace:"åå±±æ´¾-ç»ƒæ­¦åœº",sx:"é¦–å¸­å¼Ÿå­"},"å°‘æ—":{place:"å°‘æ—æ´¾-å¤©ç‹æ®¿",npc:"å°‘æ—å¯ºç¬¬ä¸‰åä¹ä»£å¼Ÿå­ é“è§‰ç¦…å¸ˆ",sxplace:"å°‘æ—æ´¾-ç»ƒæ­¦åœº",sx:"å¤§å¸ˆå…„"},"é€é¥":{place:"é€é¥æ´¾-é’è‰åª",npc:"èªè¾©è€äºº è‹æ˜Ÿæ²³",sxplace:"-jh fam 5 start;go west",sx:"é¦–å¸­å¼Ÿå­"},"ä¸å¸®":{place:"ä¸å¸®-æ ‘æ´ä¸‹",npc:"ä¸å¸®ä¸ƒè¢‹å¼Ÿå­ å·¦å…¨",sxplace:"ä¸å¸®-ç ´åº™å¯†å®¤",sx:"é¦–å¸­å¼Ÿå­"},"å³¨çœ‰":{place:"å³¨çœ‰æ´¾-åº™é—¨",npc:"å³¨çœ‰æ´¾ç¬¬äº”ä»£å¼Ÿå­ è‹æ¢¦æ¸…",sxplace:"å³¨çœ‰æ´¾-å¹¿åœº",sx:"å¤§å¸ˆå§"},"æ­¦é¦†":{place:"æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†",npc:"æ­¦é¦†æ•™ä¹ ",sxplace:"æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†"},"æ€æ‰‹æ¥¼":{place:"æ€æ‰‹æ¥¼-å¤§å…",npc:"æ€æ‰‹æ•™ä¹  ä½•å°äºŒ",sxplace:"æ€æ‰‹æ¥¼-ç»ƒåŠŸæˆ¿",sx:"é‡‘ç‰Œæ€æ‰‹"}},WG={online:!1,sm_state:-1,sm_item:null,sm_store:null,init:function(){$("li[command=SelectRole]").on("click",function(){WG.login()})},inArray:function(t,o){for(let e=0;e<o.length;e++){var n=o[e];if("<"==n[0]){if(n==t)return!0}else if(""!=n&&0<=t.indexOf(n))return!0}return!1},hasStr:function(t,o){if(null==o.length){for(var e in o)for(var n of o[e])if(n==t)return!0}else for(let e=0;e<o.length;e++)if(o[e]==t)return!0;return!1},set_value(e,t){return GM_setValue(e,t)},get_value(e){return GM_getValue(e)},login:function(){role=$(".role-list .select").text().split(/[\s\n]/).pop(),roleid=$(".role-list .select").attr("roleid"),GM_listValues().map(function(e){var t;0==e.indexOf(role+"_")&&(t=e.split(role+"_")[1],console.log(t),GM_setValue(roleid+"_"+t,GM_getValue(e,null)),GM_deleteValue(e))}),$(".bottom-bar").append("<span class='item-commands' style='display:none'><span WG='WG' cmd=''></span></span>");var e=UI.wgui(),e=($(".content-message").after(e),$(".content-bottom").after("<div class='zdy-commands'></div>"),GM_addStyle(`.zdy-item{
                display: inline-block;border: solid 1px gray;color: gray;background-color: black;
                text-align: center;cursor: pointer;border-radius: 0.25em;min-width: 2.5em;margin-right: 0em;
                margin-left: 0.4em;position: relative;padding-left: 0.4em;padding-right: 0.4em;line-height: 24px;}
                .WG_log{flex: 1;overflow-y: auto;border: 1px solid #404000;max-height: 15em;width: calc(100% - 40px);}
                .WG_log > pre{margin: 0px; white-space: pre-line;}
                .WG_button { width: calc(100% - 40px); overflow-x: auto;display: block;line-height:2em;}
                .WG_button > .zdy-item:active {background-color: gray;color:black;}
                .item-plushp{display: inline-block;float: right;width: 100px;}
                .item-dps{display: inline-block;float: right;width: 100px;}
                .settingbox {margin-left: 0.625 em;border: 1px solid gray;background-color: transparent;color: unset;resize: none;width: 80% ;height: 3rem;}
                .runtest textarea{display:block;width:300px;height:160px;border:10px solid #F8F8F8;border-top-width:0;padding:10px;line-height:20px;overflow:auto;background-color:#3F3F3F;color:#eee;font-size:12px;font-family:Courier New}
                .layui-btn,.layui-input,.layui-select,.layui-textarea,.layui-upload-button{outline:0;-webkit-appearance:none;transition:all .3s;-webkit-transition:all .3s;box-sizing:border-box}
                .layui-btn{display:inline-block;height:38px;line-height:38px;padding:0 18px;background-color:#009688;color:#fff;white-space:nowrap;text-align:center;font-size:14px;border:none;border-radius:2px;cursor:pointer}
                .layui-btn-normal{background-color:#1E9FFF}
                .layui-layer-moves{background-color:transparent}
                .switch2 {display: inline-block;position: relative;height: 1.25em;width: 3.125em;line-height: 1.25em;
                border-radius: 0.875em;background: #dedede;cursor: pointer;-ms-user-select: none;-moz-user-select: none;
                -webkit-user-select: none;user-select: none;vertical-align: middle;text-align: center;}
                .switch2 > .switch-button {position: absolute;left: 0px;height: 1.25em;width: 1.25em;
                border-radius: 0.875em;background: #fff;box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                transition: 0.3s;-webkit-transition: 0.3s;left: 0px;}
                .switch2 > .switch-text {color:#898989;margin-left: 0.625em;}
                .on>.switch-button {right:0px;left:auto;}
                .on>.switch-text {color:#ffffff;margin-right: 0.625em;    margin-left: 0px;}
                .on {background-color:#008000;}
                .crit{
                    height:24px;
                    position:relative;
                    animation:myfirst 1s;
                    -webkit-animation:myfirst 0.4s; /* Safari and Chrome */
                }
                    @keyframes myfirst
                {
                    0%   {background:red; left:0px; top:0px;}
                    33% {background:red; left:0px; top:-14px;}
                    66% {background:red; left:0px; top:14px;}
                    100% {background:red; left:0px; top:0px;}
                }

                @-webkit-keyframes myfirst /* Safari and Chrome */
                {
                    0%   {background:red; left:0px; top:0px;}
                    33% {background:red; left:0px; top:-30px;}
                    100% {background:red; left:0px; top:0px;}
                }
                .rainbow-text{
                    color:red;
                    background-image: repeating-linear-gradient(45deg, violet, indigo, blue, green, yellow, orange, red, violet);
                    background-size:800% 800%;
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    animation: rainbow 8s ease infinite;
                    -webkit-animation: rainbow 8s ease infinite;
                }
                @keyframes rainbow
                {
                    0%{background-position:0% 50%}
                    50%{background-position:100% 25%}
                    100%{background-position:0% 50%}
                }`),npcs=GM_getValue("npcs",npcs),pgoods=GM_getValue("goods",goods),equip=GM_getValue(roleid+"_equip",equip),GI.configInit(),""!=backimageurl&&GM_addStyle(`body{background-color:rgb(0,0,0,.25)}
                div{ opacity:1;}
                html{background:rgba(255,255,255,0.25);
                background-image:url('${backimageurl}');
                background-repeat:no-repeat;
                background-size:100% 100%;
                -moz-background-size:100% 100%;} `),color_select=GM_getValue("color_select",color_select),document.createElement("link"));e.rel="stylesheet",e.type="text/css",e.href=diff_colors[color_select],document.getElementsByTagName("head")[0].appendChild(e),setTimeout(()=>{try{GM_registerMenuCommand&&(GM_registerMenuCommand("åˆå§‹åŒ–",WG.update_id_all),GM_registerMenuCommand("è®¾  ç½®",WG.setting),GM_registerMenuCommand("è°ƒ  è¯•",WG.cmd_echo_button))}catch(e){}var e="";document.title=role+"-MUDæ¸¸æˆ-æ­¦ç¥ä¼ è¯´",L.msg(`æ¬¢è¿ä½¿ç”¨ ${welcome} ç‰ˆæœ¬å·`+GM_info.script.version),KEY.do_command("showtool"),KEY.do_command("pack"),KEY.do_command("score"),WG.SendCmd("score2"),WG.SendCmd("party load"),setTimeout(()=>{KEY.do_command("score");var t=role;G.level&&(t=G.level+role,G.isGod())&&$(".zdy-item.zdwk").html("ä¿®ç‚¼(Y)"),t=welcome+""+t,CanUse?("å¼€"!=shieldswitch&&"å¼€"!=silence||messageAppend("å·²æ³¨å…¥å±è”½ç³»ç»Ÿ",0,1),0==npcs["åº—å°äºŒ"]?e=`
                                <hiy>æ¬¢è¿${t},æ’ä»¶å·²åŠ è½½ï¼ç¬¬ä¸€æ¬¡ä½¿ç”¨,è¯·åœ¨è®¾ç½®ä¸­,åˆå§‹åŒ–ID,å¹¶ä¸”è®¾ç½®ä¸€ä¸‹æ˜¯å¦è‡ªåŠ¨å©šå®´,è‡ªåŠ¨ä¼ é€boss
                                æ’ä»¶ç‰ˆæœ¬: ${GM_info.script.version}
                                </hiy>`:$.get("https://wsmud.ii74.com/hello/"+role,e=>{messageAppend(`
                                <hiy>æ¬¢è¿${t},æ’ä»¶å·²åŠ è½½ï¼
                                æ’ä»¶ç‰ˆæœ¬: ${GM_info.script.version}
                                æ›´æ–°æ—¥å¿—: ${e}
                                </hiy>`)}),WG.ztjk_func(),WG.zml_showp(),WG.dsj_func(),setTimeout(()=>{WG.wsdelaytest()},1e3),G.level&&G.isGod()&&WG.ytjk_func()):e=`
                            <hiy>æ¬¢è¿${role},æ’ä»¶æœªæ­£å¸¸åŠ è½½ï¼
                            å½“å‰æµè§ˆå™¨ä¸æ”¯æŒè‡ªåŠ¨å–œå®´è‡ªåŠ¨boss,è¯·ä½¿ç”¨centbrowseræµè§ˆå™¨
                            è°·æ­Œç³»æµè§ˆå™¨,è¯·åœ¨networkä¸­å‹¾é€‰disable cache,å¤šåˆ·æ–°å‡ æ¬¡,ç›´è‡³æç¤ºå·²åŠ è½½!
                            å¤šæ¬¡åˆ·æ–°æ— æ³•ä»ç„¶å‡ºç°æœ¬æç¤ºï¼Œè¯·æ‰“å¼€tampermonkey æ’ä»¶è®¾ç½®
                            å¼€å¯é«˜çº§è®¾ç½®ï¼Œåœ¨æœ€ä¸‹æ–¹å®éªŒ è®¾ç½® â€œæ³¨å…¥æ¨¡å¼ï¼šå³æ—¶â€â€œä¸¥æ ¼æ¨¡å¼ï¼šç¦ç”¨â€
                            å®åœ¨ä¸ä¼šç”¨åŠ ç¾¤äº¤æµ
                            æ’ä»¶ç‰ˆæœ¬: ${GM_info.script.version}
                            </hiy>`,messageAppend(e)},500),KEY.do_command("showcombat");"true"===localStorage.getItem("closeBorad")&&WG.showhideborad(),WG.runLoginhml(),setInterval(()=>{var e=new Date,e={data:JSON.stringify({type:"time",h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),time:e.toTimeString()})};WG.receive_message(e)},1e3)},1e3)},update_goods_id:function(){var e,t,o=$(".dialog-list > .obj-list:first");if(o.length){messageAppend("æ£€æµ‹åˆ°å•†å“æ¸…å•");for(var n of o.children())e=(n=$(n)).attr("obj"),t=$(n.children()[0]).html(),n=n.children()[0].localName,"é‡‘åˆ›è¯"==t||"å¼•æ°”ä¸¹"==t?pgoods[n+t]?pgoods[n+t].id=e:pgoods[n+t]={id:e,type:n,sales:"è¯é“ºè€æ¿ å¹³ä¸€æŒ‡",place:"æ‰¬å·åŸ-è¯é“º"}:pgoods[t].id=e,messageAppend(`<${n}>${t}</${n}>:`+e);return GM_setValue("goods",pgoods),!0}return messageAppend("æœªæ£€æµ‹åˆ°å•†å“æ¸…å•"),!1},update_npc_id:function(){var e;for(e of $(".room_items .room-item"))0<=e.lastElementChild.innerText.indexOf("[")?null==e.lastElementChild.lastElementChild.lastElementChild.lastElementChild&&3==e.lastElementChild.firstChild.nodeType&&"SPAN"==e.lastElementChild.firstChild.nextSibling.tagName&&(npcs[e.lastElementChild.innerText.split("[")[0]]=$(e).attr("itemid"),messageAppend(e.lastElementChild.innerText.split("[")[0]+" çš„ID:"+$(e).attr("itemid"))):null==e.lastElementChild.lastElementChild&&(npcs[e.lastElementChild.innerText]=$(e).attr("itemid"),messageAppend(e.lastElementChild.innerText+" çš„ID:"+$(e).attr("itemid")));GM_setValue("npcs",npcs)},update_id_all:function(){GM_setValue("goods",goods),WG.SendCmd("stopstate");var t,o,n=[],s=(Object.keys(pgoods).forEach(function(e){null==n[pgoods[e].place]&&(n[pgoods[e].place]=pgoods[e].sales)}),Object.keys(n)),i=0,a=0,l=setInterval(()=>{switch(a){case 0:i>=s.length?(messageAppend("åˆå§‹åŒ–å®Œæˆ"),WG.go("æ­¦å½“æ´¾-å¹¿åœº"),clearInterval(l)):(t=s[i],o=n[t],WG.go(t),a=1);break;case 1:WG.update_npc_id();var e=npcs[o];WG.Send("list "+e),a=2;break;case 2:WG.update_goods_id()?(a=0,i++):a=1}},1e3)},clean_id_all:function(e=!0){GM_setValue("goods",goods),pgoods=goods,e&&alert("æ¸…ç©ºå®Œæ¯•,è¯·åˆ·æ–°ä¸€ä¸‹é¡µé¢")},update_store_hook:void 0,wsdelaytest:async function(){G.wsdelaySetTime=(new Date).getTime(),G.wsdelaySetCount=1,G.wsdelay=void 0,WG.SendCmd("test")},update_store:async function(){WG.update_store_hook=WG.add_hook(["dialog","text"],e=>{if("list"==e.dialog&&e.max_store_count){messageAppend("<hio>ä»“åº“ä¿¡æ¯è·å–</hio>å¼€å§‹");var t,o=e.stores;store_list=[];for(t of o)store_list.push(t.name.toLowerCase());zdy_item_store=store_list.join(","),$("#store_info").val(zdy_item_store),GM_setValue(roleid+"_zdy_item_store",zdy_item_store)}else"text"==e.type&&"æ²¡æœ‰è¿™ä¸ªç©å®¶ã€‚"==e.msg&&(messageAppend("<hio>ä»“åº“ä¿¡æ¯è·å–</hio>å®Œæˆ"),$(".dialog-close").click(),WG.remove_hook(WG.update_store_hook),WG.update_store_hook=void 0)}),WG.SendCmd("$to æ‰¬å·åŸ-å¹¿åœº;$to æ‰¬å·åŸ-é’±åº„;look3 1")},clean_dps:function(){if(dpslock&&0!=battletime){let e=pfmnum+criticalnum,t=pfmdps+critical,o=((new Date).getTime()-battletime.getTime())/1e3,n=t/o,s=e/o;o<1&&(n=t,s=e),setTimeout(()=>{messageAppend(`âš”ï¸æˆ˜æ–—è¿‡ç¨‹åˆ†æ:
                    â±ï¸æˆ˜æ–—æ—¶é•¿:${o}ç§’
                    âš”ï¸æ™®é€šæ”»å‡»:${pfmnum}æ¬¡
                    âš”ï¸æ™®é€šä¼¤å®³:${addChineseUnit(pfmdps)}
                    ğŸŒŸæš´å‡»æ”»å‡»:${criticalnum}æ¬¡
                    ğŸŒŸæš´å‡»ä¼¤å®³:${addChineseUnit(critical)}
                    âš”ï¸æ€»è®¡æ”»å‡»:${e}æ¬¡
                    âš”ï¸æ€»è®¡ä¼¤å®³:${addChineseUnit(t)}
                    â±ï¸æ¯ç§’ä¼¤å®³:${addChineseUnit(n)}
                    â±ï¸æ¯ç§’æ”»å‡»:${Math.round(s)}æ¬¡`,4),dpslock=criticalnum=critical=pfmnum=pfmdps=0},100)}},Send:async function(e){if(CanUse)send_cmd(e,!0);else if(e)for(var t of e=e instanceof Array?e:e.split(";"))$("span[WG='WG']").attr("cmd",t).click()},SendStep:async function(e){if(e)for(var t of e=e instanceof Array?e:e.split(";"))WG.SendCmd(t),await WG.sleep(12e3)},SendCmd:async function(cmd){if(cmd){0<=cmd.indexOf(",")?cmd instanceof Array||(cmd=0<=cmd.indexOf(";")?cmd.split(";"):cmd.split(",")):cmd=cmd instanceof Array?cmd:cmd.split(";");let idx=0,cmds="";for(var c of cmd){if(0<=c.indexOf("$")){if("$"==c[0]){c=c.replace("$","");let p0=c.split(" ")[0],p1=c.split(" ")[1];return cmds=cmd.join(";"),void eval("T."+p0+"("+idx+",'"+p1+"','"+cmds+"')")}var p_c=c.split(" "),p_c=p_c[p_c.length-1];if(!p_c)return;if("$"==p_c[0]){p_c=p_c.replace("$","");let patt=new RegExp(/\".*?\"/),result=patt.exec(p_c)[0];return cmds=cmd.join(";"),void eval("T."+p_c.split("(")[0]+"("+idx+","+result+",'"+cmds+"')")}if(p_c=c.split(" "),0<=p_c[1].indexOf("$")){p_c=p_c[1].replace("$","");let patt=new RegExp(/\".*?\"/),result=patt.exec(p_c)[0];return cmds=cmd.join(";"),void eval("T."+p_c.split("(")[0]+"("+idx+","+result+",'"+cmds+"')")}}if(0<=c.indexOf("%")){var rep=c.match("%([^%]+)%");if(null!=npcs[rep[1]])var subStr=new RegExp("%([^%]+)%"),c=c.replace(subStr,npcs[rep[1]]);else for(var item of roomData)if(0!=item&&0<=item.name.indexOf(rep[1])){var subStr=new RegExp("%([^%]+)%");c=c.replace(subStr,item.id);break}}var rep,subStr;0<=c.indexOf("*")&&(rep=c.match("\\*([^%]+)\\*"),null!=pgoods[rep[1]])&&(subStr=new RegExp("\\*([^%]+)\\*"),c=c.replace(subStr,pgoods[rep[1]].id)),WG.Send(c),idx+=1}}},sleep:function(t){return new Promise(e=>setTimeout(e,t))},stopAllAuto:function(){stopauto=!0},reSetAllAuto:function(){stopauto=!1},go:async function(e){null==needfind[e="å¼€"==saveAddr&&"æ‰¬å·åŸ-é’±åº„"==e?"ä½æˆ¿-å§å®¤":e]&&WG.at(e)||null!=place[e]&&(G.ingo=!0,await WG.SendCmd(place[e]),G.ingo=!1)},at:function(e){return"å¼€"==saveAddr&&"æ‰¬å·åŸ-é’±åº„"==e&&(e="ä½æˆ¿-å§å®¤"),-1!=$(".room-name").html().indexOf(e)},getIdByName:function(t){for(let e=0;e<roomData.length;e++)if(roomData[e].name&&0<=roomData[e].name.indexOf(t))return roomData[e].id;return null},smhook:void 0,ythook:void 0,ungetStore:!1,kala_count:0,doSmTask:async function(c){return new Promise(async t=>{try{switch(c){case 0:WG.go(sm_array[family].place),WG.sm_state=1,2<WG.kala_count&&(WG.clean_id_all(!1),5<WG.kala_count)&&(WG.kala_count=0,WG.sm_state=0,$(".sm_button").text("å¸ˆé—¨(Q)"),messageAppend("é”™è¯¯:å¸ˆé—¨ä»»åŠ¡é”™è¯¯,è„šæœ¬å°†é‡è¯•")),t();break;case 1:var e,o=$(".room_items .room-item"),n=null;for(e of o)0<=e.lastElementChild.innerText.indexOf("[")?null==e.lastElementChild.lastElementChild.lastElementChild.lastElementChild&&3==e.lastElementChild.firstChild.nodeType&&"SPAN"==e.lastElementChild.firstChild.nextSibling.tagName&&e.lastElementChild.innerText.split("[")[0]==sm_array[family].npc&&(n=$(e).attr("itemid")):null==e.lastElementChild.lastElementChild&&e.lastElementChild.innerText==sm_array[family].npc&&(n=$(e).attr("itemid"));null!=n?(WG.Send("task sm "+n),WG.Send("task sm "+n),WG.sm_state=2):(WG.update_npc_id(),WG.clean_id_all(!1),WG.sm_state=0,WG.kala_count=WG.kala_count+1),t();break;case 2:var s=GM_getValue(roleid+"_sm_loser",sm_loser),i=(0==(l=$("span[cmd$='giveup']:last").parent().prev()).length&&(WG.sm_state=0,WG.kala_count=WG.kala_count+1),l.html()),a=l[0].localName,l=l[0].outerHTML;if(WG.ungetStore){if("å¼€"==s){$("span[cmd$='giveup']:last").click(),messageAppend("æ”¾å¼ƒä»»åŠ¡"),WG.ungetStore=!1,WG.sm_state=0,WG.kala_count=0,t();break}if("å…³"==s){WG.sm_state=-1,WG.kala_count=0,$(".sm_button").text("å¸ˆé—¨(Q)"),t();break}}var r=$("span[cmd$='giveup']:last").prev();for(let e=0;e<6;e++)if(r.children().html()){if(0<=r.html().indexOf(l))return r.click(),messageAppend("è‡ªåŠ¨ä¸Šäº¤"+l),WG.sm_state=0,WG.kala_count=0,void t();r=r.prev()}if(WG.sm_item="é‡‘åˆ›è¯"==i||"å¼•æ°”ä¸¹"==i?pgoods[a+i]:pgoods[i],null!=l&&(WG.sm_itemx=l,WG.inArray(l,store_list))&&"å¼€"==sm_getstore){if(!(0<=l.indexOf("hiz")||0<=l.indexOf("hio")))return messageAppend("è‡ªåŠ¨ä»“åº“å–"+l),WG.sm_store=l,WG.sm_state=4,void t();if("å¼€"==(sm_any=GM_getValue(roleid+"_sm_any",sm_any)))return messageAppend("è‡ªåŠ¨ä»“åº“å–"+l),WG.sm_store=l,WG.sm_state=4,void t();if(window.confirm("æ‚¨ç¡®å®šè¦äº¤ç¨€æœ‰ç‰©å“å—"))return messageAppend("è‡ªåŠ¨ä»“åº“å–"+l),WG.sm_store=l,WG.sm_state=4,void t()}null!=WG.sm_item&&0<=l.indexOf(WG.sm_item.type)?(null==WG.smbuyNum?(WG.smbuyNum=0,WG.kala_count=WG.kala_count+1):3<WG.smbuyNum&&(WG.sm_state=5),WG.go(WG.sm_item.place),messageAppend("è‡ªåŠ¨è´­ä¹°"+l),WG.sm_state=3):WG.sm_state=5,t();break;case 3:WG.go(WG.sm_item.place),WG.buy(WG.sm_item)&&((WG.sm_state=0)==WG.smbuyNum&&(WG.lastBuy=WG.sm_item),WG.lastBuy==WG.sm_item)&&(WG.smbuyNum=WG.smbuyNum+1),t();break;case 4:s=GM_getValue(roleid+"_sm_loser",sm_loser);WG.go("æ‰¬å·åŸ-é’±åº„"),WG.qu(WG.sm_store,e=>{e?WG.sm_state=0:(messageAppend("æ— æ³•å–"+WG.sm_store),null!=WG.sm_item&&0<=WG.sm_store.indexOf(WG.sm_item.type)?(WG.go(WG.sm_item.place),messageAppend("è‡ªåŠ¨è´­ä¹°"+WG.sm_store),WG.sm_state=3):"å¼€"==s?(WG.ungetStore=!0,WG.sm_state=0):WG.sm_state=5),t()});break;case 5:s=GM_getValue(roleid+"_sm_loser",sm_loser);if("å¼€"==sm_price){var d,u=[{},{},{},{},{}],r=$("span[cmd$='giveup']:last").prev();for(let e=0;e<6;e++)r.children().html()&&-1==r.html().indexOf("æ”¾å¼ƒ")&&0<=r.html().indexOf("ä»¤ç‰Œ")&&(0<=r.html().indexOf("hig")&&(u[0]=r),0<=r.html().indexOf("hic")&&(u[1]=r),0<=r.html().indexOf("hiy")&&(u[2]=r),0<=r.html().indexOf("hiz")&&(u[3]=r),0<=r.html().indexOf("hio"))&&(u[4]=r),r=r.prev();let e=!1;for(d of u)if(null!=d.html)return d.click(),messageAppend("è‡ªåŠ¨ä¸Šäº¤ç‰Œå­"),WG.sm_state=0,WG.kala_count=0,e=!0,void t();if(!e)return messageAppend("æ²¡æœ‰ç‰Œå­å¹¶ä¸”æ— æ³•è´­ä¹°"),WG.smbuyNum=null,"å¼€"==s?($("span[cmd$='giveup']:last").click(),messageAppend("æ”¾å¼ƒä»»åŠ¡"),WG.sm_state=0,WG.kala_count=0):(WG.sm_state=-1,$(".sm_button").text("å¸ˆé—¨(Q)")),void t()}else messageAppend("æ— æ³•æäº¤"+WG.sm_itemx),WG.smbuyNum=null,"å…³"==s?(WG.sm_state=-1,$(".sm_button").text("å¸ˆé—¨(Q)")):"å¼€"==s&&($("span[cmd$='giveup']:last").click(),messageAppend("æ”¾å¼ƒä»»åŠ¡"),WG.sm_state=0,WG.kala_count=0);t()}}catch(e){console.error(e),t()}})},smTask:async function(){for(WG.smhook||(WG.smhook=WG.add_hook("text",function(e){(0<=e.msg.indexOf("è¾›è‹¦äº†ï¼Œ ä½ å…ˆå»ä¼‘æ¯")||0<=e.msg.indexOf("å’Œæœ¬é—¨æ¯«æ— ç“œè‘›")||0<=e.msg.indexOf("ä½ æ²¡æœ‰"))&&(WG.Send("taskover signin"),WG.sm_state=-1,$(".sm_button").text("å¸ˆé—¨(Q)"),WG.remove_hook(WG.smhook),WG.smhook=void 0)}));-1!=WG.sm_state;)try{await WG.doSmTask(WG.sm_state),await WG.sleep(1e3)}catch(e){console.error(e);break}},sm_button:async function(){0<=WG.sm_state?(WG.sm_state=-1,$(".sm_button").text("å¸ˆé—¨(Q)")):(WG.sm_state=0,$(".sm_button").text("åœæ­¢(Q)"),await WG.smTask())},buy:function(e){var t=npcs[e.sales];return null==t?(WG.update_npc_id(),!1):(WG.Send("list "+t),WG.Send("buy 1 "+e.id+" from "+t),!0)},qu_hook:void 0,qu:function(o,n){let s=!1;WG.qu_hook=WG.add_hook("dialog",async function(e){if(null!=e.dialog&null!=e.stores){for(var t of e.stores)if(-1!=t.name.toLocaleLowerCase().indexOf(o)){s=!0;t=t.id;WG.Send("qu 1 "+t);break}setTimeout(()=>{n(s)},300),WG.remove_hook(WG.qu_hook),WG.qu_hook=void 0}}),WG.SendCmd("store")},Give:function(e){var t=npcs["åº—å°äºŒ"];return null==t?(WG.update_npc_id(),!1):(WG.Send("give "+t+" "+e),!0)},eq:function(e){WG.Send("eq "+equip[e])},ask:function(e,t){null!=(e=npcs[e])?WG.Send("ask"+t+" "+e):WG.update_npc_id()},yamen_lister:void 0,yamen_err_no:0,go_yamen_task:async function(){WG.yamen_lister||(WG.yamen_lister=WG.add_hook("text",function(e){0<=e.msg.indexOf("æœ€è¿‘æ²¡æœ‰åœ¨é€ƒçš„é€ƒçŠ¯äº†ï¼Œä½ å…ˆä¼‘æ¯ä¸‹å§ã€‚")?(clearInterval(WG.check_yamen_task),WG.check_yamen_task="over",WG.remove_hook(WG.yamen_lister),WG.yamen_lister=void 0,WG.yamen_err_no=0):0<=e.msg.indexOf("æ²¡æœ‰è¿™ä¸ªäºº")&&WG.update_npc_id()})),WG.go("æ‰¬å·åŸ-è¡™é—¨æ­£å…"),await WG.sleep(200),WG.update_npc_id(),WG.ask("æ‰¬å·çŸ¥åºœ ç¨‹è¯å‘",1),"over"!=WG.check_yamen_task&&window.setTimeout(WG.check_yamen_task,1e3)},check_yamen_task:function(){if("over"!=WG.check_yamen_task){messageAppend("æŸ¥æ‰¾ä»»åŠ¡ä¸­");var t=$(".task-desc:eq(-2)").text();for(let e=3;e<10&&-1==t.indexOf("æ‰¬å·çŸ¥åºœ");e++)t=$(".task-desc:eq(-"+e+")").text();if(0==t.length)KEY.do_command("tasks"),window.setTimeout(WG.check_yamen_task,1e3);else try{zb_npc=t.match("çŠ¯ï¼š([^%]+)ï¼Œæ®")[1],zb_place=t.match("åœ¨([^%]+)å‡º")[1],messageAppend("è¿½æ•ä»»åŠ¡ï¼š"+zb_npc+"   åœ°ç‚¹ï¼š"+zb_place),KEY.do_command("score"),WG.go(zb_place),window.setTimeout(WG.check_zb_npc,1e3)}catch(e){messageAppend("æŸ¥æ‰¾è¡™é—¨è¿½æ•å¤±è´¥"),WG.yamen_err_no<4?(KEY.do_command("tasks"),window.setTimeout(WG.check_yamen_task,1e3),WG.yamen_err_no=WG.yamen_err_no+1):(clearInterval(WG.check_yamen_task),WG.remove_hook(WG.yamen_lister),WG.yamen_lister=void 0,WG.yamen_err_no=0)}}},zb_next:0,check_zb_npc:function(){var e,t=!1;for(e of $(".room_items .room-item"))if(-1!=e.innerText.indexOf(zb_npc))return t=!0,WG.Send("kill "+$(e).attr("itemid")),messageAppend("æ‰¾åˆ°"+zb_npc+"ï¼Œè‡ªåŠ¨å‡»æ€ï¼ï¼ï¼"),void(WG.zb_next=0);var o=needfind[zb_place];!t&&null!=needfind[zb_place]&&WG.zb_next<o.length&&(messageAppend("å¯»æ‰¾é™„è¿‘"),WG.Send(o[WG.zb_next]),WG.zb_next++),t||window.setTimeout(WG.check_zb_npc,1e3)},kill_all:function(){var e;for(e of $(".room_items .room-item"))-1==$(e).html().indexOf("å°¸ä½“")&&WG.Send("kill "+$(e).attr("itemid"))},get_all:function(){var e;for(e of $(".room_items .room-item"))WG.Send("get all from "+$(e).attr("itemid"))},clean_all:function(){WG.go("æ‰¬å·åŸ-æ‰“é“é“º"),WG.Send("sell all")},sort_hook:void 0,sort_all:function(){var i,a=[];WG.sort_hook?(messageAppend("<hio>ä»“åº“æ’åº</hio>è¿è¡Œä¸­"),messageAppend("<hio>ä»“åº“æ’åº</hio>æ‰‹åŠ¨ç»“æŸ"),WG.remove_hook(WG.sort_hook),WG.sort_hook=void 0):(i="",WG.sort_hook=WG.add_hook(["dialog","text"],e=>{if("dialog"==e.type&&"list"==e.dialog){if(null!=e.stores){var t,o,n=["wht","hig","hic","hiy","hiz","hio","red","hir","ord"];for(t of e.stores){let e=0;for(var s of n)0<=t.name.toLocaleLowerCase().indexOf(s)&&(a[e]?a[e].push(t):a[e]=[t]),e++}for(o of a)o&&(i+=function(e){var t,o,n=[];for(t of e)n.push("qu "+t.count+" "+t.id+";$wait 350;");for(o of e=e.sort(function(e,t){return e.name.length-t.name.length}))n.push("store "+o.count+" "+o.id+";$wait 350;");return n.join("")}(o));i+="look3 1",WG.SendCmd(i)}}else"text"==e.type&&"æ²¡æœ‰è¿™ä¸ªç©å®¶ã€‚"==e.msg&&(messageAppend("<hio>ä»“åº“æ’åº</hio>å®Œæˆ"),WG.remove_hook(WG.sort_hook),WG.sort_hook=void 0)}),messageAppend("<hio>ä»“åº“æ’åº</hio>å¼€å§‹"),WG.at("æ‰¬å·åŸ-é’±åº„")?WG.Send("store"):WG.go("æ‰¬å·åŸ-é’±åº„"))},sort_all_bag:function(){var i,a=[];WG.sort_hook?(messageAppend("<hio>èƒŒåŒ…æ’åº</hio>è¿è¡Œä¸­"),messageAppend("<hio>èƒŒåŒ…æ’åº</hio>æ‰‹åŠ¨ç»“æŸ"),WG.remove_hook(WG.sort_hook),WG.sort_hook=void 0):(i="",WG.sort_hook=WG.add_hook(["dialog","text"],e=>{if("dialog"==e.type&&"pack"==e.dialog){if(null!=e.items){var t,o,n=["wht","hig","hic","hiy","hiz","hio","red","hir","ord"];for(t of e.items){let e=0;for(var s of n)0<=t.name.toLocaleLowerCase().indexOf(s)&&(a[e]?a[e].push(t):a[e]=[t]),e++}for(o of a)o&&(i+=function(e){var t,o,n=[];for(t of e)n.push("store "+t.count+" "+t.id+";$wait 350;");for(o of e=e.sort(function(e,t){return e.name.length-t.name.length}))n.push("qu "+o.count+" "+o.id+";$wait 350;");return n.join("")}(o));i+="look3 1",WG.SendCmd(i)}}else"text"==e.type&&"æ²¡æœ‰è¿™ä¸ªç©å®¶ã€‚"==e.msg&&(messageAppend("<hio>èƒŒåŒ…æ’åº</hio>å®Œæˆ,æ‰§è¡Œåè¯·åˆ·æ–°å¹¶é‡æ–°ç™»å½•"),WG.remove_hook(WG.sort_hook),WG.sort_hook=void 0)}),messageAppend("<hio>èƒŒåŒ…æ’åº</hio>å¼€å§‹"),WG.at("æ‰¬å·åŸ-é’±åº„")?(WG.Send("pack"),KEY.dialog_close()):WG.go("æ‰¬å·åŸ-é’±åº„"))},packup_listener:null,packup_ready:!1,sell_all:function(i=1,a=1,l=1){if(WG.packup_listener)messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>è¿è¡Œä¸­"),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>æ‰‹åŠ¨ç»“æŸ"),WG.packup_ready=!1,WG.remove_hook(WG.packup_listener),WG.packup_listener=void 0;else{let s=[];WG.packup_listener=WG.add_hook(["dialog","text"],n=>{if("dialog"==n.type&&"list"==n.dialog){if(null!=n.stores&&!WG.packup_ready){s=[];for(let o=0;o<n.stores.length;o++){let t=null;for(let e=0;e<s.length;e++)if(s[e].name==n.stores[o].name.toLowerCase()){t=s[e];break}null!=t?t.count+=n.stores[o].count:s.push(n.stores[o])}}}else if("dialog"==n.type&&"pack"==n.dialog){let e=[];var t=[];if(null!=n.items&&!WG.packup_ready){for(var o=0;o<n.items.length;o++){if(0!=store_list.length&&WG.inArray(n.items[o].name.toLowerCase(),store_list)&&i)if(n.items[o].can_eq){let t=null;for(let e=0;e<s.length;e++)if(s[e].name==n.items[o].name.toLowerCase()){t=s[e];break}null!=t?t.count<4?(t.count+=n.items[o].count,e.push("store "+n.items[o].count+" "+n.items[o].id),e.push("$wait 350"),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>"+n.items[o].name+"å‚¨å­˜åˆ°ä»“åº“")):messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>"+n.items[o].name+"è¶…è¿‡è®¾ç½®çš„å‚¨å­˜ä¸Šé™"):(s.push(n.items[o]),e.push("store "+n.items[o].count+" "+n.items[o].id),e.push("$wait 350"),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>"+n.items[o].name+"å‚¨å­˜åˆ°ä»“åº“"))}else e.push("store "+n.items[o].count+" "+n.items[o].id),e.push("$wait 350"),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>"+n.items[o].name+"å‚¨å­˜åˆ°ä»“åº“");if(WG.inArray(n.items[o].name.toLowerCase(),drop_list)&&l&&(-1==n.items[o].name.indexOf("â˜…")||-1==n.items[o].name.indexOf("â˜†"))){if(0<=lock_list.indexOf(n.items[o].name.toLowerCase()))continue;1==n.items[o].count?t.push("drop "+n.items[o].id):t.push("drop "+n.items[o].count+" "+n.items[o].id),t.push("$wait 350"),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>"+n.items[o].name+"ä¸¢å¼ƒ")}fenjie_list.length&&WG.inArray(n.items[o].name.toLowerCase(),fenjie_list)&&-1==n.items[o].name.indexOf("â˜…")&&a&&(e.push("fenjie "+n.items[o].id),e.push("$wait 350"),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>"+n.items[o].name+"åˆ†è§£"))}e.push("$wait 1000"),e.push("$to æ‰¬å·åŸ-æ‚è´§é“º"),e.push("sell all"),e.push("$wait 1000"),(e=e.concat(t)).push("look3 1"),(0<e.length||WG.packup_ready)&&(WG.SendCmd(e),WG.packup_ready=!0)}}else"text"==n.type&&"æ²¡æœ‰è¿™ä¸ªç©å®¶ã€‚"==n.msg&&(messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>å®Œæˆ"),WG.packup_ready=!1,WG.remove_hook(WG.packup_listener),WG.packup_listener=void 0)}),messageAppend("<hio>åŒ…è£¹æ•´ç†</hio>å¼€å§‹"),WG.go("æ‰¬å·åŸ-é’±åº„"),WG.Send("store;pack")}},cmd_echo_button:function(){G.cmd_echo?(G.cmd_echo=!1,messageAppend("<hio>å‘½ä»¤ä»£ç å…³é—­</hio>")):(G.cmd_echo=!0,ProConsole.init(),messageAppend("<hio>å‘½ä»¤ä»£ç æ˜¾ç¤º</hio>"))},getItemNameByid:(t,o)=>{packData.forEach(function(e){0!=e&&e.id==t&&o(e.name)})},addstore:e=>{GM_setValue(roleid+"_zdy_item_store2",zdy_item_store2=""==zdy_item_store2?e:zdy_item_store2+","+e),$("#store_info2").val(zdy_item_store2),zdy_item_store2&&(store_list=zdy_item_store2.split(",")),messageAppend("æ·»åŠ å­˜ä»“æˆåŠŸ"+e)},addlock:e=>{GM_setValue(roleid+"_zdy_item_lock",zdy_item_lock=""==zdy_item_lock?e:zdy_item_lock+","+e),$("#lock_info").val(zdy_item_lock),zdy_item_lock&&(lock_list=zdy_item_lock.split(",")),messageAppend("æ·»åŠ ç‰©å“é”æˆåŠŸ"+e)},dellock:e=>{lock_list.remove(e),zdy_item_lock=lock_list.join(","),GM_setValue(roleid+"_zdy_item_lock",zdy_item_lock),$("#lock_info").val(zdy_item_lock),messageAppend("è§£é”ç‰©å“é”æˆåŠŸ"+e)},addfenjieid:e=>{GM_setValue(roleid+"_zdy_item_fenjie",zdy_item_fenjie=""==zdy_item_fenjie?e:zdy_item_fenjie+","+e),zdy_item_fenjie&&(fenjie_list=zdy_item_fenjie.split(",")),messageAppend("æ·»åŠ åˆ†è§£æˆåŠŸ"+e),$("#store_fenjie_info").val(zdy_item_fenjie)},adddrop:e=>{0<=e.indexOf("hio")||0<=e.indexOf("hir")||0<=e.indexOf("ord")?messageAppend("é«˜çº§ç‰©å“,ä¸æ·»åŠ æ•´ç†æ—¶ä¸¢å¼ƒ"+e):(GM_setValue(roleid+"_zdy_item_drop",zdy_item_drop=""==zdy_item_drop?e:zdy_item_drop+","+e),zdy_item_drop&&(drop_list=zdy_item_drop.split(",")),messageAppend("æ·»åŠ ä¸¢å¼ƒæˆåŠŸ"+e),$("#store_drop_info").val(zdy_item_drop))},addzxbuy:e=>{0<=e.indexOf("hio")||0<=e.indexOf("hir")||0<=e.indexOf("ord")?messageAppend("é«˜çº§ç‰©å“,ä¸æ·»åŠ "+e):(GM_setValue(roleid+"_auto_skillPaperSelllist",auto_skillPaperSelllist=""==auto_skillPaperSelllist?e:auto_skillPaperSelllist+","+e),messageAppend("æ·»åŠ æˆåŠŸ"+e),$("#autoSkillPaperSell").val(auto_skillPaperSelllist))},zdwk:async function(e,t=!0){if(t&&G.level&&G.isGod())WG.go("ä½æˆ¿-ç»ƒåŠŸæˆ¿"),WG.Send("xiulian");else if(CanUse){if("remove"==e)G.wk_listener&&(WG.remove_hook(G.wk_listener),G.wk_listener=void 0);else if(!G.wk_listener){let i,t=!1;G.wk_listener=WG.add_hook(["dialog","text"],async function(o){if("dialog"==o.type&&"pack"==o.dialog){let t;if(o.name){if("<wht>é“é•</wht>"==o.name)return WG.Send("eq "+o.id),await WG.sleep(2e3),WG.go("æ‰¬å·åŸ-çŸ¿å±±"),WG.Send("wa"),void WG.zdwk("remove",!1)}else if(o.items){if(o.eqs[0]&&-1<o.eqs[0].name.indexOf("é“é•"))return await WG.sleep(1e3),WG.go("æ‰¬å·åŸ-çŸ¿å±±"),await WG.sleep(1e3),WG.Send("wa"),void WG.zdwk("remove",!1);for(let e=0;e<o.items.length;e++){var n=o.items[e];if(-1<n.name.indexOf("é“é•")){t=n.id;break}}if(t)return WG.Send("eq "+t),await WG.sleep(2e3),WG.go("æ‰¬å·åŸ-çŸ¿å±±"),WG.Send("wa"),void WG.zdwk("remove",!1);WG.go("æ‰¬å·åŸ-æ‰“é“é“º"),WG.Send("look 1")}}var e;if("text"==o.type&&"ä½ è¦çœ‹ä»€ä¹ˆï¼Ÿ"==o.msg?(e=WG.getIdByName("é“åŒ "))?(i=e,WG.Send("list "+e)):(messageAppend("<hio>è‡ªåŠ¨æŒ–çŸ¿</hio>æœªå‘ç°é“åŒ "),WG.zdwk("remove",!1)):"text"==o.type&&("ä½ æŒ¥ç€é“é•å¼€å§‹è®¤çœŸæŒ–çŸ¿ã€‚"==o.msg?WG.zdwk("remove"):("ä½ ç°åœ¨æ­£å¿™ã€‚"==o.msg||"ä½ æ­£åœ¨æˆ˜æ–—ï¼Œå¾…ä¼šå†è¯´ã€‚"==o.msg||0<=o.msg.indexOf("ä¸è¦æ€¥")||0<=o.msg.indexOf("è¿™ä¸ªæ–¹å‘æ²¡æœ‰å‡ºè·¯"))&&0==t&&(t=!0,messageAppend("å¡é¡¿,äº”ç§’åå†æ¬¡å°è¯•æ“ä½œ",0,1),setTimeout(()=>{t=!1,WG.zdwk("remove",!1),WG.zdwk()},5e3))),"dialog"==o.type&&"list"==o.dialog&&o.seller==i){let t;for(let e=0;e<o.selllist.length;e++){var s=o.selllist[e];if("<wht>é“é•</wht>"==s.name){t=s.id;break}}t?(WG.Send("buy 1 "+t+" from "+i),await WG.sleep(2e3)):(messageAppend("<hio>è‡ªåŠ¨æŒ–çŸ¿</hio>æ— æ³•è´­ä¹°<wht>é“é•</wht>"),WG.zdwk("remove",!1))}}),WG.Send("stopstate;pack")}}else{t=$(".room_items .room-item:first .item-name").text();if(-1==(t=t.indexOf("<æŒ–çŸ¿"))?(messageAppend("å½“å‰ä¸åœ¨æŒ–çŸ¿çŠ¶æ€"),0==timer&&(console.log(timer),WG.go("æ‰¬å·åŸ-çŸ¿å±±"),WG.eq("é“é•"),WG.Send("wa"),timer=setInterval(WG.zdwk,5e3))):WG.timer_close(),WG.at("æ‰¬å·åŸ-çŸ¿å±±")&&-1==t)WG.go("æ‰¬å·åŸ-æ‰“é“é“º"),WG.buy(pgoods["é“é•"]),messageAppend("è‡ªåŠ¨ä¹°é“é•");else if(WG.at("æ‰¬å·åŸ-æ‰“é“é“º")){var o,e=$(".dialog-list > .obj-list:eq(1)");if(e.length){messageAppend("æŸ¥æ‰¾é“é•ID");for(var n of e.children())if(o=(n=$(n)).attr("obj"),"é“é•"==$(n.children()[0]).html()){equip["é“é•"]=o,WG.eq("é“é•");break}GM_setValue(roleid+"_equip",equip),WG.go("æ‰¬å·åŸ-çŸ¿å±±"),WG.Send("wa")}}}},timer_close:function(){timer&&(clearInterval(timer),timer=0)},wudao_hook:void 0,wudao_auto:function(){var e;0==timer&&(timer=setInterval(WG.wudao_auto,1e3)),WG.at("æ­¦é“å¡”")?-1!=(e=$(".room_items .room-item:last")).text().indexOf("å®ˆæŠ¤è€…")?(WG.Send("kill "+e.attr("itemid")),WG.wudao_autopfm()):WG.Send("go up"):CanUse?(WG.wudao_hook||(WG.wudao_hook=WG.add_hook("dialog",e=>{var t;for(t of e.items)if("signin"==t.id){WG.go("æ­¦é“å¡”");var o,n=new RegExp("è¿›åº¦([^%]+)ï¼Œ<"),n=t.desc.match(n)[1];null!=n?(messageAppend("çˆ¬å¡” : "+n),o=n.indexOf("<"),n=n.substring(0,o).split("/"),o=-1!=t.desc.indexOf("æ­¦é“å¡”å¯ä»¥é‡ç½®"),n[0]==n[1]?(messageAppend("çˆ¬å¡”å®Œæˆ! "),o?(WG.ask("å®ˆé—¨äºº",1),messageAppend("çˆ¬å¡”é‡ç½®å®Œæˆ! "),WG.Send("go enter")):(messageAppend("çˆ¬å¡”å·²ç»é‡ç½®è¿‡äº†!"),WG.timer_close())):(messageAppend("çˆ¬å¡”æœªå®Œæˆ!"),WG.Send("go enter"))):messageAppend("è·å–çˆ¬å¡”ä¿¡æ¯å¤±è´¥ : "+t.desc);break}WG.remove_hook(WG.wudao_hook),WG.wudao_hook=void 0})),WG.Send("tasks")):(WG.go("æ­¦é“å¡”"),WG.ask("å®ˆé—¨äºº",1),WG.Send("go enter"))},wudao_autopfm:function(){var e;for(e of wudao_pfm.split(","))"0px"==$("div.combat-panel div.combat-commands span.pfm-item:eq("+e+") span").css("left")&&$("div.combat-panel div.combat-commands span.pfm-item:eq("+e+") ").click()},xue_auto:function(){var e=-1!=(e=$(".room_items .room-item:first .item-name").text()).indexOf("<æ‰“å")||-1!=e.indexOf("<å­¦ä¹ ")||-1!=e.indexOf("<ç»ƒä¹ ");if(0==timer){if(0==e)return void messageAppend("å½“å‰ä¸åœ¨æ‰“åæˆ–å­¦æŠ€èƒ½");timer=setInterval(WG.xue_auto,1e3)}0==e?(WG.timer_close(),WG.zdwk()):messageAppend("è‡ªåŠ¨æ‰“åå­¦æŠ€èƒ½")},fbnum:0,needGrove:0,oncegrove:function(){this.fbnum+=1,messageAppend("ç¬¬"+this.fbnum+"æ¬¡"),WG.Send("cr yz/lw/shangu;cr over"),this.needGrove<=this.fbnum&&(WG.Send("taskover signin"),messageAppend("<hiy>"+this.fbnum+"æ¬¡å‰¯æœ¬å°æ ‘æ—ç§’è¿›ç§’é€€å·²å®Œæˆ</hiy>"),WG.remove_hook(WG.daily_hook),WG.daily_hook=void 0,this.timer_close(),this.needGrove=0,this.fbnum=0)},grove_ask_info:function(){return prompt("è¯·è¾“å…¥éœ€è¦ç§’è¿›ç§’é€€çš„å‰¯æœ¬æ¬¡æ•°","")},grove_auto:function(e=null){0==timer&&(this.needGrove=null==e?this.grove_ask_info():e,this.needGrove)&&("NaN"==parseFloat(this.needGrove).toString()?messageAppend("è¯·è¾“å…¥æ•°å­—"):(messageAppend("å¼€å§‹ç§’è¿›ç§’é€€å°æ ‘æ—"+this.needGrove+"æ¬¡"),timer=setInterval(()=>{this.oncegrove()},1e3)))},showhideborad:function(){"none"==$(".WG_log").css("display")?(window.localStorage.setItem("closeBorad","false"),$(".WG_log").show()):(window.localStorage.setItem("closeBorad","true"),$(".WG_log").hide())},showhidebtn:function(){"none"==$(".WG_button").css("display")?(window.localStorage.setItem("closeBtn","false"),$(".WG_button").show()):(window.localStorage.setItem("closeBtn","true"),$(".WG_button").hide())},calc:function(){messageClear();messageAppend(UI.jsquivue),new Vue({el:".JsqVueUI",data:{status:1},methods:{qnjs_btn:function(){WG.qnjs()},lxjs_btn:function(){WG.lxjs()},khjs_btn:function(){WG.khjs()},zcjs_btn:function(){WG.zcjs()},getskilljson:function(){WG.getPlayerSkill()},autoAddLianxi:function(){var e=prompt("è¯·è¾“å…¥ä¿®ç‚¼åˆ°å¤šå°‘çº§","1");null!=e&&("NaN"==parseFloat(e).toString()?messageAppend("è¯·è¾“å…¥æ•°å­—"):WG.selectLowKongfu(e))},onekeydaily:function(){WG.SendCmd("$daily")},onekeypk:function(){WG.auto_fight()},onekeysansan:function(){unsafeWindow&&unsafeWindow.ToRaid?ToRaid.perform(`//~silent
                        // å¯¼å…¥ä¸‰ä¸‰æ‡’äººåŒ…æµç¨‹ï¼Œæ–¹ä¾¿åç»­å¯¼å…¥æ“ä½œ
                        // è‡ªå‘½ä»¤ç±»å‹é€‰ Raidjsæµç¨‹
                        // å››åŒºç™½ä¸‰ä¸‰
                        ($f_ss)={"name":"ä¸‰ä¸‰æ‡’äººåŒ…","source":"https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script/ä¸‰ä¸‰æ‡’äººåŒ….flow.txt","finder":"æ ¹æ–‡ä»¶å¤¹"}
                        @js var time=Date.parse(new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
                        @await 2000
                        tm ã€ä¸‰ä¸‰æ‡’äººåŒ…ã€‘æµç¨‹å·²å¯¼å…¥ï¼Œå¦‚æœæ›¾ç”¨æ—©æœŸç‰ˆæœ¬çš„æ‡’äººåŒ…å¯¼å…¥è¿‡æµç¨‹ï¼Œè¯·å…ˆåˆ é™¤è¿™äº›æµç¨‹åå†ä½¿ç”¨ã€‚`):messageAppend("è¯·å…ˆå®‰è£…Raid.js")},onelddh:function(){unsafeWindow&&unsafeWindow.ToRaid?ToRaid.perform(`//
                        ($f_ss)={"name":"æ¥ç‚¹åŠ¨ç”»","source":"http://ii74.oss-cn-qingdao.aliyuncs.com/gif.txt","finder":"æ ¹æ–‡ä»¶å¤¹"}
                        @js var time=Date.parse(new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
                        @awiat 2000
                        tm æ¥ç‚¹åŠ¨ç”»å·²å¯¼å…¥`):messageAppend("è¯·å…ˆå®‰è£…Raid.js")},onekeystore:function(){WG.SendCmd("$store")},onekeysell:function(){WG.SendCmd("$drop")},onekeyfenjie:function(){WG.SendCmd("$fenjie")},updatestore:function(){WG.update_store()},cleandps:function(){WG.clean_dps()},sortstore:function(){WG.sort_all()},sortbag:function(){WG.sort_all_bag()},dsrw:function(){WG.dsj()},zdybtnset:function(){WG.zdy_btnset()},cleankksboss:function(){GM_setValue(roleid+"_autoKsBoss",null),GM_setValue(roleid+"_automarry",null),L.msg("æ“ä½œæˆåŠŸ")},onekeydelaytest:function(){WG.wsdelaytest()},yuanshen:function(){window.location.href="https://ys.mihoyo.com/cloud/?utm_source=default#/"},onekeyyaota:function(){T.goyt()}}})},dsj_hook:void 0,dsj_func:function(){WG.dsj_hook&&WG.remove_hook(WG.dsj_hook),messageAppend("å·²æ³¨å…¥å®šæ—¶ä»»åŠ¡",0,1),timequestion=GM_getValue(roleid+"_timequestion",timequestion),WG.dsj_hook=WG.add_hook("time",t=>{if("time"==t.type){let e=0;for(var o of timequestion)(o.h==t.h&&o.m==t.m&&o.s==t.s||""==o.h&&o.m==t.m&&o.s==t.s||""==o.h&&""==o.m&&o.s==t.s)&&(messageAppend("å·²è§¦å‘è®¡åˆ’"+o.name,1,0),WG.SendCmd(o.send),1==o.type)&&(messageAppend("ä¸€æ¬¡æ€§ä»»åŠ¡,å·²ç§»é™¤"+o.name,1,0),timequestion.baoremove(e),GM_setValue(roleid+"_timequestion",timequestion)),e+=1}})},dsj:function(){WG.dsj_func(),messageClear(),messageAppend(UI.timeoutui),$(".startQuest").off("click"),$(".removeQuest").off("click");for(let n of timequestion=GM_getValue(roleid+"_timequestion",timequestion)){var e=`<span class='addrun${n.name}'>ç¼–è¾‘${n.name}</span>
                <span class='stoprun${n.name}'>åˆ é™¤${n.name}</span>
             <br/>
                `;$(".questlist").append(e),$(".addrun"+n.name).on("click",()=>{$("#questname").val(n.name),$("#rtype").val(n.type),$("#ht").val(n.h),$("#mt").val(n.m),$("#st").val(n.s),$("#zml_info").val(n.send)}),$(".stoprun"+n.name).on("click",()=>{var e,t=n.name;let o=0;for(e of timequestion)e.name==t&&timequestion.baoremove(o),o+=1;GM_setValue(roleid+"_timequestion",timequestion),WG.dsj()})}$(".startQuest").on("click",()=>{let e=$("#questname").val();var t,o=$("#rtype").val(),n=$("#ht").val(),s=$("#mt").val(),i=$("#st").val(),a=$("#zml_info").val(),l={name:e=e.replaceAll(" ","_"),type:o,send:a,h:n,m:s,s:i};let r=0;for(t of timequestion){if(e==t.name)return timequestion[r]=l,GM_setValue(roleid+"_timequestion",timequestion),void WG.dsj();r+=1}timequestion.push(l),GM_setValue(roleid+"_timequestion",timequestion),WG.dsj()}),$(".removeQuest").on("click",()=>{var e,t=$("#questname").val();let o=0;for(e of timequestion){if(e.name==t)return void timequestion.baoremove(o);o+=1}GM_setValue(roleid+"_timequestion",timequestion),WG.dsj()})},qnjs:function(){messageClear();messageAppend(UI.qnjsui),new Vue({el:".QianNengCalc",data:{qnsx:{m:0,c:0,color:0}},methods:{qnjscalc:function(){$.each(this.qnsx,(e,t)=>{this.qnsx[e]=Number(t)}),messageAppend("éœ€è¦æ½œèƒ½:"+WG.dian(this.qnsx.c,this.qnsx.m,this.qnsx.color))}}})},lxjs:function(){messageClear();messageAppend(UI.lxjsui),new Vue({el:".StudyTimeCalc",data:{jsqsx:{xtwx:0,htwx:0,lxxl:0,clevel:0,mlevel:0,color:0}},created(){this.jsqsx.xtwx=G.score.int,this.jsqsx.htwx=G.score.int_add,this.jsqsx.lxxl=parseInt(G.score2.lianxi_per.replaceAll("%",""))},methods:{lxjscalc:function(){$.each(this.jsqsx,(e,t)=>{this.jsqsx[e]=Number(t)});var e=WG.lx(this.jsqsx.xtwx,this.jsqsx.htwx,this.jsqsx.lxxl,this.jsqsx.clevel,this.jsqsx.mlevel,this.jsqsx.color);messageAppend("éœ€è¦æ½œèƒ½:"+e.qianneng+"     æ‰€éœ€æ—¶é—´:"+e.time)}}})},khjs:function(){messageClear();messageAppend(UI.khjsui),new Vue({el:".KaihuaCalc",data:{khsx:{nl:0,xg:0,hg:0}},created(){this.khsx.nl=G.score.max_mp,this.khsx.xg=G.score.con,this.khsx.hg=G.score.con_add},methods:{khjscalc:function(){$.each(this.khsx,(e,t)=>{this.khsx[e]=Number(t)}),messageAppend("ä½ çš„åˆ†å€¼:"+WG.gen(this.khsx.nl,this.khsx.xg,this.khsx.hg))}}})},zcjs:function(){messageClear();messageAppend(UI.zcjsui),new Vue({el:".ZiChuangCalc",data:{zcsx:{level:0,percentage:0}},methods:{zcjscalc:function(){messageAppend("è‡ªåˆ›"+this.zcsx.level+"çº§,è¯æ¡ç™¾åˆ†æ¯”:"+this.zcsx.percentage+" éœ€è¦è¯æ¡ç­‰çº§:"+Math.ceil((this.zcsx.percentage-4-.0025*this.zcsx.level)/this.zcsx.level/25e-6))}}})},switchReversal:function(e){return e.hasClass("on")?"å…³":"å¼€"},auto_preform_switch:function(){G.auto_preform?(G.auto_preform=!1,messageAppend("<hio>è‡ªåŠ¨æ–½æ³•</hio>å…³é—­"),WG.auto_preform("stop")):(G.auto_preform=!0,messageAppend("<hio>è‡ªåŠ¨æ–½æ³•</hio>å¼€å¯"),WG.auto_preform())},forcebufskil:"",bufskill:{},xubuf:null,pfmskill:null,is_free:function(){return!(WG.hasStr("faint",G.selfStatus)||WG.hasStr("busy",G.selfStatus)||WG.hasStr("rash",G.selfStatus)||WG.hasStr("bss",G.selfStatus))},is_zero_releasetime:function(){return 0<=G.score2.releasetime.indexOf("0ç§’")},auto_preform:function(e){if("stop"==e)G.selfStatus=[],WG.xubuf=null,WG.pfmskil=null,G.preform_timer&&(clearInterval(G.preform_timer),G.preform_timer=void 0,$(".auto_perform").css("background",""),WG.forcebufskil="",WG.bufskill={});else if(!G.preform_timer&&0!=G.auto_preform){var t;$(".auto_perform").css("background","#3E0000");for(t of(unauto_pfm=GM_getValue(roleid+"_unauto_pfm",unauto_pfm)).split(","))WG.hasStr(t,blackpfm)||blackpfm.push(t);if(WG.hasStr("force.tuoli",blackpfm)||blackpfm.push("force.tuoli"),G.auto_pfm_mode){let s=["force.cui","force.power","force.xi","force.xin","force.chu","force.ztd","force.zhen","force.busi","force.wang"],i={weapon:["sword.wu","blade.shi","sword.yu"],ztd:["force.ztd"],mingyu:["force.wang"],force:["*"],dodge:["dodge.power","dodge.fo","dodge.gui","dodge.lingbo","dodge.zhui"]};WG.xubuf=null,WG.pfmskill=null,G.preform_timer=setInterval(()=>{var n;0==G.in_fight?WG.auto_preform("stop"):(n=[],null==WG.xubuf&&(WG.xubuf=setTimeout(async()=>{for(var e of G.skills)if(!WG.hasStr(e.id,blackpfm)){for(var t in i)for(var o of i[t])if(o==e.id){if(!G.gcd&&!G.cds.get(e.id)&&!WG.hasStr(t,G.selfStatus)){for(WG.Send("perform "+e.id),await WG.sleep(200);!G.cds.get(e.id);){if(0==G.in_fight)return void WG.auto_preform("stop");if(!WG.is_free())break;WG.Send("perform "+e.id),await WG.sleep(200)}WG.hasStr(t,G.selfStatus)&&(console.log("bufæŠ€èƒ½"+e.id),WG.bufskill[t]=e.id)}break}if(WG.hasStr(e.id,s)&&!G.gcd&&!G.cds.get(e.id)&&!WG.hasStr("force",G.selfStatus)){for(WG.Send("perform "+e.id),await WG.sleep(200);!G.cds.get(e.id)&&!WG.hasStr("force",G.selfStatus);){if(0==G.in_fight)return void WG.auto_preform("stop");if(!WG.is_free())break;WG.Send("perform "+e.id),await WG.sleep(200)}WG.hasStr("force",G.selfStatus)&&(console.log("å†…åŠŸbufæŠ€èƒ½"+e.id),WG.forcebufskil=e.id),n.push(e.id)}}WG.xubuf=null},10)),null==WG.pfmskill&&(WG.pfmskill=setTimeout(async()=>{for(var e of G.skills)if(!WG.hasStr(e.id,blackpfm)){if(G.gcd)break;if(!(G.gcd||G.cds.get(e.id)||WG.hasStr(e.id,s)||WG.hasStr(e.id,i))){if(WG.Send("perform "+e.id),WG.is_zero_releasetime())break;if(await WG.sleep(20),!WG.is_free())break}if(""!=WG.forcebufskil&&!G.gcd&&!G.cds.get(e.id)&&WG.hasStr(e.id,s)&&e.id!=WG.forcebufskil&&!WG.hasStr(e.id,i.mingyu)&&!WG.hasStr(e.id,i.ztd)&&(console.log("ä½¿ç”¨æ— bufçš„å†…åŠŸæŠ€èƒ½"+e.id),WG.Send("perform "+e.id),!WG.is_free()))break}WG.pfmskill=null},10)))},300)}else G.preform_timer=setInterval(()=>{0==G.in_fight&&WG.auto_preform("stop");for(var e of G.skills)if(!WG.inArray(e.id,blackpfm)&&!G.gcd&&!G.cds.get(e.id)){WG.Send("perform "+e.id);break}},350)}},formatCurrencyTenThou:function(e){e=e.toString().replace(/\$|\,/g,"");var t=(e=isNaN(e)?"0":e)==(e=Math.abs(e));e=Math.floor(10*e+.50000000001),e=Math.floor(e/10).toString();for(var o=0;o<Math.floor((e.length-(1+o))/3);o++)e=e.substring(0,e.length-(4*o+3))+","+e.substring(e.length-(4*o+3));return(t?"":"-")+e},gen:function(e,t,o){return this.formatCurrencyTenThou(e/100+t*o/10)},dian:function(e,t,o){return this.formatCurrencyTenThou((e+t)*((t-e)/2)*o*5)},lx:function(e,t,o,n,s,i){s=2.5*(s*s-n*n)*i,n=s/(e+t)/(1+o/100-e/100)/12;return{qianneng:s,time:n<60?parseInt(n)+"åˆ†é’Ÿ":`${parseInt(n/60)}å°æ—¶${parseInt(n%60)}åˆ†é’Ÿ`}},findboss:function(t,o,n){for(let e=0;e<t.items.length;e++)0!=t.items[e]&&0<=t.items[e].name.indexOf(o)&&n(t.items[e].id);n(-1)},ksboss:void 0,kksBoss:function(e){var t=e.content.match("å‡ºç°åœ¨([^%]+)ä¸€å¸¦ã€‚")[1],o=e.content.match("å¬è¯´([^%]+)å‡ºç°åœ¨")[1];null!=o&&null!=t&&(blacklist=(blacklist=GM_getValue(roleid+"_blacklist",blacklist))instanceof Array?blacklist:blacklist.split(","),WG.inArray(o.replace("/<(.*?)>/g",""),blacklist)?messageAppend("é»‘åå•boss,å¿½ç•¥!"):(autoKsBoss=GM_getValue(roleid+"_autoKsBoss",autoKsBoss),ks_pfm=GM_getValue(roleid+"_ks_pfm",ks_pfm),ks_wait=GM_getValue(roleid+"_ks_wait",ks_wait),autoeq=GM_getValue(roleid+"_auto_eq",autoeq),console.log("boss"),console.log(t),messageAppend("è‡ªåŠ¨å‰å¾€BOSSåœ°ç‚¹ <div class=\"item-commands\"><span id = 'closeauto'>å…³é—­è‡ªåŠ¨æ‰§è¡Œåå‘½ä»¤</span></div>"),$("#closeauto").off("click"),$("#closeauto").on("click",()=>{0!=timer?(WG.timer_close(),messageAppend("å·²åœæ­¢åå‘½ä»¤")):messageAppend("å·²ç»åœæ­¢")}),WG.Send("stopstate"),WG.go(t),WG.ksboss=WG.add_hook(["items","itemadd","die","room"],function(e){if("items"==e.type){if(!WG.at(t))return;WG.findboss(e,o,function(e){if(-1!=e)next=999,""!=autoeq&&WG.eqhelper(autoeq),setTimeout(()=>{WG.Send("kill "+e),next=0},Number(ks_pfm));else if(999==next)console.log("found");else{let e=needfind[t];null!=needfind[t]&&next<e.length?setTimeout(()=>{console.log(e[next]),WG.Send(e[next]),next++},1e3):console.log("not found")}})}"itemadd"==e.type&&0<=e.name.indexOf(o)&&(next=0,WG.Send("get all from "+e.id),WG.remove_hook(this.index)),"die"==e.type&&(next=0,WG.Send("relive"),WG.remove_hook(this.index)),"room"==e.type&&999==next&&(next=0)}),timer=setTimeout(()=>{console.log("å¤æ´»æŒ–çŸ¿"),WG.Send("relive"),WG.remove_hook(this.ksboss),(auto_command=GM_getValue(roleid+"_auto_command",auto_command))&&null!=auto_command&&""!=auto_command&&"null"!=auto_command?WG.SendCmd(auto_command):WG.zdwk(),next=0,WG.timer_close()},1e3*ks_wait)))},marryhy:void 0,xiyan:async function(){messageAppend("è‡ªåŠ¨å–œå®´ <div class=\"item-commands\"><span id = 'closeauto'>å…³é—­è‡ªåŠ¨æ‰§è¡Œåå‘½ä»¤</span></div>"),$("#closeauto").off("click"),$("#closeauto").on("click",()=>{0!=timer?(WG.timer_close(),messageAppend("å·²åœæ­¢åå‘½ä»¤")):messageAppend("å·²ç»åœæ­¢")}),WG.Send("stopstate"),WG.go("æ‰¬å·åŸ-å–œå®´"),WG.marryhy=WG.add_hook(["items","cmds","text","msg"],function(t){if("items"==t.type){for(let e=0;e<t.items.length;e++)if(0!=t.items[e]&&0<=t.items[e].name.indexOf(">å©šå®´ç¤¼æ¡Œ<")){console.log("æ‹¾å–"),WG.Send("get all from "+t.items[e].id),console.log("xy"+WG.marryhy),WG.remove_hook(WG.marryhy);break}}else if("text"==t.type)"ä½ è¦ç»™è°ä¸œè¥¿ï¼Ÿ"==t.msg&&console.log("æ²¡äºº"),/^åº—å°äºŒæ‹¦ä½ä½ è¯´é“ï¼šæ€ä¹ˆåˆæ˜¯ä½ ï¼Œæ¯æ¬¡éƒ½è·‘è¿™ä¹ˆå¿«ï¼Œç­‰ä¸‹å†è¿›å»ã€‚$/.test(t.msg)&&(console.log("cd"),messageAppend("<hiy>ä½ å¤ªå‹¤å¿«äº†, 1ç§’åå›å»æŒ–çŸ¿</hiy>")),/^åº—å°äºŒæ‹¦ä½ä½ è¯´é“ï¼šè¿™ä½(.+)ï¼Œä¸å¥½æ„æ€ï¼Œå©šå®´å®¾å®¢å·²ç»å¤ªå¤šäº†ã€‚$/.test(t.msg)&&(console.log("å®¢æ»¡"),messageAppend("<hiy>ä½ æ¥å¤ªæ™šäº†, 1ç§’åå›å»æŒ–çŸ¿</hiy>"));else if("cmds"==t.type)for(let e=0;e<t.items.length;e++)if("1é‡‘è´ºç¤¼"==t.items[e].name){WG.SendCmd(t.items[e].cmd+";go up;$wait 2000;go down;go up"),console.log("äº¤é’±");break}}),timer=setTimeout(()=>{console.log("æŒ–çŸ¿"),WG.remove_hook(this.marryhy),auto_command&&null!=auto_command&&""!=auto_command&&"null"!=auto_command?WG.SendCmd(auto_command):WG.zdwk(),next=0,WG.timer_close()},3e4)},saveRoomstate(e){roomData=e.items},haspack:function(e,t){WG.Send("pack");for(var o of packData)if(0<=o.name.indexOf(e))return void t(o.id);t("")},eqx:null,eqxp:null,eqhelper(n,s=0,e=!1){function i(e){var t,o={};for(t in e)o[t]="object"==typeof e[t]?i(e[t]):e[t];return o}if(!(null==n||0==n||n>eqlist.length))if(null==eqlist||null==eqlist[n]||""==eqlist[n])1!=s&&(messageAppend("å¥—è£…æœªä¿å­˜,ä¿å­˜å½“å‰è£…å¤‡ä½œä¸ºå¥—è£…"+n+"!",1),WG.eqx=WG.add_hook("dialog",e=>{"pack"==e.dialog&&null!=e.eqs&&(eqlist[n]=i(e.eqs),GM_setValue(roleid+"_eqlist",eqlist),messageAppend("å¥—è£…"+n+"ä¿å­˜æˆåŠŸ!",1),WG.remove_hook(WG.eqx),WG.eqx=null)}),WG.eqxp=WG.add_hook("dialog",e=>{if("skills"==e.dialog&&null!=e.items){var t,o={throwing:"",unarmed:"",force:"",dodge:"",sword:"",blade:"",club:"",staff:"",whip:"",parry:""};for(t of e.items)null!=o[t.id]&&(null==t.enable_skill?o[t.id]="none":o[t.id]=t.enable_skill);skilllist[n]=o,GM_setValue(roleid+"_skilllist",skilllist),messageAppend("æŠ€èƒ½"+n+"ä¿å­˜æˆåŠŸ!",1),WG.remove_hook(WG.eqxp),WG.eqxp=null}}),WG.Send("cha"),WG.Send("pack"));else if(null==WG.eqx&&null==WG.eqxp||(WG.remove_hook(WG.eqx),WG.remove_hook(WG.eqxp),WG.eqx=null,WG.eqxp=null),eqlist=GM_getValue(roleid+"_eqlist",eqlist),skilllist=GM_getValue(roleid+"_skilllist",skilllist),e){var t="";if(0==s){for(let e=1;e<11;e++)null!=eqlist[n][e]&&""!=eqlist[n][e]&&(t+="eq "+eqlist[n][e].id+";");t+="eq "+eqlist[n][0].id+";"}else for(var o in skilllist[n])null!=skilllist[n][o]&&""!=skilllist[n][o]&&(t+="enable "+o+" "+skilllist[n][o]+";");copyToClipboard(t),messageAppend(n+"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿!",1)}else{var a,l="";let t="";for(a of G.eqs)a&&(t+=a.id);let o="å¥—è£…";if(0===s){for(let e=1;e<11;e++)null!=eqlist[n][e]&&t.indexOf(eqlist[n][e].id)<0&&(l+="$wait 20;eq "+eqlist[n][e].id+";");null!=eqlist[n][0]&&t.indexOf(eqlist[n][0].id)<0&&(l+="$wait 40;eq "+eqlist[n][0].id+";")}if(1===s){for(var r in skilllist[n])for(var d of G.enable_skills)if(d.name!=skilllist[n][r]&&d.type==r){l+=`$wait 40;enable ${r} ${skilllist[n][r]};`;break}o="æŠ€èƒ½",$("span[command=skills]").click()}l+="$wait 40;cha;look3 1",WG.eqx=WG.add_hook("text",function(e){"text"==e.type&&0<=e.msg.indexOf("æ²¡æœ‰è¿™ä¸ªç©å®¶")&&(messageAppend(o+"è£…å¤‡æˆåŠŸ"+n+"!",1),1==s&&$("span[command=skills]").click(),WG.remove_hook(WG.eqx))}),WG.SendCmd(l)}},eqhelperdel:function(e){eqlist=GM_getValue(roleid+"_eqlist",eqlist),skilllist=GM_getValue(roleid+"_skilllist",skilllist),delete eqlist[e],delete skilllist[e],GM_setValue(roleid+"_eqlist",eqlist),GM_setValue(roleid+"_skilllist",skilllist),messageAppend("æ¸…é™¤å¥—è£… æŠ€èƒ½"+e+"è®¾ç½®æˆåŠŸ!",1)},uneqall:function(e="0"){if("0"==e)this.eqx=WG.add_hook("dialog",t=>{if("pack"==t.dialog&&null!=t.eqs){for(let e=0;e<t.eqs.length;e++)null!=t.eqs[e]&&WG.Send("uneq "+t.eqs[e].id);WG.remove_hook(this.eqx)}}),WG.Send("pack"),messageAppend("å–æ¶ˆæ‰€æœ‰è£…å¤‡æˆåŠŸ!",1);else{var t="enable unarmed none;enable blade none;enable force none;enable parry none;enable dodge none;enable sword none;enable throwing none;enable whip none;enable club none;enable staff none".split(";");for(let e=0;e<t.length;e++)WG.sleep(10),WG.Send(t[e]);messageAppend("å–æ¶ˆæ‰€æœ‰æŠ€èƒ½æˆåŠŸ!",1)}},eqloader:function(){var t=GM_getValue(roleid+"_eqlist",null),o={};for(let e in t)o[e]={name:"è£…å¤‡"+e,icon:"fa-compress",callback:function(){WG.eqhelper(e,0)}},o[e+"sk"]={name:"æŠ€èƒ½"+e,icon:"fa-magic",callback:function(){WG.eqhelper(e,1)}},o[e+"del"]={name:"åˆ é™¤ç»„"+e,icon:"fa-remove",callback:function(){WG.eqhelperdel(e)}};o.setting={name:"å¥—è£…ç®¡ç†",icon:"edit",callback:function(){WG.eqhelperui()}};var e=jQuery.Deferred();return setTimeout(function(){e.resolve(o)},20),e.promise()},eqhelperui:function(){messageClear(),messageAppend(UI.skillsPanel),new Vue({el:"#skillsPanelUI",data:{role:role,roleid:roleid,eqlist:{},cpeqlist:{},eqlistdel:{},covereqlist:{},eqskills_id:"none"},created(){},mounted(){this.eqlist=GM_getValue(this.roleid+"_eqlist",{})},methods:{eq:function(e){WG.eqhelper(e,0)},eqs:function(e){WG.eqhelper(e,1)},copyeq:function(e){WG.eqhelper(e,0,!0)},copyeqs:function(e){WG.eqhelper(e,1,!0)},save:function(e){WG.eqhelper(e),setTimeout(()=>{this.eqlist=GM_getValue(this.roleid+"_eqlist",{}),WG.eqhelperui()},300)},covereq:function(e){this.deleq(e),this.save(e)},deleq:function(e){WG.eqhelperdel(e),setTimeout(()=>{WG.eqhelperui()},200)},show:function(){WG.eqhelperui()},saveUI:function(){var o=this;layer.prompt({title:"è¯·è¾“å…¥å¥—è£…å...",formType:2},function(e,t){layer.close(t),null!=e&&o.save(e)})},eqskills_opts_change:function(e){switch(e){case"save":this.saveUI();break;case"copyeq":this.covereqlist={},this.eqlist={},this.eqlistdel={},this.cpeqlist=GM_getValue(this.roleid+"_eqlist",{}),this.role="<< è¿”å›";break;case"delete":this.cpeqlist={},this.eqlist={},this.covereqlist={},this.eqlistdel=GM_getValue(this.roleid+"_eqlist",{}),this.role="<< è¿”å›";break;case"covereq":this.cpeqlist={},this.eqlist={},this.eqlistdel={},this.covereqlist=GM_getValue(this.roleid+"_eqlist",{}),this.role="<< è¿”å›";break;case"uneqall":WG.uneqall()}}}})},fight_listener:void 0,auto_fight:function(){if(WG.fight_listener)messageAppend("<hio>è‡ªåŠ¨æ¯”è¯•</hio>ç»“æŸ"),WG.remove_hook(WG.fight_listener),WG.fight_listener=void 0;else{var e=prompt('è¯·è¾“å…¥NPCåç§°,ä¾‹å¦‚:"é«˜æ ¹æ˜"');let o=WG.find_item(e);null!=o&&(WG.fight_listener=WG.add_hook(["text","sc","combat"],async function(e){var t;"combat"==e.type&&e.end?((t=G.items.get(G.id)).mp/t.max_mp<.8&&WG.SendCmd("dazuo"),WG.SendCmd("liaoshang")):"sc"==e.type&&e.id==o?(t=G.items.get(o)).hp>=t.max_hp&&WG.Send("stopstate;fight "+o):"sc"==e.type&&e.id==G.id?e.max_hp<=e.hp&&WG.Send("stopstate;fight "+o):"text"==e.type&&(0<=e.msg.indexOf("ä½ å…ˆè°ƒæ•´å¥½è‡ªå·±çš„çŠ¶æ€å†æ¥æ‰¾åˆ«äººæ¯”è¯•å§")&&WG.SendCmd("liaoshang"),0<=e.msg.indexOf("ä½ æƒ³è¶äººä¹‹å±å—")&&WG.SendCmd("dazuo"),0<=e.msg.indexOf(">ä½ ç–—ä¼¤å®Œæ¯•ï¼Œæ·±æ·±å¸äº†å£æ°”"))&&WG.Send("stopstate;fight "+o)}),WG.Send("stopstate;fight "+o),messageAppend("<hio>è‡ªåŠ¨æ¯”è¯•</hio>å¼€å§‹"))}},find_item:function(e){for(var[t,o]of G.items)if(o.name==e)return t;return null},recover:function(n,s,i,a){0==n?WG.recover_timer&&(clearTimeout(WG.recover_timer),WG.recover_timer=void 0):(WG.Send("dazuo"),WG.recover_timer=setInterval(function(){var e=G.items.get(G.id);if(e.mp/e.max_mp<s)"æ‰“å"!=e.state&&WG.Send("stopstate;dazuo");else if(e.hp/e.max_hp<n)"ç–—ä¼¤"!=e.state&&WG.Send("stopstate;liaoshang");else{if(e.state&&WG.Send("stopstate"),i)for(var[t,o]of G.cds)if("force.tu"!=t&&o)return;clearInterval(WG.recover_timer),a()}},1e3))},useitem_hook:void 0,auto_useitem:async function(){var t=!0,e=(WG.useitem_hook||(WG.useitem_hook=WG.add_hook("text",function(e){(0<=e.msg.indexOf("ä½ èº«ä¸Šæ²¡æœ‰è¿™ä¸ªä¸œè¥¿")||0<=e.msg.indexOf("å¤ªå¤š")||0<=e.msg.indexOf("ä¸èƒ½ä½¿ç”¨"))&&(t=!1,WG.remove_hook(WG.useitem_hook),WG.useitem_hook=void 0)})),prompt("è¯·è¾“å…¥ç‰©å“id,åœ¨èƒŒåŒ…ä¸­ç‚¹å‡»æŸ¥çœ‹ç‰©å“,å³å¯åœ¨æç¤ºçª—å£çœ‹åˆ°ç‰©å“idè¾“å‡º"));if(e){var o=prompt('è¯·è¾“å…¥ç‰©å“ä½¿ç”¨æ¬¡æ•°,ä¾‹å¦‚:"10"',"10");if(e){if(11!=e.length)return L.msg("idä¸åˆæ³•"),WG.remove_hook(WG.useitem_hook),void(WG.useitem_hook=void 0);for(var n=0;n<o;n++){if(!t)return WG.remove_hook(WG.useitem_hook),void(WG.useitem_hook=void 0);WG.Send("use "+e),await WG.sleep(1e3)}}}WG.remove_hook(WG.useitem_hook),WG.useitem_hook=void 0},auto_Development_medicine:function(){messageClear();messageAppend(UI.lyui),new Vue({el:"#LianYao",data:{level:0,num:1,info:""},created(){this.info=GM_getValue("lastmed",$("#medicint_info").val()),this.level=GM_getValue("lastmedlevel",$("#medicine_level").val())},methods:{startDev:function(){WG.at("ä½æˆ¿-ç‚¼è¯æˆ¿")||WG.at("å¸®ä¼š-ç‚¼è¯æˆ¿")?WG.auto_start_dev_med(this.info.replace(" ",""),this.level,this.num):L.msg("è¯·å…ˆå‰å¾€ç‚¼è¯æˆ¿")},stopDev:function(){WG.Send("stopstate")}}})},findMedItems_hook:void 0,auto_start_dev_med:function(e,_,k){if(GM_setValue("lastmed",e),GM_setValue("lastmedlevel",_),e)if(e.split(",").length<2)L.msg("ç´ æä¸è¶³");else{var t,e=e.split("|"),y=[];for(t of e)t=t.replace(/(^\s*)|(\s*$)/g,""),y.push(t.split(","));WG.findMedItems_hook=WG.add_hook("dialog",function(t){if("pack"==t.dialog&&null!=t.items&&0<=t.items.length){var o,n,s=[],i=[];for(o of y){var a,l=[],r=[];for(a of o)if(0<=JSON.stringify(t.items).indexOf(a))for(var d of t.items)0<=d.name.indexOf(a)&&(l.push(d.id),r.push(a));i.push(r),s.push(l)}let e=0;for(n of s){if(n.length!=y[e].length){for(var u=[],c=[],m=0;m<i[e].length;m++)u[i[e][m]]=typeof i[e][m];for(m=0;m<y[e].length;m++){var p=typeof y[e][m];(!u[y[e][m]]||u[y[e][m]].indexOf(p)<0)&&c.push(y[e][m])}var g,f=[];for(g of new Set(c))f.push(g);return L.msg("ç´ æä¸è¶³,è¯·æ£€æŸ¥èƒŒåŒ…æ˜¯å¦å­˜åœ¨"+f.join(".")),WG.remove_hook(WG.findMedItems_hook),void(WG.findMedItems_hook=null)}e+=1}var h=WG.make_med_cmd(s,_,k);console.log(h),WG.SendStep(h),WG.remove_hook(WG.findMedItems_hook)}}),WG.Send("pack")}else L.msg("ç´ æä¸è¶³")},make_med_cmd:function(e,t,o){let n="";for(var s of e)for(let e=0;e<parseInt(o);e++){var i,a="lianyao2 start "+t+";";for(i of s)n+=a+"lianyao2 add "+i+";";n+="lianyao2 stop;"}return n+"$syso ç‚¼åˆ¶å®Œæˆ;"},zmlfire:async function(zml){zml&&(messageAppend("è¿è¡Œ"+zml.name,2),0==zml.zmlType||""==zml.zmlType||null==zml.zmlType?await WG.SendCmd(zml.zmlRun):1==zml.zmlType?unsafeWindow&&unsafeWindow.ToRaid&&ToRaid.perform(zml.zmlRun):2==zml.zmlType&&eval(zml.zmlRun))},zmlztjk:function(){zml=GM_getValue(roleid+"_zml",zml),!1 instanceof Array&&(zml=[]),messageClear();messageAppend(UI.zmlandztjkui),new Vue({el:"#zmlandztjk",data:{},created(){this.zmldata=zml},methods:{run:function(e){WG.zmlfire(e)},zml:function(){WG.zml_edit()},ztjk:function(){WG.ztjk_edit()},startjk:function(){WG.ztjk_func()},stopjk:function(){WG.ztjk_hook?(WG.remove_hook(WG.ztjk_hook),WG.ztjk_hook=void 0,messageAppend("å·²å–æ¶ˆæ³¨å…¥",2)):messageAppend("æœªæ³¨å…¥",2)}}})},zml_edit:function(){zml=GM_getValue(roleid+"_zml",zml),!1 instanceof Array&&(zml=[]),messageClear();messageAppend(UI.zmlsetting),new Vue({el:"#zmldialog",data:{singnalzml:{name:"",zmlType:"0",zmlRun:""},zmldata:zml},created(){this.zmldata=zml},methods:{add:function(){var e,t={name:this.singnalzml.name,zmlRun:this.singnalzml.zmlRun,zmlShow:0,zmlType:this.singnalzml.zmlType};let o=!0;for(e of this.zmldata)e.name==t.name&&(t.zmlShow=e.zmlShow,e=t,o=!1);o&&this.zmldata.push(t),GM_setValue(roleid+"_zml",this.zmldata),L.msg("ä¿å­˜æˆåŠŸ")},del:function(){this.zmldata.forEach((e,t)=>{e.name==this.singnalzml.name&&(this.zmldata.baoremove(t),GM_setValue(roleid+"_zml",this.zmldata),L.msg("åˆ é™¤æˆåŠŸ"))})},getShare:function(){var e=prompt("è¯·è¾“å…¥åˆ†äº«ç ");S.getShareJson(e,e=>{e=JSON.parse(e.json);null!=e.zmlRun?this.singnalzml=e:L.msg("ä¸åˆæ³•")})},edit:function(e){this.singnalzml=e},showp:function(e){zmlshowsetting=GM_getValue(roleid+"_zmlshowsetting",zmlshowsetting);let t=$(".room-commands");for(var o of(t=1==zmlshowsetting?$(".zdy-commands"):t).children())if(o.textContent==e.name)return o.remove(),e.zmlShow=0,GM_setValue(roleid+"_zml",zml),void messageAppend("åˆ é™¤å¿«é€Ÿä½¿ç”¨"+e.name,1);t.append('<span class="zdy-item act-item-zdy act-item">'+e.name+"</span>"),e.zmlShow=1,GM_setValue(roleid+"_zml",zml),messageAppend("è®¾ç½®å¿«é€Ÿä½¿ç”¨"+e.name,0,1),$(".act-item-zdy").off("click"),$(".act-item-zdy").on("click",function(){T.usezml(0,this.textContent,"")})},share:function(e){S.shareJson(G.id,e)}}})},isseted:!1,zml_showp:function(){$(".zdy-commands").empty(),$(".act-item-zdy").remove(),zmlshowsetting=GM_getValue(roleid+"_zmlshowsetting",zmlshowsetting);for(var t of zml){let e=$(".room-commands");if(1==zmlshowsetting){for(var o of e.children())o.textContent==t.name&&o.remove();if(e=$(".zdy-commands"),!WG.isseted){let e=$(".tool-bar.right-bar").css("bottom");e.replace("px",""),e=parseInt(e),e+=24,$(".tool-bar.right-bar").css("bottom",e+"px"),WG.isseted=!0}}else for(var n of $(".zdy-commands").children())n.textContent==t.name&&n.remove();1==t.zmlShow&&(e.append('<span class="zdy-item act-item-zdy act-item">'+t.name+"</span>"),messageAppend("è®¾ç½®å¿«é€Ÿä½¿ç”¨"+t.name,0,1),$(".act-item-zdy").off("click"),$(".act-item-zdy").on("click",function(){T.usezml(0,this.textContent,"")}))}},ztjk_edit:function(){ztjk_item=GM_getValue(roleid+"_ztjk",ztjk_item),messageClear(),messageAppend(UI.ztjksetting),$(".ztjk_sharedfind").on("click",()=>{var e=prompt("è¯·è¾“å…¥åˆ†äº«ç ");S.getShareJson(e,e=>{e=JSON.parse(e.json);null!=e.type?($("#ztjk_name").val(e.name),$("#ztjk_type").val(e.type),$("#ztjk_action").val(e.action),$("#ztjk_keyword").val(e.keyword),$("#ztjk_ishave").val(e.ishave),$("#ztjk_send").val(e.send),$("#ztjk_senduser").val(e.senduser),$("#ztjk_maxcount").val(e.maxcount),$("#ztjk_istip").val(e.istip)):L.msg("ä¸åˆæ³•")})}),$(".ztjk_editadd").on("click",function(){var o={name:$("#ztjk_name").val(),type:$("#ztjk_type").val(),action:$("#ztjk_action").val(),keyword:$("#ztjk_keyword").val(),ishave:$("#ztjk_ishave").val(),send:$("#ztjk_send").val(),senduser:$("#ztjk_senduser").val(),isactive:1,maxcount:$("#ztjk_maxcount").val(),istip:$("#ztjk_istip").val()};let n=!0;ztjk_item.forEach(function(e,t){e.name==$("#ztjk_name").val()&&(ztjk_item[t]=o,n=!1)}),n&&ztjk_item.push(o),GM_setValue(roleid+"_ztjk",ztjk_item),WG.ztjk_edit(),messageAppend("ä¿å­˜æˆåŠŸ",2),WG.ztjk_func()}),$(".ztjk_editdel").on("click",function(){let o=$("#ztjk_name").val();ztjk_item.forEach(function(e,t){e.name==o&&(ztjk_item.baoremove(t),GM_setValue(roleid+"_ztjk",ztjk_item),WG.ztjk_edit(),messageAppend("åˆ é™¤æˆåŠŸ",2),WG.ztjk_func())})}),ztjk_item.forEach(function(e,t){var o="<span class='addrun"+t+"'>ç¼–è¾‘"+e.name+"</span>",o=($("#ztjk_show").append(o),"æ³¨å…¥"),o="<span class='setaction"+t+"'>"+(o=e.isactive&&1==e.isactive?"æš‚åœ":o)+e.name+"</span>",o=($("#ztjk_set").append(o),"<span class='shareztjk"+t+"'>åˆ†äº«"+e.name+"</span>");$("#ztjk_show").append(o)}),ztjk_item.forEach(function(e,t){$(".addrun"+t).on("click",function(){$("#ztjk_name").val(e.name),$("#ztjk_type").val(e.type),$("#ztjk_action").val(e.action),$("#ztjk_keyword").val(e.keyword),$("#ztjk_ishave").val(e.ishave),$("#ztjk_send").val(e.send),$("#ztjk_senduser").val(e.senduser),$("#ztjk_maxcount").val(e.maxcount),null==e.istip&&$("#ztjk_istip").val(1),$("#ztjk_istip").val(e.istip)}),$(".setaction"+t).on("click",function(){0<=this.textContent.indexOf("æš‚åœ")?ztjk_item[t].isactive=0:ztjk_item[t].isactive=1,GM_setValue(roleid+"_ztjk",ztjk_item),WG.ztjk_func(),WG.ztjk_edit()}),$(".shareztjk"+t).on("click",function(){S.shareJson(G.id,e)})})},ytjk_func:function(){WG.add_hook("room",async function(e){G.yaotaFlag&&"zc/mu/shishenta"!=e.path&&($(".channel pre").append("<hig>ã€æ’ä»¶ã€‘ç¬¬ "+G.yaotaCount+" æ¬¡å¦–å¡”å…±è·å¾— "+G.yaoyuan+" ç‚¹å¦–å…ƒï¼Œç»“æŸæ—¶é—´: "+dateFormat("YYYY-mm-dd HH:MM",new Date)+"ã€‚<br><hig>"),$(".tm").append("<hig>ã€æ’ä»¶ã€‘ç¬¬ "+G.yaotaCount+" æ¬¡å¦–å¡”å…±è·å¾— "+G.yaoyuan+" ç‚¹å¦–å…ƒï¼Œç»“æŸæ—¶é—´: "+dateFormat("YYYY-mm-dd HH:MM",new Date)+"ã€‚<br><hig>"),setTimeout(async function(){for(;!WG.is_free();)await WG.sleep(1e3);261==G.yaoyuan?WG.SendCmd("tm ç¬¬ "+G.yaotaCount+" æ¬¡å¦–å¡”åœ†æ»¡å®Œæˆï¼Œæ’’èŠ±~~~~~"):WG.SendCmd("tm ç¬¬ "+G.yaotaCount+" æ¬¡å¦–å¡”é—æ†¾æ”¶åœºï¼Œæ’’èŠ±~~~~~"),$("#yt_prog").remove(),G.yaotaFlag=!1,G.yaoyuan=0},0)),"zc/mu/shishenta"==e.path&&($(".state-bar").before("<div id=yt_prog>å¼€å§‹æ”»ç•¥å¦–å¡”</div>"),G.yaotaCount=G.yaotaCount+1,$(".channel pre").append("<hig>ã€æ’ä»¶ã€‘å¼€å§‹ç¬¬ "+G.yaotaCount+" æ¬¡æ”»ç•¥å¦–å¡”ï¼Œç°åœ¨æ—¶é—´æ˜¯:"+dateFormat("YYYY-mm-dd HH:MM",new Date)+"ã€‚<br><hig>"),$(".tm").append("<hig>ã€æ’ä»¶ã€‘å¼€å§‹ç¬¬ "+G.yaotaCount+" æ¬¡æ”»ç•¥å¦–å¡”ï¼Œç°åœ¨æ—¶é—´æ˜¯:"+dateFormat("YYYY-mm-dd HH:MM",new Date)+"ã€‚<br><hig>"),G.yaoyuan=0,G.yaotaFlag=!0)})},ztjk_hook:void 0,ztjk_func:function(){WG.ztjk_hook&&WG.remove_hook(WG.ztjk_hook),WG.ztjk_hook=void 0,ztjk_item=GM_getValue(roleid+"_ztjk",ztjk_item),WG.ztjk_hook=WG.add_hook(["dispfm","enapfm","dialog","room","itemadd","itemremove","status","text","msg","die","combat","sc"],function(v){ztjk_item.forEach(function(t,e){if(1==t.isactive&&v.type==t.type){var o,n,s,i,a,l,r,d,u,c,m,p,g,f,h,_=t.keyword.split("|");switch(t.type){case"status":if(v.name){if(t.action==v.action)for(var k of _)(0<=v.sid.indexOf(k)||0<=v.name.indexOf(k))&&("0"==t.ishave&&v.id!=G.id?("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.id?(o=t.send.replace("{id}",v.id),WG.SendCmd(o)):WG.SendCmd(t.send)):"1"==t.ishave&&v.id==G.id&&(null!=v.count&&t.maxcount?parseInt(v.count)<parseInt(t.maxcount)&&(messageAppend("å½“å‰å±‚æ•°"+v.count+",å·²è§¦å‘"+t.name,1),v.id?(o=t.send.replace("{id}",v.id),WG.SendCmd(o)):WG.SendCmd(t.send)):("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.id?(n=t.send.replace("{id}",v.id),WG.SendCmd(n)):WG.SendCmd(t.send))))}else if(t.action==v.action)for(var k of _)0<=v.sid.indexOf(k)&&("0"==t.ishave&&v.id!=G.id?("1"==t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.id?(s=t.send.replace("{id}",v.id),WG.SendCmd(s)):WG.SendCmd(t.send)):"1"==t.ishave&&v.id==G.id&&(null!=v.count&&t.maxcount?parseInt(v.count)<parseInt(t.maxcount)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.id?(s=t.send.replace("{id}",v.id),WG.SendCmd(s)):WG.SendCmd(t.send)):("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.id?(i=t.send.replace("{id}",v.id),WG.SendCmd(i)):WG.SendCmd(t.send))));break;case"text":for(var k of _)0<=v.msg.indexOf(k)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.msg?(a=t.send.replace("{content}",v.msg.replaceAll("\n","").replaceAll(",","").replaceAll(";","")),WG.SendCmd(a)):WG.SendCmd(t.send));break;case"msg":if(t.senduser&&""!=t.senduser&&null!=t.senduser){for(l of t.senduser.split("|"))if(v.name==l)for(var k of _)0<=v.content.indexOf(k)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.content?(r=t.send.replace("{content}",v.content),WG.SendCmd(r)):WG.SendCmd(t.send));else if("è°£è¨€"==l&&"rumor"==v.ch||"ç³»ç»Ÿ"==l&&"sys"==v.ch||"é—¨æ´¾"==l&&"fam"==v.ch||"å¸®æ´¾"==l&&"pty"==v.ch)for(var k of _)0<=v.content.indexOf(k)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.content?(d=t.send.replace("{content}",v.content),WG.SendCmd(d)):WG.SendCmd(t.send))}else for(var k of _)0<=v.content.indexOf(k)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.content?(u=t.send.replace("{content}",v.content.replaceAll("\n","").replaceAll(",","").replaceAll(";","")),WG.SendCmd(u)):WG.SendCmd(t.send));break;case"die":null!=v.commands&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),WG.SendCmd(t.send));break;case"itemadd":for(var k of _)if(0<=v.name.indexOf(k)){if(2==t.ishave&&null!=v.p)break;"0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),v.id?(c=t.send.replace("{id}",v.id),WG.SendCmd(c)):WG.SendCmd(t.send)}break;case"room":for(var k of _){if(0<=v.name.indexOf(k))return"0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),m=t.send.replace("{name}",v.name),void WG.SendCmd(m);for(p of roomData){if(0==p)return;if(0<=p.name.indexOf(k)&&null==p.p)return"0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),g=t.send.replace("{name}",v.name),void WG.SendCmd(g)}}break;case"dialog":if(v.dialog&&"pack"==v.dialog)for(var k of _)v.name&&0<=v.name.indexOf(k)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),f=t.send.replace("{id}",v.id),WG.SendCmd(f));break;case"combat":for(var k of _)("start"==k&&1==v.start||"end"==k&&1==v.end)&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),WG.SendCmd(t.send));break;case"sc":let e=G.items.get(G.id);"0"==t.ishave&&(h=WG.find_item(t.senduser),e=G.items.get(h)),e&&e.hp&&e.hp/e.max_hp*100<parseInt(_[0])&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),WG.SendCmd(t.send)),e&&e.mp&&e.mp/e.max_mp*100<parseInt(_[1])&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),WG.SendCmd(t.send));break;case"enapfm":for(var y of _)y==v.id&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),WG.SendCmd(t.send));break;case"dispfm":for(var w of _)w==v.id&&("0"!=t.istip&&messageAppend("å·²è§¦å‘"+t.name,1),WG.SendCmd(t.send))}}})}),messageAppend("å·²é‡æ–°æ³¨å…¥è‡ªåŠ¨ç›‘æ§",0,1)},daily_hook:void 0,oneKeyDaily:async function(){messageAppend("æœ¬è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œå¸ˆé—¨åŠè‡ªåŠ¨è¿›é€€å°æ ‘æ—,è¯·ç¡®ä¿ç²¾åŠ›è¶³å¤Ÿå†æ‰§è¡Œ,è¯·ä¸è¦ç‚¹å‡»ä»»åŠ¡èœå•",1);var i=0;for(WG.daily_hook=WG.add_hook("dialog",async function(o){if("tasks"==o.dialog&&o.items){let t="",e="";for(var n of o.items)"signin"==n.id&&(t=n.desc,e=n.state);if(3==e)messageAppend("æ—¥å¸¸å·²å®Œæˆ",1),setTimeout(()=>{WG.remove_hook(WG.daily_hook),WG.daily_hook=void 0},1);else{let e=t;var o=(e=e.replace(/<(?!\/?p\b)[^>]+>/gi,"")).split("ç²¾åŠ›æ¶ˆè€—"),s=o[0].match("ï¼š([^%]+)/20")[1],o=o[1].match("ï¼š([^%]+)/200")[1];messageAppend("è¿˜éœ€è¦"+(s=20-parseInt(s))+"æ¬¡å¸ˆé—¨ä»»åŠ¡,"+(i=20-parseInt(o)/10)+"æ¬¡å‰¯æœ¬,æ‰å¯ç­¾åˆ°"),0!=s?($(".sm_button").text("åœæ­¢(Q)"),WG.sm_state=0,setTimeout(WG.smTask,200)):WG.sm_state=-1}}}),WG.SendCmd("tasks"),await WG.sleep(2e3);0<=WG.sm_state;)await WG.sleep(2e3);i<=0?(WG.Send("taskover signin"),messageAppend("<hiy>ä»»åŠ¡å®Œæˆ</hiy>"),WG.remove_hook(WG.daily_hook),WG.daily_hook=void 0,this.timer_close(),this.needGrove=0,this.fbnum=0):WG.grove_auto(i)},oneKeyQA:async function(){WG.Send("stopstate"),WG.sm_state=-1;var e=sm_array[family].sxplace,t=sm_array[family].sx;0==e.indexOf("-")?WG.Send(e.replace("-","")):WG.go(e),await WG.sleep(2e3),WG.SendCmd('select $findPlayerByName("'+t+'");$wait 200;ask2 $findPlayerByName("'+t+'")'),await WG.sleep(1e3)},sd_hook:void 0,oneKeySD:function(){var s=0;messageAppend("æœ¬è„šæœ¬è‡ªåŠ¨æ‰§è¡Œè´­ä¹°æ‰«è¡ç¬¦,è¿›è¡Œè¿½æ•æ‰«è¡,è¯·ç¡®ä¿å…ƒå®è¶³å¤Ÿï¼Œè¯·ä¸è¦ç‚¹å‡»ä»»åŠ¡èœå•\næ³¨æ„! è¶…è¿‡ä¸Šé™ä¼šè‡ªåŠ¨æ”¾å¼ƒ",1),WG.sd_hook=WG.add_hook(["dialog","text"],async function(o){var e=0,t=2;if("text"==o.type&&o.msg){if(e=WG.getIdByName("ç¨‹è¯å‘"),0<=o.msg.indexOf("æ— æ³•å¿«é€Ÿå®Œ"))for(WG.Send("select "+e),await WG.sleep(200),WG.Send("ask1 "+e),await WG.sleep(200),WG.Send("ask2 "+e),await WG.sleep(200);t;)t--,console.log("ask3 "+e),WG.Send("ask3 "+e),await WG.sleep(1e3);if(0<=o.msg.indexOf("è¿½æ•ä»»åŠ¡å®Œæˆäº†")){let e=o.msg;e=e.replace(/<(?!\/?p\b)[^>]+>/gi,""),"20"==(s=e.match("ç›®å‰å®Œæˆ([^%]+)/20")[1])&&(messageAppend("è¿½æ•å·²å®Œæˆ",1),await WG.sleep(2e3),WG.remove_hook(WG.sd_hook),WG.sd_hook=void 0)}if((0<=o.msg.indexOf("å¤šå†ç»ƒä¸€ç•ª")||0<=o.msg.indexOf("æ²¡æœ‰é‚£ä¹ˆå¤šå…ƒå®"))&&(messageAppend("ç­‰çº§å¤ªä½æ— æ³•æ¥å–è¿½æ•,è‡ªåŠ¨å–æ¶ˆ",1),WG.remove_hook(WG.sd_hook),WG.sd_hook=void 0),0<=o.msg.indexOf("ä½ çš„è¿½æ•ä»»åŠ¡å·²ç»å®Œæˆäº†")&&(messageAppend("è¿½æ•å·²å®Œæˆ",1),WG.remove_hook(WG.sd_hook),WG.sd_hook=void 0),0<=o.msg.indexOf("ä½ çš„æ‰«è¡ç¬¦ä¸å¤Ÿã€‚"))for(e=WG.getIdByName("ç¨‹è¯å‘"),messageAppend("è¿˜éœ€è¦"+s+"æ¬¡æ‰«è¡,è‡ªåŠ¨è´­å…¥"+s+"å¼ æ‰«è¡ç¬¦"),WG.Send("shop 0 "+s),await WG.sleep(1e3);t;)t--,console.log("ask3 "+e),WG.Send("ask3 "+e),await WG.sleep(1e3)}if("tasks"==o.dialog&&o.items){let e="";for(var n of o.items)"yamen"==n.id&&(e=n.desc);let t=e;if(t=t.replace(/<(?!\/?p\b)[^>]+>/gi,""),s=t.match("å®Œæˆ([^%]+)/20")[1],0==(s=20-parseInt(s)))messageAppend("è¿½æ•å·²å®Œæˆ",1),WG.remove_hook(WG.sd_hook),WG.sd_hook=void 0;else{for(;WG.go("æ‰¬å·åŸ-è¡™é—¨æ­£å…"),await WG.sleep(1e3),!WG.getIdByName("ç¨‹è¯å‘"););WG.SendCmd('ask3 $pname("ç¨‹è¯å‘")')}}}),WG.Send("stopstate"),WG.SendCmd("tasks")},gpSkill_hook:void 0,getPlayerSkill:async function(){WG.gpSkill_hook=WG.add_hook("dialog",t=>{t.dialog&&"skills"==t.dialog&&t.items&&null!=t.items&&(messageAppend(`<div class="item-commands ">
                <span class = "copycha" data-clipboard-target = ".target1" >
                        æŠ€èƒ½è¯¦æƒ…å¤åˆ¶åˆ°å‰ªè´´æ¿ </span></div> `),$(".copycha").on("click",()=>{var e=G.level.replace(/<\/?.+?>/g,"").replace(/ /g,""),e={player:role,roleid:roleid,level:e,family:G.pfamily,items:t.items};copyToClipboard(JSON.stringify(e)),messageAppend("å¤åˆ¶æˆåŠŸ")}),WG.remove_hook(WG.gpSkill_hook),WG.gpSkill_hook=void 0)}),KEY.do_command("skills"),KEY.do_command("skills"),WG.Send("cha")},make_config:async function(){let t={};GM_listValues().forEach(e=>{0<=e.indexOf(roleid)&&(t[e]=GM_getValue(e))}),t._shieldswitch=GM_getValue("_shieldswitch",shieldswitch),t._shield=GM_getValue("_shield",shield),t._shieldkey=GM_getValue("_shieldkey",shieldkey),t._pushSwitch=GM_getValue("_pushSwitch",pushSwitch),t._pushType=GM_getValue("_pushType",pushType),t._pushToken=GM_getValue("_pushToken",pushToken),S.uploadUserConfig(G.id,t,e=>{"true"==e&&L.msg("å·²æˆåŠŸä¸Šä¼ ")})},load_config:async function(){S.getUserConfig(G.id,e=>{if(""!=e){var t,o=JSON.parse(e);for(t in o)GM_setValue(t,o[t]);GI.configInit(),WG.setting(),WG.ztjk_func(),WG.zml_showp(),WG.dsj_func(),L.msg("å·²æˆåŠŸåŠ è½½")}})},setting:function(){var a,keyitem=(KEY.do_command("setting"),$(".footer-item")[$(".footer-item").length-1].click(),0==$(".dialog-custom .zdy_dialog").length&&(a=UI.syssetting(),$(".dialog-custom").prepend(a)),$(".dialog-custom").off("click"),$("#family").off("change"),$("#wudao_pfm").off("focusout"),$(".savebtn").off("click"),$(".clear_skillJson").off("click"),$(".backup_btn").off("click"),$(".clean_dps").off("click"),$(".load_btn").off("click"),$(".update_store").off("click"),$(".update_id_all").off("click"),$(".clean_id_all").off("click"),$("#autobuy").off("change"),$("#autoSkillPaperSell").off("change"),$("#loginhml").off("change"),$("#backimageurl").off("change"),$("#statehml").off("change"),$("#shieldkey").off("focusout"),$("#shield").off("focusout"),$("#funnycalc").off("click"),$("#dpssakada").off("click"),$("#silence").off("click"),$("#zdyskilllist").off("change"),$("#zdyskillsswitch").off("click"),$("#shieldswitch").off("click"),$("#welcome").off("focusout"),$("#die_str").off("focusout"),$("#blacklist").off("change"),$("#auto_command").off("change"),$("#store_fenjie_info").off("change"),$("#store_drop_info").off("change"),$("#lock_info").off("change"),$("#store_info2").off("change"),$("#store_info").off("change"),$("#unauto_pfm").off("change"),$("#getitemShow").off("click"),$("#zmlshowsetting").off("change"),$("#bagFull").off("change"),$("pushSwitch").off("click"),$("pushType").off("change"),$("pushToken").off("change"),$("#autorelogin").off("click"),$("#autoupdateStore").off("click"),$("#saveAddr").off("click"),$("#autorewardgoto").off("click"),$("#autopfmswitch").off("click"),$("#auto_eq").off("change"),$("#ks_Boss").off("click"),$("#marry_kiss").off("click"),$("#ks_wait").off("focusout"),$("#ks_pfm").off("focusout"),$("#sm_getstore").off("click"),$("#sm_price").off("click"),$("#sm_any").off("click"),$("#sm_loser").off("click"),$(".dialog-custom").on("click",".switch2",UI.switchClick),$("#family").change(function(){family=$("#family").val(),GM_setValue(roleid+"_family",family)}),$("#wudao_pfm").focusout(function(){wudao_pfm=$("#wudao_pfm").val(),GM_setValue(roleid+"_wudao_pfm",wudao_pfm)}),$("#sm_loser").click(function(){sm_loser=WG.switchReversal($(this)),GM_setValue(roleid+"_sm_loser",sm_loser)}),$("#sm_any").click(function(){sm_any=WG.switchReversal($(this)),GM_setValue(roleid+"_sm_any",sm_any)}),$("#sm_price").click(function(){sm_price=WG.switchReversal($(this)),GM_setValue(roleid+"_sm_price",sm_price)}),$("#sm_getstore").click(function(){sm_getstore=WG.switchReversal($(this)),GM_setValue(roleid+"_sm_getstore",sm_getstore)}),$("#ks_pfm").focusout(function(){ks_pfm=$("#ks_pfm").val(),GM_setValue(roleid+"_ks_pfm",ks_pfm)}),$("#ks_wait").focusout(function(){ks_wait=$("#ks_wait").val(),GM_setValue(roleid+"_ks_wait",ks_wait)}),$("#marry_kiss").click(function(){automarry=WG.switchReversal($(this)),GM_setValue(roleid+"_automarry",automarry)}),$("#ks_Boss").click(function(){autoKsBoss=WG.switchReversal($(this)),GM_setValue(roleid+"_autoKsBoss",autoKsBoss)}),$("#auto_eq").focusout(function(){autoeq=$("#auto_eq").val(),GM_setValue(roleid+"_auto_eq",autoeq)}),$("#autopfmswitch").click(function(){auto_pfmswitch=WG.switchReversal($(this)),GM_setValue(roleid+"_auto_pfmswitch",auto_pfmswitch),G.auto_preform="å¼€"==auto_pfmswitch}),$("#autopfmmode").click(function(){auto_pfm_mode=WG.switchReversal($(this)),GM_setValue(roleid+"_auto_pfm_mode",auto_pfm_mode),G.auto_pfm_mode="å¼€"==auto_pfm_mode}),$("#autorewardgoto").click(function(){auto_rewardgoto=WG.switchReversal($(this)),GM_setValue(roleid+"_auto_rewardgoto",auto_rewardgoto)}),$("#busyinfo").click(function(){busy_info=WG.switchReversal($(this)),GM_setValue(roleid+"_busy_info",busy_info)}),$("#saveAddr").click(function(){saveAddr=WG.switchReversal($(this)),GM_setValue(roleid+"_saveAddr",saveAddr)}),$("#autoupdateStore").click(function(){auto_updateStore=WG.switchReversal($(this)),GM_setValue(roleid+"_auto_updateStore",auto_updateStore)}),$("#autorelogin").click(function(){auto_relogin=WG.switchReversal($(this)),GM_setValue(roleid+"_auto_relogin",auto_relogin)}),$("#zmlshowsetting").change(function(){zmlshowsetting=$("#zmlshowsetting").val(),GM_setValue(roleid+"_zmlshowsetting",zmlshowsetting),WG.zml_showp()}),$("#bagFull").change(function(){bagFull=$("#bagFull").val(),GM_setValue(roleid+"_bagFull",bagFull)}),$("#pushSwitch").click(function(){GM_setValue("_pushSwitch",pushSwitch=WG.switchReversal($(this)))}),$("#pushType").change(function(){GM_setValue("_pushType",pushType=$("#pushType").val())}),$("#pushToken").focusout(function(){GM_setValue("_pushToken",pushToken=$("#pushToken").val())}),$("#color_select").change(function(){GM_setValue("color_select",color_select=$("#color_select").val())}),$("#getitemShow").click(function(){getitemShow=WG.switchReversal($(this)),GM_setValue(roleid+"_getitemShow",getitemShow),G.getitemShow="å¼€"==getitemShow}),$("#unauto_pfm").change(function(){unauto_pfm=$("#unauto_pfm").val(),GM_setValue(roleid+"_unauto_pfm",unauto_pfm);var e,t=unauto_pfm.split(",");blackpfm=[];for(e of t)e&&blackpfm.push(e)}),$("#store_info").change(function(){zdy_item_store=$("#store_info").val(),GM_setValue(roleid+"_zdy_item_store",zdy_item_store),store_list=(store_list=zdy_item_store.split(",")).concat(zdy_item_store2.split(","))}),$("#store_info2").change(function(){zdy_item_store2=$("#store_info2").val(),GM_setValue(roleid+"_zdy_item_store2",zdy_item_store2),store_list=(store_list=zdy_item_store2.split(",")).concat(zdy_item_store.split(","))}),$("#lock_info").change(function(){zdy_item_lock=$("#lock_info").val(),GM_setValue(roleid+"_zdy_item_lock",zdy_item_lock),lock_list=zdy_item_lock.split(",")}),$("#store_drop_info").change(function(){zdy_item_drop=$("#store_drop_info").val(),GM_setValue(roleid+"_zdy_item_drop",zdy_item_drop),drop_list=zdy_item_drop.split(",")}),$("#store_fenjie_info").change(function(){zdy_item_fenjie=$("#store_fenjie_info").val(),GM_setValue(roleid+"_zdy_item_fenjie",zdy_item_fenjie),fenjie_list=zdy_item_fenjie.split(",")}),$("#auto_command").change(function(){auto_command=$("#auto_command").val(),GM_setValue(roleid+"_auto_command",auto_command)}),$("#blacklist").change(function(){blacklist=$("#blacklist").val(),GM_setValue(roleid+"_blacklist",blacklist)}),$("#welcome").focusout(function(){welcome=$("#welcome").val(),GM_setValue(roleid+"_welcome",welcome)}),$("#die_str").focusout(function(){die_str=$("#die_str").val(),GM_setValue(roleid+"_die_str",die_str)}),$("#shieldswitch").click(function(){GM_setValue("_shieldswitch",shieldswitch=WG.switchReversal($(this))),"å¼€"==shieldswitch&&messageAppend("å·²æ³¨å…¥å±è”½ç³»ç»Ÿ",0,1)}),$("#zdyskillsswitch").click(function(){zdyskills=WG.switchReversal($(this)),GM_setValue(roleid+"_zdyskills",zdyskills),"å¼€"==zdyskills&&messageAppend("å·²å¼€å¯è‡ªå®šä¹‰æŠ€èƒ½é¡ºåºï¼Œå¡«å†™é¡ºåºåï¼Œè¯·åˆ·æ–°æ¸¸æˆç”Ÿæ•ˆ",0,1)}),$("#zdyskilllist").change(function(){JSON.parse($("#zdyskilllist").val());if(!1 instanceof Array)return alert("æ— æ•ˆçš„è¾“å…¥"),!1;zdyskilllist=$("#zdyskilllist").val(),GM_setValue(roleid+"_zdyskilllist",zdyskilllist)}),$("#silence").click(function(){silence=WG.switchReversal($(this)),GM_setValue(roleid+"_silence",silence),"å¼€"==silence&&messageAppend("å·²å¼€å¯å®‰é™æ¨¡å¼",0,1)}),$("#dpssakada").click(function(){dpssakada=WG.switchReversal($(this)),GM_setValue(roleid+"_dpssakada",dpssakada),"å¼€"==dpssakada&&messageAppend("å·²å¼€å¯æˆ˜æ–—ç»Ÿè®¡",0,1)}),$("#funnycalc").click(function(){funnycalc=WG.switchReversal($(this)),GM_setValue(roleid+"_funnycalc",funnycalc),"å¼€"==funnycalc&&messageAppend("å·²å¼€å¯FUNNYè®¡ç®—",0,1)}),$("#shield").focusout(function(){GM_setValue("_shield",shield=$("#shield").val())}),$("#shieldkey").focusout(function(){GM_setValue("_shieldkey",shieldkey=$("#shieldkey").val())}),$("#statehml").change(function(){statehml=$("#statehml").val(),GM_setValue(roleid+"_statehml",statehml)}),$("#backimageurl").change(function(){backimageurl=$("#backimageurl").val(),GM_setValue(roleid+"_backimageurl",backimageurl),""!=backimageurl&&(WG.SendCmd("setting backcolor none"),GM_addStyle(`body{
              background-color:rgb(0,0,0,.25)
                }
                div{
                    opacity:1;
                }
                html{
                background:rgba(255,255,255,0.25);
                background-image:url('${backimageurl}');
                background-repeat:no-repeat;
                background-size:100% 100%;
                -moz-background-size:100% 100%;
            }
            `))}),$("#loginhml").change(function(){loginhml=$("#loginhml").val(),GM_setValue(roleid+"_loginhml",loginhml)}),$("#autobuy").change(function(){auto_buylist=$("#autobuy").val(),GM_setValue(roleid+"_auto_buylist",auto_buylist)}),$("#autoSkillPaperSell").change(function(){auto_skillPaperSelllist=$("#autoSkillPaperSell").val(),GM_setValue(roleid+"_auto_skillPaperSelllist",auto_skillPaperSelllist)}),$(".update_id_all").on("click",WG.update_id_all),$(".clean_id_all").on("click",WG.clean_id_all),$(".update_store").on("click",WG.update_store),$(".backup_btn").on("click",WG.make_config),$(".load_btn").on("click",WG.load_config),$(".clean_dps").on("click",WG.clean_dps),$(".clear_skillJson").on("click",()=>{messageAppend("å·²å…³é—­è‡ªå®šä¹‰ï¼Œè¯·åˆ·æ–°é‡æ–°è·å–æŠ€èƒ½æ•°æ®!"),zdyskills="å…³",GM_setValue(roleid+"_zdyskilllist",""),GM_setValue(roleid+"_zdyskills",zdyskills)}),$(".savebtn").on("click",function(){var e,t=[];for(e of keyitem){var o={name:"æ— ",send:""},n=$("#name"+e).val(),s=$("#send"+e).val();""!=n&&(o.name=n,o.send=s),t.push(o)}GM_setValue(roleid+"_zdy_btnlist",zdy_btnlist=t),messageAppend("ä¿å­˜è‡ªå®šä¹‰æŒ‰é’®æˆåŠŸ"),WG.zdy_btnListInit()}),$("#family").val(family),$("#wudao_pfm").val(wudao_pfm),$("#sm_loser").val(sm_loser),$("#sm_any").val(sm_any),$("#sm_price").val(sm_price),$("#sm_getstore").val(sm_getstore),$("#ks_pfm").val(ks_pfm),$("#ks_wait").val(ks_wait),$("#marry_kiss").val(automarry),$("#ks_Boss").val(autoKsBoss),$("#auto_eq").val(autoeq),$("#autopfmswitch").val(auto_pfmswitch),$("#autopfmmode").val(auto_pfm_mode),$("#autorewardgoto").val(auto_rewardgoto),$("#busyinfo").val(busy_info),$("#saveAddr").val(saveAddr),$("#autoupdateStore").val(auto_updateStore),$("#autorelogin").val(auto_relogin),$("#zmlshowsetting").val(zmlshowsetting),$("#bagFull").val(bagFull),$("#pushSwitch").val(pushSwitch),$("#pushType").val(pushType),$("#pushToken").val(pushToken),$("#color_select").val(color_select),$("#getitemShow").val(getitemShow),$("#unauto_pfm").val(unauto_pfm),$("#store_info").val(zdy_item_store),$("#store_info2").val(zdy_item_store2),$("#lock_info").val(zdy_item_lock),$("#store_drop_info").val(zdy_item_drop),$("#store_fenjie_info").val(zdy_item_fenjie),$("#auto_command").val(auto_command),$("#blacklist").val(blacklist),$("#welcome").val(welcome),$("#die_str").val(die_str),$("#shieldswitch").val(shieldswitch),$("#silence").val(silence),$("#dpssakada").val(dpssakada),$("#funnycalc").val(funnycalc),$("#shield").val(shield),$("#shieldkey").val(shieldkey),$("#statehml").val(statehml),$("#backimageurl").val(backimageurl),$("#loginhml").val(loginhml),$("#autobuy").val(auto_buylist),$("#autoSkillPaperSell").val(auto_skillPaperSelllist),$("#zdyskillsswitch").val(zdyskills),$("#zdyskilllist").val(zdyskilllist),["Q","W","E","R","T","Y"]),item;let zdybtni=0;for(item of keyitem)$("#name"+item).val(zdy_btnlist[zdybtni].name),$("#send"+item).val(zdy_btnlist[zdybtni].send),zdybtni+=1;for(let w=$(".setting>.setting-item2"),t=0;t<w.length;t++){var s=$(w[t]),i=s.attr("for"),n;i&&(n=eval(i),"å¼€"==n)&&(s.find(".switch2").addClass("on"),s.find(".switch-text").html("å¼€"))}},zdybtnfunc:function(e){WG.SendCmd(zdy_btnlist[e].send)},zdy_btnset:function(){zdy_btnlist=GM_getValue(roleid+"_zdy_btnlist",zdy_btnlist),messageClear();messageAppend(UI.zdyBtnsetui());var e,i=["Q","W","E","R","T","Y"];let t=0;for(e of i)$("#name"+e).val(zdy_btnlist[t].name),$("#send"+e).val(zdy_btnlist[t].send),t+=1;$(".savebtn").off("click"),$(".savebtn").on("click",function(){var e,t=[];for(e of i){var o={name:"æ— ",send:""},n=$("#name"+e).val(),s=$("#send"+e).val();""!=n&&(o.name=n,o.send=s),t.push(o)}GM_setValue(roleid+"_zdy_btnlist",zdy_btnlist=t),messageAppend("ä¿å­˜æˆåŠŸ"),WG.zdy_btnListInit()})},zdy_btnListInit:function(){if(zdy_btnlist=GM_getValue(roleid+"_zdy_btnlist",zdy_btnlist),inzdy_btn=GM_getValue(roleid+"_inzdy_btn",inzdy_btn),0==zdy_btnlist.length){for(var e=0;e<6;e++)zdy_btnlist.push({name:"æ— ",send:""});GM_setValue(roleid+"_zdy_btnlist",zdy_btnlist)}inzdy_btn?WG.zdy_btnshow():WG.zdy_btnshow("off")},zdy_btnshow:function(e="on"){if("on"==e){inzdy_btn=!0;var t=UI.zdybtnui(),o=($(".WG_button").remove(),$(".WG_log").after(t),["Q","W","E","R","T","Y"]);for(let e=0;e<o.length;e++)$("#keyin"+o[e]).on("click",function(){WG.zdybtnfunc(e)});$(".auto_perform").on("click",WG.auto_preform_switch),$(".cmd_echo").on("click",WG.cmd_echo_button)}else"off"==e&&(inzdy_btn=!1,t=UI.btnui(),$(".WG_button").remove(),$(".WG_log").after(t),$(".sm_button").on("click",WG.sm_button),$(".go_yamen_task").on("click",WG.go_yamen_task),$(".kill_all").on("click",WG.kill_all),$(".get_all").on("click",WG.get_all),$(".sell_all").on("click",WG.sell_all),$(".zdwk").on("click",WG.zdwk),$(".auto_perform").on("click",WG.auto_preform_switch),$(".cmd_echo").on("click",WG.cmd_echo_button),G.isGod())&&$(".zdy-item.zdwk").html("ä¿®ç‚¼(Y)");GM_setValue(roleid+"_inzdy_btn",inzdy_btn)},runLoginhml:function(){WG.SendCmd(loginhml)},tnBuy_hook:null,tnBuy:function(){WG.tnBuy_hook=WG.add_hook(["dialog","text"],e=>{let n;var t=new Map;let s="";if("dialog"==e.type&&null!=e.title&&0<=e.title.indexOf("å”æ¥ æ­£åœ¨è´©å–")){n=e.seller;for(var o of e.selllist)WG.inArray(o.name,auto_buylist.split(","))&&t.set(o.id,o.count);t.forEach((e,t,o)=>{s=s+"buy "+e+" "+t+" from "+n+";",s+="$wait 500;"}),s+="look3 1;",WG.SendCmd(s)}"text"==e.type&&0<=e.msg.indexOf("æ²¡æœ‰è¿™ä¸ªç©å®¶")&&(messageAppend("æ‰§è¡Œç»“æŸ"),$(".dialog-close").click(),WG.remove_hook(WG.tnBuy_hook))}),WG.SendCmd("$to æ‰¬å·åŸ-å¹¿åœº;$wait 100;$to æ‰¬å·åŸ-å½“é“º;$wait 200;list %å”æ¥ %")},zxBuy_hook:null,zxBuy:function(){WG.zxBuy_hook=WG.add_hook(["dialog","text"],e=>{let n=WG.getIdByName("æœ±ç†¹");var t=new Map;let s="";if("dialog"==e.type&&"pack"==e.dialog){for(var o of e.items)WG.inArray(o.name.toLowerCase(),auto_skillPaperSelllist.split(","))&&t.set(o.id,o.count);t.forEach((e,t,o)=>{s=s+"sell "+e+" "+t+" to "+n+";",s+="$wait 500;"}),s+="look3 1;",WG.SendCmd(s)}"text"==e.type&&0<=e.msg.indexOf("æ²¡æœ‰è¿™ä¸ªç©å®¶")&&($(".dialog-close").click(),WG.remove_hook(WG.zxBuy_hook))}),WG.SendCmd("$to æ‰¬å·åŸ-å¹¿åœº;go east;go north;$wait 100;$wait 200;pack")},selectLowKongfu:function(c=0){WG.gpSkill_hook=WG.add_hook("dialog",e=>{if(e.dialog&&"skills"==e.dialog&&e.items&&null!=e.items){var t,o="jh fam 0 start,go west,go west,go north,go enter,go west,",n="",s="",i="wakuang",a=(G.isGod()&&(i="xiulian"),[]),l=[],r=c,d=(0!=c&&!isNaN(c)||(r=e.limit),0),u=[];for(t of e.items){if(5<d)break;t.enable_skill&&u.push(t.enable_skill),(WG.inArray(t.id,u)||0<=t.name.indexOf("åŸºæœ¬"))&&parseInt(t.level)<parseInt(r)&&(n+=`lianxi ${t.id} ${r},`,d<4&&(s+=`lianxi ${t.id} ${r},`,l.push(t.name)),a.push(t.name),d++)}("setting auto_work "+o+n+i).length<=200?(WG.Send("setting auto_work "+o+n+i),messageAppend("æ·»åŠ "+a.join(",")+"åˆ°"+r)):(WG.Send("setting auto_work "+o+s+i),messageAppend("æ·»åŠ "+l.join(",")+"åˆ°"+r)),messageAppend("æ·»åŠ æˆåŠŸ,æ•°æ®åˆ·æ–°åæ˜¾ç¤º"),WG.remove_hook(WG.gpSkill_hook),WG.gpSkill_hook=void 0}}),KEY.do_command("skills"),KEY.do_command("skills"),WG.Send("cha")},hooks:[],hook_index:0,add_hook:function(e,t){e={index:WG.hook_index++,types:e,fn:t};return WG.hooks.push(e),e.index},remove_hook:function(e){for(var t=0;t<this.hooks.length;t++)this.hooks[t].index==e&&this.hooks.baoremove(t)},run_hook:function(e,t){for(var o=0;o<this.hooks.length;o++)try{var n=this.hooks[o];(n.types==t.type||n.types instanceof Array&&0<=$.inArray(t.type,n.types))&&n.fn(t)}catch(e){console.error("hook error",e)}},receive_message:function(t){if(t&&t.data){var v,e,o,n=function(e){var t,o={};for(t in e)o[t]="object"==typeof e[t]?n(e[t]):e[t];return o};if(v="{"==t.data[0]||"["==t.data[0]?new Function("return "+t.data+";")():{type:"text",msg:t.data},G.cmd_echo&&"time"!=v.type&&console.log(v),G.yaotaFlag&&"string"==typeof v.msg&&0<=(s=v.msg).indexOf("ä¸€è‚¡å¥‡å¼‚çš„èƒ½é‡æ¶Œå…¥ä½ çš„ä½“å†…ï¼Œä½ è·å¾—")&&(G.yaoyuan=G.yaoyuan+parseInt(s.replace(/[^0-9]/gi,"")),$("#yt_prog").html("<hiy>ç›®å‰å·²è·å¾— "+G.yaoyuan+" å¦–å…ƒ</hiy>"),261==G.yaoyuan)&&$("#yt_prog").html("<hiy>ç›®å‰å·²è·å¾— "+G.yaoyuan+" å¦–å…ƒï¼Œbosså‡ºç°ï¼</hiy>"),"å¼€"==silence){if("state"==v.type)if(null==v.silence)if(v.desc!=[])return v.desc=[],v.silence=1,(s=n(t)).data=JSON.stringify(v),WG.run_hook(v.type,v),void ws_on_message.apply(this,[s]);if("text"==v.type){var s=v.msg.split(/.*é€ æˆ<wht>|.*é€ æˆ<hir>|<\/wht>ç‚¹|<\/hir>ç‚¹/);if(s[2])return i=s[2].split(/ä¼¤å®³|\(|</),messageAppend(`é€ æˆ<wht>${s[1]}</wht>ç‚¹<hir>${i[0]}</hir>ä¼¤å®³ï¼`,0,1),void WG.run_hook(v.type,v)}}if("msg"==v.type&&"å¼€"==shieldswitch){if(null!=shield&&(0<=shield.indexOf(v.name)||0<=shield.indexOf(v.uid)))return;for(e of shieldkey.split(","))if(""!=e&&0<=v.content.indexOf(e))return}if("text"==v.type)if("å¼€"==shieldswitch)for(o of shieldkey.split(","))if(""!=o&&0<=v.msg.indexOf(o))return;if("dialog"==v.type&&"fam"==v.t&&null==v.k)if(null!=UI.toui[v.index])return v.desc+="\n",v.desc+=UI.toui[v.index],v.k="knva",(s=n(t)).data=JSON.stringify(v),WG.run_hook(v.type,v),void ws_on_message.apply(this,[s]);if("text"==v.type&&"ä»€ä¹ˆï¼Ÿ"==v.msg&&null!=G.wsdelaySetTime&&(G.wsdelaySetCount<=3?(G.wsdelaySetCount+=1,G.wsdelay=null==G.wsdelay?(new Date).getTime()-G.wsdelaySetTime:((new Date).getTime()-G.wsdelaySetTime+G.wsdelay)/2,G.wsdelaySetTime=(new Date).getTime(),WG.SendCmd("test")):(G.wsdelay=((new Date).getTime()-G.wsdelaySetTime+G.wsdelay)/2,WG.SendCmd("tm æœåŠ¡å™¨åˆ°æœ¬åœ°æ¥å›å»¶è¿Ÿçº¦ "+G.wsdelay+" æ¯«ç§’"),G.wsdelaySetTime=void 0,G.wsdelaySetCount=void 0,setTimeout(()=>{let e=$(".content-message pre").html();e=e.replaceAll("ä»€ä¹ˆï¼Ÿ\n",""),$(".content-message pre").html(e)},10))),"dialog"==v.type&&"fb"==v.t&&null==v.k)v.desc+="\n",v.desc+=UI.fbui(fb_path[v.index],v.is_multi,v.is_diffi),v.k="knva",(i=n(t)).data=JSON.stringify(v),WG.run_hook(v.type,v),ws_on_message.apply(this,[i]);else if("dialog"==v.type&&"pack"==v.dialog&&"item"==v.from&&null==v.k)s=v.desc.split("\n")[0],v.desc+="\n",v.desc+=UI.itemui(s),v.k="knva",(i=n(t)).data=JSON.stringify(v),WG.run_hook(v.type,v),ws_on_message.apply(this,[i]);else{if("perform"==v.type)if("å¼€"==zdyskills)return zdyskilllist=GM_getValue(roleid+"_zdyskilllist",zdyskilllist),v.skills=JSON.parse(zdyskilllist),(s=n(t)).data=JSON.stringify(v),WG.run_hook(v.type,v),void ws_on_message.apply(this,[s]);if("cmds"==v.type&&unsafeWindow&&unsafeWindow.ToRaid&&0<=JSON.stringify(v.items).indexOf("è¿›å…¥å‰¯æœ¬")){var i=v.items[0].cmd;let e="";e=0<=i.indexOf("1 0")?i.replaceAll("1 0","1"):i+" 0";s={name:"æ‰«è¡æŒ‡å®šæ¬¡æ•°"},s=(s.cmd=`@js ($sdnum) =prompt("è¯·è¾“å…¥æ¬¡æ•°,æ³¨æ„:è‹¥å‰¯æœ¬æ‰è½ç‰©å“è¿‡å¤š,è¯·ä¸è¦è¾“å…¥è¶…è¿‡50æ¬¡,å¦åˆ™å¯èƒ½å·æ²¡äº†","10")
                                    [if] (sdnum)!=null
                                      ${e} (sdnum)`,v.items.push(s),{name:"å·æ¸¡æŒ‡å®šæ¬¡æ•°"}),i=(s.cmd=`@js ($sdnum) =prompt("è¯·è¾“å…¥æ¬¡æ•°","10")
                                    [if] (sdnum)!=null
                                      [while] (sdnum) !=0
                                        ($sdnum) = (sdnum)-1
                                        ${i}
                                        cr over`,v.items.push(s),n(t));i.data=JSON.stringify(v),WG.run_hook(v.type,v),void ws_on_message.apply(this,[i])}else{if("dialog"==v.type&&"tasks"==v.dialog&&v.items){let o,n,s,i,a,l,r,d,u,c,m,p,g,f,h,_,k,y,w,e=(v.items.forEach(e=>{var t;2===e.state&&WG.SendCmd("taskover "+e.id),"signin"===e.id?((t=e.desc.match(/ç²¾åŠ›æ¶ˆè€—ï¼š<...>(\d+)\/200<....>/))&&(o=parseInt(t[1])<200?`<hig>${t[1]}</hig>`:t[1]),t=e.desc.match(/æ­¦é“å¡”(.+)ï¼Œè¿›åº¦(\d+)\/(\d+)<....>/),i=t?(a=t[2],l=t[3],a<l&&(a=`<hig>${a}</hig>`),r=/å¯ä»¥é‡ç½®/.test(t[1])?"<hig>å¯ä»¥é‡ç½®</hig>":"å·²ç»é‡ç½®",a+"/"+l+" "+r):"åªæ‰“å¡”ä¸»",t=e.desc.match(/<.+?>(.+)é¦–å¸­è¯·å®‰<.+?>/),s=t?/å·²ç»/.test(t[1])?"å·²ç»è¯·å®‰":"<hig>å°šæœªè¯·å®‰</hig>":"æ— éœ€è¯·å®‰",(t=e.desc.match(/ä»Šæ—¥å‰¯æœ¬å®Œæˆæ¬¡æ•°ï¼š(\d+)ã€‚/))&&(n=t[1]),t=e.desc.match(/å°šæœªååŠ©è¥„é˜³å®ˆåŸ/),d=t?"<hig>0</hig>":1,t=e.desc.match(/å°šæœªæŒ‘æˆ˜é—¨æ´¾BOSS/),u=t?"<hig>0</hig>":1,(t=e.desc.match(/æŒ‘æˆ˜(\d+)æ¬¡æ­¦ç¥BOSS/))?c=`<hig>${c=5-parseInt(t[1])}</hig>`:G.level&&/æ­¦ç¥|å‰‘ç¥|åˆ€çš‡|å…µä¸»|æˆ˜ç¥/.test(G.level)&&(c=5),t=e.desc.match(/å°šæœªæŒ‘æˆ˜æ­¦é“å¡”å¡”ä¸»/),m=t?"<hig>0</hig>/1":"å·²æ‰“æˆ–æœªè§£é”",(t=e.desc.match(/æŒ‘æˆ˜å¼‘å¦–å¡”(\d+)\/50/))&&(p=t[1]),t=e.desc.match(/å°šæœªæŒ‘æˆ˜å¦–ç¥/),g=t?"<hig>0</hig>/1":"å·²æ‰“æˆ–æœªè§£é”"):"sm"===e.id?(t=e.desc.match(/ç›®å‰å®Œæˆ(.*)\/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ(.*)ä¸ªã€‚/),f=parseInt(t[1])<20?`<hig>${t[1]}</hig>`:t[1],h=t[2]):"yamen"===e.id?(t=e.desc.match(/ç›®å‰å®Œæˆ(.*)\/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ(.*)ä¸ªã€‚/),_=parseInt(t[1])<20?`<hig>${t[1]}</hig>`:t[1],k=t[2]):"yunbiao"===e.id&&(t=e.desc.match(/æœ¬å‘¨å®Œæˆ(.*)\/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ(.*)ä¸ªã€‚/),y=parseInt(t[1])<20?`<hig>${t[1]}</hig>`:t[1],w=t[2])}),`é—¨æ´¾è¯·å®‰ => ${s}
æ­¦é“ä¹‹å¡” => ${i}
`);e=(e=(e=(e+=`ç²¾åŠ›æ¶ˆè€— => ${o}/200 å‰¯æœ¬æ¬¡æ•° => ${n}æ¬¡
å¸ˆé—¨ä»»åŠ¡ => ${f}/20 ${h}è¿
`)+`è¡™é—¨è¿½æ• => ${_}/20 ${k}è¿
æ¯å‘¨è¿é•– => ${y}/20 ${w}è¿
`)+`è¥„é˜³å®ˆåŸ => ${d}/1 é—¨æ´¾BOSS => ${u}/1
`)+`æ­¦é“å¡”ä¸» => ${m}
`,c&&(e+=`æ­¦ç¥BOSS => ${c}/5
`),p&&(e+=`æŒ‘æˆ˜å¼‘å¦–å¡” => ${p}/50 æŒ‘æˆ˜å¦–ç¥ => ${g}
`),$(".remove_taskprog").remove(),$(".content-message pre").append(`<span class="remove_taskprog">${e}</span>`),AutoScroll(".content-message")}if("dialog"==v.type&&"pack"==v.dialog)if(v.name){var a=v;if(/å…»ç²¾ä¸¹|æœ±æœ|æ½œçµæœ|èƒŒåŒ…æ‰©å……çŸ³|å°ç®±å­|å¸ˆé—¨è¡¥ç»™åŒ…|éšä»ç¤¼åŒ…|æŠ€èƒ½é‡ç½®åŒ…/.test(a.name)){let t=["stopstate"];var l=a.count;let o="use";/å°ç®±å­|å¸ˆé—¨è¡¥ç»™åŒ…|éšä»ç¤¼åŒ…|æŠ€èƒ½é‡ç½®åŒ…/.test(a.name)&&(o="open");for(let e=0;e<l;e++)t.push(`$wait 250;${o} `+a.id);$(".content-message pre").append($(`<div class="item-commands"><span class="autouse">ä½¿ç”¨ ${a.name} ${l}æ¬¡</span></div>`).click(()=>WG.SendCmd(t))),AutoScroll(".content-message")}}if("room"!=v.type||/æ¡ƒèŠ±å²›|æ…ˆèˆªé™æ–‹/.test(v.name))WG.run_hook(v.type,v),ws_on_message.apply(this,arguments),unsafeWindow.funny&&null!=unsafeWindow.funny.API&&unsafeWindow.funny.API.onmessage(t);else{let e=v.desc;30<e.length&&(i=(s=e.replace(/<([^<]+)>/g,"")).substr(0,30),s.substr(30),v.desc=`<span id="show">${i} <hic>Â»Â»Â»</hic></span><span id="more" style="display:none">${s}</span><span id="hide" style="display:none"> <hiy>Â«Â«Â«</hiy></span>`),e.includes("cmd")&&((i=(e=(e=(e=(e=(e=e.replace("<hig>æ¤…å­</hig>","æ¤…å­")).replace("<CMD cmd='look men'>é—¨(men)<CMD>","<cmd cmd='look men'>é—¨</cmd>")).replace(/span/g,"cmd")).replace(/"/g,"'")).replace(/\((.*?)\)/g,"")).match(/<cmd cmd='([^']+)'>([^<]+)<\/cmd>/g)).forEach(e=>{e=e.match(/<cmd cmd='(.*)'>(.*)<\/cmd>/);v.commands.unshift({cmd:e[1],name:`<hic>${e[2]}</hic>`})}),i.forEach(e=>v.desc=`<hic>${e}</hic>ã€€`+v.desc));s=n(t);s.data=JSON.stringify(v),WG.run_hook(v.type,v),ws_on_message.apply(this,[s]),$("#show").click(()=>{$("#more").show(),$("#show").hide(),$("#hide").show()}),void $("#hide").click(()=>{$("#more").hide(),$("#show").show(),$("#hide").hide()})}}}}}},T={_recmd:function(e){return e?((e=e instanceof Array?e:e.split(";")).baoremove(0),e.join(";")):""},recmd:function(t,o){for(let e=0;e<t+1;e++)o=T._recmd(o);return o},findhook:void 0,_findItem:async function(o,n){console.log("finditem"+o),T.findhook=WG.add_hook("dialog",async function(e){if(e.items){for(var t of e.items)t.name==o&&(n(t.id),WG.remove_hook(T.findhook));n("")}WG.remove_hook(T.findhook)}),WG.Send("pack")},pname:function(e=0,t,o){T.findPlayerByName(e,t,o)},findPlayerByName:function(e=0,t,o){let n=(o=0<=(o=T.recmd(e-1,o)).indexOf(",")?o.split(","):o.split(";"))[0].split("$")[0];o=T.recmd(0,o)," "==(n=n.replaceAll("-"," "))[n.length-1]&&(n=n.substring(0,n.length-1)),console.log("findPlayerByName"+t);for(let e=0;e<roomData.length;e++)roomData[e].name&&0<=roomData[e].name.indexOf(t)&&WG.Send(n+" "+roomData[e].id);WG.SendCmd(o)},findItem:async function(e=0,t,o){var n,s=(o=0<=(o=T.recmd(e-1,o)).indexOf(",")?o.split(","):o.split(";"))[0].split(" ")[0];o=T.recmd(0,o),console.log("finditem"+t),WG.Send("pack");for(n of packData)n.name==t&&(("fenjie"==s||"drop"==s)&&0<=n.name.indexOf("â˜…")?messageAppend("é«˜çº§ç‰©å“ ,ä¸åˆ†è§£"):WG.SendCmd(s+" "+n.id));WG.SendCmd(o)},wait:async function(e=0,t,o){o=T.recmd(e,o),console.log("å»¶æ—¶:"+t+"ms,å»¶æ—¶è§¦å‘:"+o),await WG.sleep(parseInt(t)),WG.SendCmd(o)},batwait:async function(e=0,t,o){G.in_fight&&(o=T.recmd(e,o),console.log("å»¶æ—¶:"+t+"ms,å»¶æ—¶è§¦å‘:"+o),await WG.sleep(parseInt(t)),WG.SendCmd(o))},goyt:async function(){WG.SendCmd("jh fam 9 start;go enter;go up;"),await WG.sleep(1e3);var t="";for(let e=0;e<roomData.length;e++)roomData[e].name&&0<=roomData[e].name.indexOf("ç–¯ç™«çš„è€å¤´")&&(t=roomData[e].id);WG.SendCmd("ggdl "+t+";go north;go north;go north;go north;$wait 250;go north;go north;look shi;tiao1 shi;tiao3 shi;$wait 250;tiao1 shi;tiao3 shi;tiao2 shi;go north;")},gogzm:async function(){WG.SendCmd("jh fam 9 start;go enter;go up;"),await WG.sleep(1e3);var t="";for(let e=0;e<roomData.length;e++)roomData[e].name&&0<=roomData[e].name.indexOf("ç–¯ç™«çš„è€å¤´")&&(t=roomData[e].id);WG.SendCmd("ggdl "+t+";go north;go north;go north;go north;$wait 250;go north;go north;$wait 250;look shi;tiao1 shi;tiao1 shi;tiao2 shi;$wait 250;jumpdown;")},godddb:async function(){WG.SendCmd("jh fam 9 start;go enter;go up;"),await WG.sleep(1e3);var t="";for(let e=0;e<roomData.length;e++)roomData[e].name&&0<=roomData[e].name.indexOf("ç–¯ç™«çš„è€å¤´")&&(t=roomData[e].id);WG.SendCmd("ggdl "+t+";go north;go north;go north;go north;$wait 250;go north;go down;")},killall:async function(e=0,t,o){o=T.recmd(e,o),console.log("å«æ€"),WG.kill_all(),await WG.sleep(100),WG.SendCmd(o)},getall:async function(e=0,t,o){o=T.recmd(e,o),console.log("æ‹¾å–"),WG.get_all(),await WG.sleep(100),WG.SendCmd(o)},cleanall:async function(e=0,t,o){o=T.recmd(e,o),console.log("æ¸…åŒ…"),WG.clean_all(),await WG.sleep(100),WG.SendCmd(o)},to:async function(e=0,t,o){o=T.recmd(e,o),WG.go(t),await WG.sleep(100),WG.SendCmd(o)},eq:async function(e=0,t,o){o=T.recmd(e,o),"0"==t?WG.uneqall():WG.eqhelper(t),await WG.sleep(100),WG.SendCmd(o)},eqskill:async function(e=0,t,o){o=T.recmd(e,o),"0"==t?WG.uneqall(1):WG.eqhelper(t,1),await WG.sleep(100),WG.SendCmd(o)},eqdel:async function(e=0,t,o){o=T.recmd(e,o),WG.eqhelperdel(t),await WG.sleep(100),WG.SendCmd(o)},zdwk:async function(e=0,t,o){o=T.recmd(e,o),WG.zdwk(),await WG.sleep(100),WG.SendCmd(o)},rzdwk:async function(e=0,t,o){o=T.recmd(e,o),WG.zdwk("",!1),await WG.sleep(100),WG.SendCmd(o)},killhook:void 0,killw:async function(e=0,t,o){o=T.recmd(e,o);var n="";for(let e=0;e<roomData.length;e++)roomData[e].name&&0<=roomData[e].name.indexOf(t)&&(n=roomData[e].id);T.killhook=WG.add_hook("itemremove",function(e){e.id==n&&(WG.SendCmd(o),WG.remove_hook(T.killhook),T.killhook=void 0)}),WG.SendCmd("kill "+n)},eqhook:void 0,eqw:async function(e=0,n,t){var s=T.recmd(e,t);if(0<=n.indexOf("<"))T._findItem(n,async function(e){let t=e,o=!0;if(""==t)o=!1,WG.SendCmd(s);else for(T.eqhook=WG.add_hook("dialog",function(e){0==e.eq&&e.id==t&&(o=!1,WG.SendCmd(s),WG.remove_hook(T.eqhook),T.eqhook=void 0)});o;)WG.Send("pack"),WG.SendCmd("eq "+t),await WG.sleep(1e3)});else{let t=n,o=!0;if(""==t)o=!1,WG.SendCmd(s);else for(T.eqhook=WG.add_hook(["text","dialog"],function(e){"dialog"==e.type&&0==e.eq&&e.id==t&&(o=!1,WG.SendCmd(s),WG.remove_hook(T.eqhook),T.eqhook=void 0),"text"==e.type&&0<=e.msg.indexOf("ä½ è¦è£…å¤‡ä»€ä¹ˆ")&&(o=!1,WG.SendCmd(s),WG.remove_hook(T.eqhook),T.eqhook=void 0)});o;)WG.Send("pack"),WG.SendCmd("eq "+t),await WG.sleep(1e3)}},usezml:async function(e=0,t,o){o=T.recmd(e,o);for(var n of zml=GM_getValue(roleid+"_zml",zml))n.name==t&&await WG.zmlfire(n);await WG.sleep(100),WG.SendCmd(o)},waitpfm:async function(e=0,t,o){o=T.recmd(e,o);let n=!0,s=0;for(;n;)G.gcd||G.cds.get(t)||(WG.Send("perform "+t),s++,G.cds.get(t)&&n&&(n=!1,WG.SendCmd(o)),!G.in_fight&&n&&(n=!1,WG.SendCmd(o)),1<=s&&n&&(n=!1,WG.SendCmd(o))),s++,await WG.sleep(350)},startjk:async function(e=0,t,o){o=T.recmd(e,o);for(var n of ztjk_item=GM_getValue(roleid+"_ztjk",ztjk_item))if(n.name==t){n.isactive=1,GM_setValue(roleid+"_ztjk",ztjk_item),WG.ztjk_func(),messageAppend("å·²æ³¨å…¥"+n.name,0,1);break}await WG.sleep(100),WG.SendCmd(o)},stopjk:async function(e=0,t,o){o=T.recmd(e,o);for(var n of ztjk_item=GM_getValue(roleid+"_ztjk",ztjk_item))if(n.name==t){n.isactive=0,GM_setValue(roleid+"_ztjk",ztjk_item),WG.ztjk_func(),messageAppend("å·²æš‚åœ"+n.name);break}await WG.sleep(100),WG.SendCmd(o)},sm:async function(e=0,t,o=""){for(o=T.recmd(e,o),WG.sm_button();0<=$(".sm_button").text().indexOf("åœæ­¢");)await WG.sleep(1e3);await WG.sleep(100),WG.SendCmd(o)},daily:async function(e=0,t,o){for(o=T.recmd(e,o),KEY.do_command("tasks"),messageAppend("æ‰§è¡Œè¯·å®‰.",1),await WG.oneKeyQA(),WG.oneKeyDaily(),await WG.sleep(2e3);null!=WG.daily_hook;)await WG.sleep(1e3);for(WG.Send("tasks"),await WG.sleep(1e3),WG.oneKeySD();WG.sd_hook;)await WG.sleep(1e3);await WG.sleep(100),WG.SendCmd(o)},xiyan:async function(e=0,t,o){for(o=T.recmd(e,o),WG.xiyan(),await WG.sleep(1e3);WG.marryhy;)await WG.sleep(1e3);await WG.sleep(100),WG.SendCmd(o)},yamen:async function(e=0,t,o){for(o=T.recmd(e,o),WG.go_yamen_task(),await WG.sleep(1e3);WG.yamen_lister;)await WG.sleep(1e3);await WG.sleep(100),WG.SendCmd(o)},wudao:async function(e=0,t,o){o=T.recmd(e,o),WG.wudao_auto(),await WG.sleep(100),WG.SendCmd(o)},boss:async function(e=0,t,o){for(o=T.recmd(e,o),WG.kksBoss({content:"å¬è¯´xxxå‡ºç°åœ¨é€é¥æ´¾-é’è‰åªä¸€å¸¦ã€‚"}),await WG.sleep(1e3);WG.ksboss;)await WG.sleep(1e3);await WG.sleep(100),WG.SendCmd(o)},stoppfm:async function(e=0,t,o){o=T.recmd(e,o),G.auto_preform&&(G.auto_preform=!1,messageAppend("<hio>è‡ªåŠ¨æ–½æ³•</hio>å…³é—­"),WG.auto_preform("stop")),await WG.sleep(100),WG.SendCmd(o)},startpfm:async function(e=0,t,o){o=T.recmd(e,o),G.auto_preform||(G.auto_preform=!0,messageAppend("<hio>è‡ªåŠ¨æ–½æ³•</hio>å¼€å¯"),WG.auto_preform()),await WG.sleep(100),WG.SendCmd(o)},stopautopfm:async function(e=0,t,o){var n;o=T.recmd(e,o);for(n of t.split(","))WG.inArray(n,blackpfm)||blackpfm.push(n);console.log("å½“å‰è‡ªåŠ¨æ–½æ³•é»‘åå•ä¸º:"+blackpfm),await WG.sleep(100),WG.SendCmd(o)},startautopfm:async function(e=0,t,o){o=T.recmd(e,o);for(var n=t.split(","),s=0;s<blackpfm.length;s++)for(var i of n)i==blackpfm[s]&&blackpfm.baoremove(s);console.log("å½“å‰è‡ªåŠ¨æ–½æ³•é»‘åå•ä¸º:"+blackpfm),await WG.sleep(100),WG.SendCmd(o)},store:async function(e=0,t,o){for(o=T.recmd(e,o),await WG.sell_all(1,0,0);WG.packup_listener;)await WG.sleep(200);await WG.sleep(100),WG.SendCmd(o)},fenjie:async function(e=0,t,o){for(o=T.recmd(e,o),await WG.sell_all(0,1,0);WG.packup_listener;)await WG.sleep(200);await WG.sleep(100),WG.SendCmd(o)},drop:async function(e=0,t,o){for(o=T.recmd(e,o),await WG.sell_all(0,0,1);WG.packup_listener;)await WG.sleep(200);await WG.sleep(100),WG.SendCmd(o)},sellall:async function(e=0,t,o){for(o=T.recmd(e,o),await WG.sell_all(1,1,1);WG.packup_listener;)await WG.sleep(200);await WG.sleep(100),WG.SendCmd(o)},callcontextMenu:function(e=0,t,o){$(".container").contextMenu({x:1,y:1})},stopallauto:function(e=0,t,o){o=T.recmd(e,o),WG.stopAllAuto(),messageAppend("æš‚åœè‡ªåŠ¨å–œå®´åŠè‡ªåŠ¨BOSS",0,1),WG.SendCmd(o)},startallauto:function(e,t,o){o=T.recmd(e,o),WG.reSetAllAuto(),messageAppend("æ¢å¤è‡ªåŠ¨å–œå®´åŠè‡ªåŠ¨BOSS",0,1),WG.SendCmd(o)},roll:function(e,t,o){o=T.recmd(e,o),1==t?WG.SendCmd("pty "+100*Math.random()):2==t?WG.SendCmd("chat "+100*Math.random()):3==t&&WG.SendCmd("say "+100*Math.random()),WG.SendCmd(o)},addstore:function(e,t,o){o=T.recmd(e,o),WG.addstore(t),WG.SendCmd(o)},addlock:function(e,t,o){o=T.recmd(e,o),WG.addlock(t),WG.SendCmd(o)},dellock:function(e,t,o){o=T.recmd(e,o),WG.dellock(t),WG.SendCmd(o)},tnbuy:function(e,t,o){o=T.recmd(e,o),WG.tnBuy(),WG.SendCmd(o)},zxbuy:function(e,t,o){o=T.recmd(e,o),WG.zxBuy(),WG.SendCmd(o)},atlx:function(e,t,o){o=T.recmd(e,o),WG.selectLowKongfu(parseInt(t)),WG.SendCmd(o)},addfenjieid:function(e,t,o){o=T.recmd(e,o),WG.addfenjieid(t),WG.SendCmd(o)},adddrop:function(e,t,o){o=T.recmd(e,o),WG.adddrop(t),WG.SendCmd(o)},addzxbuy:function(e,t,o){o=T.recmd(e,o),WG.addzxbuy(t),WG.SendCmd(o)},clsSakada:function(e,t,o){o=T.recmd(e,o),WG.clean_dps(),WG.SendCmd(o)},cls:function(e,t,o){o=T.recmd(e,o),messageClear(),WG.SendCmd(o)},syso:function(e,t,o){o=T.recmd(e,o),messageAppend(t),WG.SendCmd(o)},stop:function(e,t,o){o=T.recmd(e,o),WG.timer_close(),WG.SendCmd(o)},tts:function(e,t,o){o=T.recmd(e,o),FakerTTS.playtts(t),WG.SendCmd(o)},beep:async function(e,t,o){o=T.recmd(e,o),Beep(),WG.SendCmd(o)},music:function(e,t,o){o=T.recmd(e,o);new MusicBox({loop:!1,musicText:"6 - - 5 - 3 2 - 1 - - - 3 - - 2 1 - Â·6 Â·5 - - - Â·5 - Â·6 - Â·5 - Â·6 - 1 - - 2 - 3 5 6 - - 3 2 1 - 2",autoplay:6,type:"triangle",duration:2});WG.SendCmd(o)}},ProConsole={init:function(){var lastrun;L.isMobile()?layer.prompt({title:"è¯·è¾“å…¥...",formType:2},function(text,index){var jscode;layer.close(index),null!=text&&(0<=text.split("\n")[0].indexOf("//")?unsafeWindow&&unsafeWindow.ToRaid&&ToRaid.perform(text):0<=text.split("\n")[0].indexOf("#js")?(jscode=text.split("\n"),jscode.baoremove(0),eval(jscode.join(""))):WG.SendCmd(text))}):(layer.open({type:1,title:"è¿è¡Œå‘½ä»¤",shade:!1,offset:"rb",zIndex:961024,success:function(e,t){$(".runtesta").show()},content:$(".runtest"),end:function(){$(".runtesta").off("click"),$(".runtesta").hide()}}),lastrun=GM_getValue("_lastrun",""),""!=lastrun&&$("#testmain").val(lastrun),$(".runtesta").off("click"),$(".runtesta").on("click",function(){var jscode;0<=$("#testmain").val().split("\n")[0].indexOf("//")?unsafeWindow&&unsafeWindow.ToRaid&&ToRaid.perform($("#testmain").val()):0<=$("#testmain").val().split("\n")[0].indexOf("#js")?(jscode=$("#testmain").val().split("\n"),jscode.baoremove(0),eval(jscode.join(""))):WG.SendCmd($("#testmain").val())}),$("#testmain").focusout(function(){GM_setValue("_lastrun",$("#testmain").val())}))},close:function(){layer.close()}},UI={codeInput:`<div class="runtest layui-layer-wrap" style="display: none;">
                         <textarea class="site-demo-text" id="testmain" data-enpassusermodified="yes">
                         //<-ç¬¬ä¸€è¡Œè¾“å…¥åŒæ–œæ å³å¯è¿è¡Œæµç¨‹å‘½ä»¤ ,ç¬¬ä¸€è¡Œè¾“å…¥#js å³å¯è¿è¡ŒJS

                        </textarea>
                        <a class="layui-btn layui-btn-normal runtesta" style="position:absolute;right:20px;bottom:20px"  >ç«‹å³è¿è¡Œ</a>
                     </div>`,zdybtnui:function(){let e="<div class='WG_button'>";var t,o=["Q","W","E","R","T","Y"];let n=0;for(t of zdy_btnlist)e+=` <span class='zdy-item' id = 'keyin${o[n]}'>${t.name}(${o[n]})</span>`,n+=1;return e+`<span class="zdy-item auto_perform" style="float:right;"> è‡ªåŠ¨æ”»å‡» </span>
                <span class="zdy-item cmd_echo" style="float:right;">ä»£ç </span> </div>`},btnui:function(){return`<div class='WG_button'><span class='zdy-item sm_button'>å¸ˆé—¨(Q)</span>
            <span class='zdy-item go_yamen_task'>è¿½æ•(W)</span>
            <span class='zdy-item kill_all'>å‡»æ€(E)</span>
            <span class='zdy-item get_all'>æ‹¾å–(R)</span>
            <span class='zdy-item sell_all'>æ¸…åŒ…(T)</span>
            <span class='zdy-item zdwk'>æŒ–çŸ¿(Y)</span>
            <span class="zdy-item auto_perform" style="float:right;"> è‡ªåŠ¨æ”»å‡» </span>
                <span class="zdy-item cmd_echo" style="float:right;">ä»£ç </span> </div>`},wgui:function(){let e;return` <div class='WG_log'>
                    <pre></pre>
                </div>`+(e=inzdy_btn?UI.zdybtnui():UI.btnui())},zdyBtnsetui:function(){let e="";var t;for(t of["Q","W","E","R","T","Y"])e+=`<div class="setting-item setting-item2 ">
                 <div style='width:10%'>${t}:</div><span>åç§°:<input style='width:20%' id='name${t}' /></span> <span style='margin-left:5px'>å‘½ä»¤:<input id='send${t}'/></span>
                </div>`;return e+=`
                         <div class="setting-item" >
                <div class="item-commands"><span class="savebtn">ä¿å­˜è‡ªå®šä¹‰æŒ‰é’®è®¾ç½®</span></div>
                        </div>
            `},html_lninput:function(e,t){return`
              <div class="setting-item" >
                <span><label for="${e}">${t}</label><input id="${e}" name="${e}" type="text" style="width:80px" value>
                </span>        </div> `},html_input:function(e,t){return`
                 <div class="setting-item" >
                <span><label for="${e}"> ${t}</label> </span>
              </div>
              <textarea class="settingbox hide zdy-box" id="${e}" name="${e}" style="display: inline-block;">  </textarea>
            `},html_switch:function(e,t,o){return`<div class="setting-item setting-item2 " for="${o}" style='display: inline-block;'>
                <span class="title"> ${t}</span>
                <span class="switch2" id="${e}" >
                <span class="switch-button"></span>
                <span class="switch-text">å…³</span>
                </span>
                </div>
                `},switchClick:function(e){var t=$(this);t.parent().attr("for");t.is(".on")?(t.removeClass("on"),t.find(".switch-text").html("å…³")):(t.addClass("on"),t.find(".switch-text").html("å¼€"))},syssetting:function(){return`<h3>æ’ä»¶</h3>
                    <div class="setting-item zdy_dialog" >
                æœ‰ç©ºçš„è¯è¯·ç‚¹ä¸ªstar,æ‚¨çš„æ”¯æŒæ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ›<a href="https://github.com/knva/wsmud_plugins" target="_blank">https://github.com/knva/wsmud_plugins</a>
                </div> `+UI.html_lninput("welcome","æ¬¢è¿è¯­å¥ï¼š ")+UI.html_lninput("die_str","æ­»äº¡æç¤ºï¼š ")+`
                <div class="setting-item">
                <span> <label for="color_select"> ç•Œé¢é…è‰²ï¼š </label><select id="color_select" style="width:80px">
                    <option value="normal"> åŸç‰ˆ </option>
                    <option value="flat"> flatæ¨¡å¼ </option>
                    <option value="access"> è‰²è‹¥æ¨¡å¼</option>
                </select> *æ­¤åŠŸèƒ½åˆ·æ–°åç”Ÿæ•ˆ
                </span></div>  
                <div class="setting-item" >
                <span><label for="family">é—¨æ´¾é€‰æ‹©ï¼š</label><select id="family" style="width:80px">
                        <option value="æ­¦å½“">æ­¦å½“</option>
                        <option value="åå±±">åå±±</option>
                        <option value="å°‘æ—">å°‘æ—</option>
                        <option value="å³¨çœ‰">å³¨çœ‰</option>
                        <option value="é€é¥">é€é¥</option>
                        <option value="ä¸å¸®">ä¸å¸®</option>
                        <option value="æ­¦é¦†">æ­¦é¦†</option>
                        <option value="æ€æ‰‹æ¥¼">æ€æ‰‹æ¥¼</option>
                    </select>
                </span>
                </div>`+UI.html_switch("autorelogin","è‡ªåŠ¨é‡è¿: ","auto_relogin")+UI.html_switch("shieldswitch","èŠå¤©é¢‘é“å±è”½å¼€å…³: ","shieldswitch")+UI.html_switch("silence","å®‰é™æ¨¡å¼:","silence")+UI.html_switch("dpssakada","æˆ˜æ–—ç»Ÿè®¡:","dpssakada")+UI.html_switch("funnycalc","funnyè®¡ç®—:","funnycalc")+"<h3>å±è”½é€‰é¡¹</h3>"+UI.html_lninput("shield","å±è”½äººç‰©å(ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+UI.html_lninput("shieldkey","å±è”½å…³é”®å­—(ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+"<h3>å¸ˆé—¨ä»»åŠ¡é…ç½®</h3>"+UI.html_switch("sm_loser","å¸ˆé—¨è‡ªåŠ¨æ”¾å¼ƒï¼š","sm_loser")+UI.html_switch("sm_any","å¸ˆé—¨ä»»åŠ¡æäº¤ç¨€æœ‰ï¼š","sm_any")+UI.html_switch("sm_price","å¸ˆé—¨è‡ªåŠ¨ç‰Œå­ï¼š","sm_price")+UI.html_switch("sm_getstore","å¸ˆé—¨è‡ªåŠ¨ä»“åº“å–ï¼š","sm_getstore")+`<h3>è‡ªå‘½ä»¤é…ç½®</h3>
                <div class="setting-item" >
                <span> <label for="zmlshowsetting"> è‡ªå‘½ä»¤æ˜¾ç¤ºä½ç½®ï¼š </label><select id="zmlshowsetting" style="width:80px">
                    <option value="0"> ç‰©å“æ  </option>
                    <option value="1"> æŠ€èƒ½æ ä¸‹æ–¹ </option>
                </select>
                </span></div> `+"<h3>æ­¦é“å¡”é…ç½®</h3>"+UI.html_lninput("wudao_pfm","æ­¦é“é‡Šæ”¾æŠ€èƒ½(ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+"<h3>æ‚é¡¹é…ç½®</h3>"+UI.html_switch("autorewardgoto","å¼€å¯è½¬å‘è·¯å¾„ï¼š","auto_rewardgoto")+UI.html_switch("busyinfo","æ˜¾ç¤ºæ˜è¿·ä¿¡æ¯ï¼š","busy_info")+UI.html_switch("saveAddr","ä½¿ç”¨è±ªå®…ä»“åº“ï¼š","saveAddr")+UI.html_switch("getitemShow","æ˜¾ç¤ºè·å¾—ç‰©å“ï¼š","getitemShow")+UI.html_input("statehml","å½“ä½ å„ç§çŠ¶æ€ä¸­æ–­åï¼Œè‡ªåŠ¨ä»¥ä¸‹æ“ä½œ(éƒ¨åˆ†åœ°ç‚¹ä¸æ‰§è¡Œ)ï¼š")+UI.html_input("backimageurl","èƒŒæ™¯å›¾ç‰‡url(å»ºè®®ä½¿ç”¨1920*1080åˆ†è¾¨ç‡å›¾ç‰‡)ï¼š")+UI.html_input("loginhml","ç™»å½•åæ‰§è¡Œå‘½ä»¤ï¼š")+`
                <div class="setting-item">
                <span> <label for="bagFull"> èƒŒåŒ…å·²æ»¡æç¤ºï¼š </label><select id="bagFull" style="width:80px">
                    <option value="0"> æ–‡å­—æé†’ </option>
                    <option value="1"> æç¤ºéŸ³ </option>
                    <option value="2"> è¯­éŸ³æé†’ </option>
                </select>
                </span></div>`+"<h3>æ¨é€é…ç½®</h3>"+UI.html_switch("pushSwitch","è¿œç¨‹é€šçŸ¥æ¨é€å¼€å…³(ä½¿ç”¨@pushæ¨é€é€šçŸ¥ï¼Œè¯­æ³•å‚è€ƒ@print)ï¼š","pushSwitch")+`
                <div class="setting-item">
                <span> <label for="pushType"> é€šçŸ¥æ¨é€æ–¹å¼(ä½¿ç”¨æ–¹æ³•åŠ ç¾¤çœ‹)ï¼š </label><select id="pushType" style="width:80px">
                    <option value="0"> Serveré…±(é™32å­—ç¬¦) </option>
                    <option value="1"> Bark iOS </option>
                    <option value="2"> PushPlus.plus(æ”¯æŒhtmlæ ‡ç­¾) </option>
                    <option value="3"> é£ä¹¦æœºå™¨äºº </option>
                    <option value="4"> Qmsgç§èŠ </option>
                    <option value="5"> Qmsgç¾¤èŠ </option>
                </select>
                </span></div> `+UI.html_lninput("pushToken","æ¨é€æ–¹å¼å¯¹åº”çš„Tokenæˆ–Key(åªè¦Keyä¸è¦å¡«æ•´ä¸ªç½‘å€)ï¼š")+"<h3>è‡ªåŠ¨BOSSé…ç½®</h3>"+UI.html_switch("marry_kiss","è‡ªåŠ¨å–œå®´ï¼š","automarry")+UI.html_switch("ks_Boss","è‡ªåŠ¨ä¼ åˆ°bossï¼š","autoKsBoss")+UI.html_lninput("auto_eq","BOSSå‡»æ€æ—¶è‡ªåŠ¨æ¢è£…ï¼š")+UI.html_lninput("ks_pfm","BOSSå«æ€å»¶æ—¶(ms)ï¼š ")+UI.html_lninput("ks_wait","BOSSå‡»æ€ç­‰å¾…å»¶è¿Ÿ(s)ï¼š ")+UI.html_input("auto_command","è¾“å…¥å–œå®´åŠbossåå‘½ä»¤(ç•™ç©ºä¸ºè‡ªåŠ¨æŒ–çŸ¿æˆ–ä¿®ç‚¼)ï¼š")+UI.html_input("blacklist","è¾“å…¥é»‘åå•bossåç§°(é»‘åå•bossä¸ä¼šå»æ‰“,ä¸­æ–‡,ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+"<h3>è‡ªåŠ¨æ–½æ³•é…ç½®</h3>"+UI.html_input("unauto_pfm","è‡ªåŠ¨æ–½æ³•é»‘åå•(å¡«æŠ€èƒ½ä»£ç ï¼Œä½¿ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+UI.html_switch("autopfmswitch","è‡ªåŠ¨æ–½æ³•å¼€å…³ï¼š","auto_pfmswitch")+UI.html_switch("autopfmmode","AIæ–½æ³•æ¨¡å¼ï¼š","auto_pfm_mode")+"<h3>ä»“åº“å­˜å‚¨é…ç½®</h3>"+UI.html_switch("autoupdateStore","è‡ªåŠ¨æ›´æ–°ä»“åº“æ•°æ®ï¼š","auto_updateStore")+UI.html_input("store_info","è‡ªåŠ¨å­˜å‚¨çš„ç‰©å“åç§°ï¼ˆè‡ªåŠ¨è·å¾—çš„ç‰©å“ä¿¡æ¯,éšä»“åº“å†…å®¹æ›´æ–°ï¼‰ï¼š")+UI.html_input("store_info2","æ‰‹åŠ¨æ·»åŠ çš„è‡ªåŠ¨å­˜ä»“ç‰©å“ä¿¡æ¯ï¼ˆä¸ä¼šéšä»“åº“å†…å®¹æ›´æ–°ï¼Œä½¿ç”¨åŠè§’é€—å·åˆ†éš”ï¼‰ï¼š")+UI.html_input("lock_info","å·²é”ç‰©å“åç§°(é”å®šç‰©å“ä¸ä¼šè‡ªåŠ¨ä¸¢å¼ƒ,ä½¿ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+UI.html_input("store_drop_info","è¾“å…¥è‡ªåŠ¨ä¸¢å¼ƒçš„ç‰©å“åç§°(ä½¿ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+UI.html_input("store_fenjie_info","è¾“å…¥è‡ªåŠ¨åˆ†è§£çš„ç‰©å“åç§°(ä½¿ç”¨åŠè§’é€—å·åˆ†éš”)ï¼š")+UI.html_input("autobuy","è‡ªåŠ¨å½“é“ºè´­ä¹°æ¸…å•ï¼š(ç”¨åŠè§’é€—å·åˆ†éš”)")+UI.html_input("autoSkillPaperSell","è‡ªåŠ¨å›æ”¶æ®‹é¡µæ¸…å•ï¼š(ç”¨åŠè§’é€—å·åˆ†éš”)")+"<h3>æŠ€èƒ½è‡ªå®šä¹‰</h3>"+UI.html_switch("zdyskillsswitch","è‡ªå®šä¹‰æŠ€èƒ½é¡ºåºå¼€å…³ï¼š","zdyskills")+UI.html_input("zdyskilllist","è‡ªå®šä¹‰æŠ€èƒ½é¡ºåºjsonæ•°ç»„ï¼š")+' <div class="setting-item" ><div class="item-commands"><span class="clear_skillJson">æ¸…ç©ºæŠ€èƒ½jsonæ•°ç»„</span></div></div>'+`

                <div class="setting-item" >
                <div class="item-commands"><span class="update_id_all">åˆå§‹åŒ–ID</span>
                                            <span class="clean_id_all">æ¸…ç©ºå•†å“IDé…ç½®</span></div>
                        </div>
                <div class="setting-item" >
                <div class="item-commands"><span class="update_store">æ›´æ–°å­˜ä»“æ•°æ®(è¦†ç›–)</span><span class="clean_dps">é‡ç½®ä¼¤å®³ç»Ÿè®¡</span></div>
                    </div>
                <div class="setting-item" >
                <div class="item-commands"><span class="backup_btn">å¤‡ä»½åˆ°äº‘</span><span class="load_btn">åŠ è½½äº‘é…ç½®</span></div>
            </div>

            <h3>è‡ªå®šä¹‰æŒ‰é’®</h3>`+UI.zdyBtnsetui()+" <h3>ç³»ç»Ÿ</h3> "},skillsPanel:`<div class="item-commands" style="text-align:center" id='skillsPanelUI'>
                <div style="margin-top:0.5em">
                    <div style="width:8em;float:left;text-align:left;padding:0px 0px 0px 2em;height:1.23em" id="wsmud_raid_left" @click='show'><wht>{{role}}</wht></div>
                    <div style="width:calc(100% - 16em);float:left;height:1.23em"><hig>å¥—è£…åˆ—è¡¨</hig></div>
                    <div style="width:8em;float:left;text-align:right;padding:0px 2em 0px 0px;height:1.23em" id="wsmud_raid_right">
                    <select style="width:80px" id="eqskills-opts" @change="eqskills_opts_change(eqskills_id)" v-model="eqskills_id">
                        <option value="none">é€‰æ‹©æ“ä½œ</option>
                        <option value="save">æ–°å»ºå¥—è£…</option>
                        <option value="covereq">è¦†ç›–å¥—è£…</option>
                        <option value="copyeq">å¤åˆ¶å‘½ä»¤</option>
                        <option value="delete">åˆ é™¤å¥—è£…</option>
                        <option value="uneqall">è„±å…‰è£…å¤‡</option>
                    </select></div>
                </div>
                <br><br>
				<div class="item-commands">
                <span class="zdy-item"  v-for="(item, index) in eqlistdel" @click='deleq(index)'
                        style="width: 120px;">
                        <div class="eqsname" style="width: 100%;">åˆ é™¤{{index}}</div>
                </span>
				</div>
				<div class="item-commands">
                <span class="zdy-item"  v-for="(item, index) in eqlist" @click='eq(index)'
                        style="width: 120px;">
                        <div class="eqsname" style="width:100%;">è£…å¤‡å¥—è£…:{{index}}</div>
                </span>

				</div>
                <div class="item-commands">
                <span class="zdy-item"  v-for="(item, index) in covereqlist" @click='covereq(index)'
                        style="width: 120px;">
                        <div class="eqsname" style="width:100%;">è¦†ç›–å¥—è£…:{{index}}</div>
                </span>

				</div>
                <br>
				<div class="item-commands">
                    <span class="zdy-item"  v-for="(item, index) in eqlist" @click='eqs(index)'
                        style="width: 120px;">
                        <div class="eqsname" style="width: 100%;">è£…å¤‡æŠ€èƒ½:{{index}}</div>
                </span>
				</div>
                <div class="item-commands">
                <span class="zdy-item"  v-for="(item, index) in cpeqlist" @click='copyeq(index)'
                        style="width: 120px;">
                        <div class="eqsname" style="width:100%;">å¤åˆ¶è£…å¤‡å¥—è£…:{{index}}</div>
                </span>

				</div>
                <br>
				<div class="item-commands">
                    <span class="zdy-item"  v-for="(item, index) in cpeqlist" @click='copyeqs(index)'
                        style="width: 120px;">
                        <div class="eqsname" style="width: 100%;">å¤åˆ¶è£…å¤‡æŠ€èƒ½:{{index}}</div>
                </span>
				</div>
                 <br>

                </div>
        `,zmlsetting:`<div class='zdy_dialog' style='text-align:right;width:280px' id="zmldialog">
    <div class="setting-item"><span><label for="zml_name"> è¾“å…¥è‡ªå®šä¹‰å‘½ä»¤åç§°:</label></span><span><input id="zml_name"
                style='width:80px' type="text" name="zml_name" value="" v-model="singnalzml.name"></span></div>
    <div class="setting-item"> <label for="zml_type"> è‡ªå‘½ä»¤ç±»å‹ï¼š </label><select id="zml_type" style="width:80px"
            v-model="singnalzml.zmlType">
            <option value="0"> æ’ä»¶åŸç”Ÿ </option>
            <option value="1"> Raidjsæµç¨‹ </option>
            <option value="2"> JSåŸç”Ÿ </option>
        </select> </div>
    <div class="setting-item"> <label for="zml_info"> è¾“å…¥è‡ªå®šä¹‰å‘½ä»¤(ç”¨åŠè§’åˆ†å·(;)åˆ†éš”):</label></div>
    <div class="setting-item"><textarea class="settingbox hide zdy-box" style="display: inline-block;" id='zml_info'
            v-model="singnalzml.zmlRun"></textarea></div>
    <div class="item-commands"><span class="getSharezml" @click="getShare"> æŸ¥è¯¢åˆ†äº« </span> <span class="editadd"
            @click="add"> ä¿å­˜ </span> <span class="editdel" @click="del"> åˆ é™¤ </span> </div>
    <div class="item-commands" id="zml_show">
        <span v-for="(item, index) in zmldata" @click="edit(item)">
            ç¼–è¾‘{{item.name}}
        </span>
        <br />
        <span v-for="(item, index) in zmldata" @click="showp(item)">
             <label v-if="item.zmlShow == '1'">å–æ¶ˆå¿«é€Ÿä½¿ç”¨</label><label v-else>å¿«é€Ÿä½¿ç”¨</label>{{item.name}}
        </span>
        <br />
        <span v-for="(item, index) in zmldata" @click="share(item)">
            åˆ†äº«{{item.name}}
        </span>
        <br />
    </div>
</div> `,zmlandztjkui:`<div class='zdy_dialog' style='text-align:right;width:280px' id="zmlandztjk">
     <div class="item-commands"> <span class="editzml" @click="zml"> ç¼–è¾‘è‡ªå‘½ä»¤ </span> </div>
     <div class="item-commands"> <span class="editztjk" @click="ztjk"> ç¼–è¾‘è‡ªå®šä¹‰ç›‘æ§ </span>
         <div class="item-commands"> <span class="startzdjk" @click="startjk"> æ³¨å…¥æ‰€æœ‰ç›‘æ§ </span> <span class="stopzdjk"
                 @click="stopjk"> æš‚åœæ‰€æœ‰ç›‘æ§
             </span>
         </div>
     </div>
     <div class="item-commands" id="zml_show">
                 <span v-for="(item, index) in zmldata" @click="run(item)">
                     {{item.name}}
                 </span>
     </div>
 </div>`,ztjksetting:`<div class='zdy_dialog' style='text-align:right;width:280px'>
    <div class="setting-item"> <label> è¯·æ‰“å¼€æ’ä»¶é¦–é¡µ,æŸ¥çœ‹æ–‡æ¡£åŠä¾‹å­,æœ¬äººè¡€é‡çŠ¶æ€ç›‘æ§ è¯·æŒ‰å¦‚ä¸‹è§„åˆ™è¾“å…¥å…³é”®å­— 90|90 è¿™æ ·ç›‘æ§çš„æ˜¯hp 90% mp 90% ä»¥ä¸‹è§¦å‘</label></div>
    <div class="setting-item"> <label for="ztjk_name"> åç§°:</label><input id="ztjk_name" style='width:80px' type="text"
            name="ztjk_name" value=""></div>
    <div class="setting-item"><label for="ztjk_type"> ç±»å‹(type):</label><select style='width:80px' id="ztjk_type">
            <option value="status"> çŠ¶æ€(status) </option>
            <option value="text"> æ–‡æœ¬(text) </option>
            <option value="msg"> èŠå¤©(msg) </option>
            <option value="die"> æ­»äº¡(die) </option>
            <option value="itemadd"> äººç‰©åˆ·æ–°(itemadd) </option>
            <option value="room"> åœ°å›¾åä¸æˆ¿é—´äººç‰©(room) </option>
            <option value="dialog"> èƒŒåŒ…ç›‘æ§(dialog) </option>
            <option value="combat"> æˆ˜æ–—çŠ¶æ€(combat) </option>
            <option value="sc"> è¡€é‡çŠ¶æ€(sc) </option>
            <option value="enapfm"> æŠ€èƒ½ç›‘æ§(enapfm) </option>
            <option value="dispfm"> æŠ€èƒ½ç›‘æ§(dispfm) </option>
        </select></div>
    <div class="setting-item"><span id='actionp' style='display:block'><label for="ztjk_action">
                åŠ¨ä½œ(action):</label><input id="ztjk_action" style='width:80px' type="text" name="ztjk_action"
                value=""></span></div>
    <div class="setting-item"><span><label for="ztjk_keyword"> å…³é”®å­—(ä½¿ç”¨åŠè§’ | åˆ†å‰²):</label><input id="ztjk_keyword"
                style='width:80px' type="text" name="ztjk_keyword" value=""></span></div>
    <div class="setting-item"><span><label for="ztjk_ishave"> è§¦å‘å¯¹è±¡: </label><select style='width:80px' id="ztjk_ishave">
                <option value="0"> å…¶ä»–äºº </option>
                <option value="1"> æœ¬äºº </option>
                <option value="2"> ä»…NPC </option>
            </select></span></div>
    <div class="setting-item"> <span id='senduserp' style='display:block'><label for="ztjk_senduser"> MSG/å…¶ä»–äººåç§°(ä½¿ç”¨åŠè§’ |
                åˆ†å‰²):</label><input id="ztjk_senduser" style="width:80px;" type="text" name="ztjk_senduser"
                value=""></span></div>
    <div class="setting-item"> <span style='display:block'><label> Buffå±‚æ•°:</label><input id="ztjk_maxcount"
                style="width:80px;" type="text" name="ztjk_maxcount" value=""></span></div>
    <div class="setting-item"> <span style='display:block'><label> çŠ¶æ€ç›‘æ§æç¤º:</label><select style='width:80px'
                id="ztjk_istip">
                <option value="1"> æç¤º </option>
                <option value="0"> ä¸æç¤º </option>
            </select></span></div>
    <div class="setting-item"><span><label for="ztjk_send"> è¾“å…¥è‡ªå®šä¹‰å‘½ä»¤(ç”¨åŠè§’åˆ†å·(;)åˆ†éš”):</label></span></div>
    <div class="setting-item"> <textarea class="settingbox hide zdy-box" style="display: inline-block;"
            id='ztjk_send'></textarea></div>
    <div class="item-commands"><span class="ztjk_sharedfind"> æŸ¥è¯¢åˆ†äº« </span> <span class="ztjk_editadd"> ä¿å­˜ </span> <span
            class="ztjk_editdel"> åˆ é™¤ </span></div>
    <div class="item-commands" id="ztjk_show"></div>
    <div class="item-commands" id="ztjk_set"></div>
</div> `,jsquivue:`
                    <div class="JsqVueUI">
                    <div class="item-commands">
                <span @click='qnjs_btn'>æ½œèƒ½è®¡ç®—</span>
                <span @click='lxjs_btn'>ç»ƒä¹ æ—¶é—´åŠæ½œèƒ½è®¡ç®—</span>
                <span @click='khjs_btn'>å¼€èŠ±è®¡ç®—</span>
                <span @click='zcjs_btn'>è‡ªåˆ›ç­‰çº§è®¡ç®—</span>
                <span  @click='getskilljson'>æå–æŠ€èƒ½å±æ€§(å¯ç”¨äºè‹è½»æ¨¡æ‹Ÿå™¨)</span>
                <span  @click='autoAddLianxi'>è‡ªåŠ¨å°†æœ€ä½ç­‰çº§æŠ€èƒ½æ·»åŠ åˆ°ç¦»çº¿ç»ƒä¹ </span>
            </div>
            <div class="item-commands">
                <span  @click='onekeydaily'>ä¸€é”®æ—¥å¸¸</span>
                <span  @click='onekeypk'>è‡ªåŠ¨æ¯”è¯•</span>
                <span  @click='onekeysansan'>å¯¼å…¥ç™½ä¸‰ä¸‰æ‡’äººåŒ…ï¼ˆä¾èµ–raid.jsï¼‰</span>
                <span  @click='onelddh'>æ¥ç‚¹åŠ¨ç”»ï¼ˆä¾èµ–raid.jsï¼‰</span>
            </div>
            <div class="item-commands">
                <span  @click="onekeystore">å­˜ä»“åŠè´©å–</span>
                <span  @click='onekeysell'>ä¸¢å¼ƒåŠè´©å–</span>
                <span  @click='onekeyfenjie'>åˆ†è§£åŠè´©å–</span>
            </div>
            <div class="item-commands">
                <span @click='updatestore'>æ›´æ–°ä»“åº“æ•°æ®(è¦†ç›–)</span>
                <span @click='sortstore'>æ’åºä»“åº“</span>
                <span @click='sortbag'>æ’åºèƒŒåŒ…</span>
                <span @click='dsrw'>å®šæ—¶ä»»åŠ¡</span>
                <span @click='cleandps'>æ¸…ç©ºä¼¤å®³</span>
                <span @click='cleankksboss'>ä¸å†æç¤ºå©šå®´åŠbossä¼ é€ä¿¡æ¯</span>
            </div>
            <div class="item-commands">
                <span @click='onekeyyaota'>ä¸€é”®å¦–å¡”</span>
                <span @click='onekeydelaytest'>å»¶è¿Ÿæµ‹è¯•</span>
                <span @click='yuanshen'>åŸç¥</span>
            </div>
            </div>`,lxjsui:`
                       <div style="width:50%;float:left" class='StudyTimeCalc'>
     <div class="setting-item"> <span>ç»ƒä¹ æ—¶é—´è®¡ç®—å™¨</span></div>
     <div class="setting-item">å…ˆå¤©æ‚Ÿæ€§:<input type="number"  placeholder="å…ˆå¤©æ‚Ÿæ€§" style="width:50%"
             class="mui-input-speech" v-model=jsqsx.xtwx></div>
     <div class="setting-item">åå¤©æ‚Ÿæ€§:<input type="number"  placeholder="åå¤©æ‚Ÿæ€§" style="width:50%"
             class="mui-input-speech" v-model=jsqsx.htwx></div>
     <div class="setting-item">ç»ƒä¹ æ•ˆç‡:<input type="number"  placeholder="ç»ƒä¹ æ•ˆç‡" style="width:50%"
             class="mui-input-speech" v-model=jsqsx.lxxl></div>
     <div class="setting-item">åˆå§‹ç­‰çº§:<input type="number" placeholder="åˆå§‹ç­‰çº§" style="width:50%"
             class="mui-input-speech" v-model=jsqsx.clevel></div>
     <div class="setting-item"> ç›®æ ‡ç­‰çº§:<input type="number" placeholder="ç›®æ ‡ç­‰çº§" style="width:50%"
             v-model=jsqsx.mlevel></div>
     <div class="setting-item">æŠ€èƒ½é¢œè‰²: <select style="width:50%" v-model=jsqsx.color>
             <option value='0'>é€‰æ‹©æŠ€èƒ½é¢œè‰²</option>
             <option value='1' style="color: #c0c0c0;">ç™½è‰²</option>
             <option value='2' style="color:#00ff00;">ç»¿è‰²</option>
             <option value='3' style="color:#00ffff;">è“è‰²</option>
             <option value='4' style="color:#ffff00;">é»„è‰²</option>
             <option value='5' style="color:#912cee;">ç´«è‰²</option>
             <option value='6' style="color: #ffa600;">æ©™è‰²</option>
             <option value='7' style="color: #CC0000;">çº¢è‰²</option>
         </select></div>
                <div class="setting-item">
        <div class="item-commands"><span @click="lxjscalc">è®¡ç®—</span></div>
             </div>
    </div>`,qnjsui:` <div style="width:50%;float:left" class="QianNengCalc">
    <div class="setting-item"> <span>æ½œèƒ½è®¡ç®—å™¨</span></div>
    <div class="setting-item">åˆå§‹ç­‰çº§:<input type="number" placeholder="åˆå§‹ç­‰çº§" style="width:50%"
            class="mui-input-speech" v-model='qnsx.c'>
    </div>
    <div class="setting-item"> ç›®æ ‡ç­‰çº§:<input type="number" v-model='qnsx.m' placeholder="ç›®æ ‡ç­‰çº§" style="width:50%">
    </div>
    <div class="setting-item"> æŠ€èƒ½é¢œè‰²:<select id="se" style="width:50%" v-model='qnsx.color'>
            <option value='0'>é€‰æ‹©æŠ€èƒ½é¢œè‰²</option>
            <option value='1' style="color: #c0c0c0;">ç™½è‰²</option>
            <option value='2' style="color:#00ff00;">ç»¿è‰²</option>
            <option value='3' style="color:#00ffff;">è“è‰²</option>
            <option value='4' style="color:#ffff00;">é»„è‰²</option>
            <option value='5' style="color:#912cee;">ç´«è‰²</option>
            <option value='6' style="color: #ffa600;">æ©™è‰²</option>
        </select>
        </div>
        <div class="setting-item">
        <div class="item-commands"><span @click="qnjscalc">è®¡ç®—</span></div>
             </div>

</div>`,khjsui:`<div style="width:50%;float:left" class="KaihuaCalc">
    <div class="setting-item"><span>å¼€èŠ±è®¡ç®—å™¨</span></div>
    <div class="setting-item"> å½“å‰å†…åŠ›:<input type="number" placeholder="å½“å‰å†…åŠ›" style="width:50%"
            class="mui-input-speech" v-model="khsx.nl"></div>
    <div class="setting-item"> å…ˆå¤©æ ¹éª¨:<input type="number" placeholder="å…ˆå¤©æ ¹éª¨" style="width:50%"
        v-model="khsx.xg"></div>
    <div class="setting-item"> åå¤©æ ¹éª¨:<input type="number" placeholder="åå¤©æ ¹éª¨" style="width:50%"
        v-model="khsx.hg"></div>
    <div class="setting-item">      <div class="item-commands"><span @click="khjscalc" >è®¡ç®—</span></div></div>
    <div class="setting-item"> <label>äººèŠ±åˆ†å€¼ï¼š5000 åœ°èŠ±åˆ†å€¼ï¼š6500 å¤©èŠ±åˆ†å€¼ï¼š8000</label></div>
</div>`,zcjsui:`<div style="width:50%;float:left" class="ZiChuangCalc">
    <div class="setting-item"><span>è‡ªåˆ›ç­‰çº§è®¡ç®—å™¨</span></div>
    <div class="setting-item"> è‡ªåˆ›ç­‰çº§:<input type="number" placeholder="è‡ªåˆ›ç­‰çº§" style="width:50%"
            class="mui-input-speech" v-model="zcsx.level"></div>
    <div class="setting-item"> ç›®æ ‡å±æ€§ç™¾åˆ†æ¯”:<input type="number" placeholder="ç›®æ ‡å±æ€§ç™¾åˆ†æ¯”" style="width:50%"
        v-model="zcsx.percentage"></div>

    <div class="setting-item">      <div class="item-commands"><span @click="zcjscalc" >è®¡ç®—</span></div></div>

</div>`,lyui:`<div class='zdy_dialog' id="LianYao" style='text-align:right;width:280px'> æœ‰ç©ºçš„è¯è¯·ç‚¹ä¸ªstar,æ‚¨çš„æ”¯æŒæ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ› <a target="_blank"
        href="https://github.com/knva/wsmud_plugins">https://github.com/knva/wsmud_plugins</a> è¯æ–¹é“¾æ¥:<a target="_blank"
        href="https://emeisuqing.github.io/wsmud.old/yaofang/">https://emeisuqing.github.io/wsmud.old/yaofang/</a>
    <div class="setting-item"> <span> <label for="medicine_level"> çº§åˆ«é€‰æ‹©ï¼š </label><select style='width:80px'
                id="medicine_level" v-model="level">
                <option value="1">ç»¿è‰²</option>
                <option value="2">è“è‰²</option>
                <option value="3">é»„è‰²</option>
                <option value="4">ç´«è‰²</option>
                <option value="5">æ©™è‰²</option>
                <option value="6">çº¢è‰²</option>
            </select></span></div>
    <div class="setting-item"> æ•°é‡:<span><input id="mednum" v-model="num" style="width:80px;" type="number" name="mednum" value="1">
        </span></div>
    <div class="setting-item"> <span><label for="medicint_info"> è¾“å…¥ä½¿ç”¨çš„é¡ºåº(ä½¿ç”¨åŠè§’é€—å·åˆ†éš”,å¤šé…æ–¹ä½¿ç”¨ | åˆ†å‰²):</label></span></div>
    <div class="setting-item"><textarea v-model="info"  class="settingbox hide zdy-box" style="display: inline-block;"
            id='medicint_info'>çŸ³æ¥ å¶,é‡‘é“¶èŠ±,é‡‘é“¶èŠ±,é‡‘é“¶èŠ±,å½“å½’</textarea></div>
    <div class="item-commands"> <span class="startDev" @click="startDev"> å¼€å§‹ </span><span class="stopDev" @click="stopDev"> åœæ­¢ </span> </div>
</div>`,timeoutui:`<div class='zdy_dialog' style='text-align:right;width:280px'> æ³¨æ„,å¯ä»¥ç•™ç©ºçš„æ—¶æˆ–è€…åˆ†,è¿™æ ·å°±æ˜¯æ¯åˆ†é’Ÿ/å°æ—¶ çš„xç§’è§¦å‘ä»»åŠ¡,ç§’ä¸ºå¿…å¡«é¡¹ç›® <div class="setting-item">    <span>ä»»åŠ¡å:<input type="text" id="questname" placeholder="ä»»åŠ¡å" style="width:50%"></span></div> <div class="setting-item">     <label for = "rtype"> è¿è¡Œæ¬¡æ•° </label><select style='width:80px' id="rtype"></div> <option value="1">ä¸€æ¬¡</option> <option value="2">æ¯å¤©</option> </select></span></div> <div class="setting-item">  <span>æ—¶:<input type="number" id="ht" placeholder="æ—¶" style="width:50%"></span></div> <div class="setting-item">   <span>åˆ†:<input type="number" id="mt" placeholder="åˆ†" style="width:50%"></span></div> <div class="setting-item">  <span>ç§’:<input type="number" id="st" placeholder="ç§’" style="width:50%"></span></div> <div class="setting-item">  <span><label for="zml_info"> è¾“å…¥è‡ªå®šä¹‰å‘½ä»¤(ç”¨åŠè§’åˆ†å·(;)åˆ†éš”):</label></span></div> <div class="setting-item">   <textarea class = "settingbox hide zdy-box"style = "display: inline-block;"id = 'zml_info'></textarea></div> <div class = "item-commands"> <span class = "startQuest"> å¼€å§‹ </span><span class = "removeQuest"> åˆ é™¤ </span>  </div> <div class='questlist item-commands'></div> </div>`,toui:[`<div class='item-commands'><span cmd = "$to æ‰¬å·åŸ-è¡™é—¨æ­£å…" > è¡™é—¨ </span>
            <span cmd = "$to æ‰¬å·åŸ-å½“é“º" > å½“é“º </span>
            <span cmd = "$to æ‰¬å·åŸ-é†‰ä»™æ¥¼" > é†‰ä»™ </span>
            <span cmd = "$to æ‰¬å·åŸ-æ‚è´§é“º" > æ‚è´§ </span>
            <span cmd = "$to æ‰¬å·åŸ-æ‰“é“é“º" > æ‰“é“ </span>
            <span cmd = "$to æ‰¬å·åŸ-é’±åº„" > é’±åº„ </span>
            <span cmd = "$to æ‰¬å·åŸ-è¯é“º" > è¯é“º </span>
            <span cmd = "$to æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†" > æ­¦é¦† </span>
            <span cmd = "$to æ‰¬å·åŸ-é•–å±€æ­£å…" > é•–å±€ </span>
            <span cmd = "$to ä½æˆ¿" > ä½æˆ¿ </span>
            <span cmd = "$to æ‰¬å·åŸ-æ­¦åº™" > æ­¦åº™ </span>
            <span cmd = "$to å¸®ä¼š-å¤§é™¢" > å¸®æ´¾ </span>
            <span cmd = "$to æ‰¬å·åŸ-èµŒåœº" > èµŒåœº </span>
            <span cmd = "$to æ‰¬å·åŸ-æœ‰é—´å®¢æ ˆ" > å®¢æ ˆ </span>
            <span cmd = "$to æ‰¬å·åŸ-æ“‚å°" > æ“‚å° </span>
            <span cmd = "$to æ‰¬å·åŸ-çŸ¿å±±" > çŸ¿å±± </span></div>`,`<div class='item-commands'><span cmd = "$to æ­¦å½“æ´¾-åå±±å°é™¢" >æŒé—¨</span>
             <span cmd = "$to æ­¦å½“æ´¾-çŸ³é˜¶" >åå‹¤</span>
             <span cmd = "$to æ­¦å½“æ´¾-ä¸‰æ¸…æ®¿" >ä¸‰æ¸…æ®¿</span></div>`,`<div class='item-commands'><span cmd = "$to å°‘æ—æ´¾-æ–¹ä¸ˆæ¥¼" >æŒé—¨</span>
             <span cmd = "$to å°‘æ—æ´¾-å±±é—¨æ®¿" >åå‹¤</span>
             <span cmd = "$to å°‘æ—æ´¾-å¤©ç‹æ®¿" >å¤©ç‹æ®¿</span></div>`,`<div class='item-commands'><span cmd = "$to åå±±æ´¾-å®¢å…" >æŒé—¨</span>
             <span cmd = "$to åå±±æ´¾-ç»ƒæ­¦åœº" >åå‹¤</span>
             <span cmd = "$to åå±±æ´¾-è½é›å³°" >è½é›å³°</span>
             <span cmd = "$to åå±±æ´¾-æ—é—´å°å±‹" >å°ä¸å¹³</span></div>`,`<div class='item-commands'><span cmd = "$to å³¨çœ‰æ´¾-æ¸…ä¿®æ´" >æŒé—¨</span>
            <span cmd = "$to å³¨çœ‰æ´¾-èµ°å»Š" >åå‹¤</span>
            <span cmd = "$to å³¨çœ‰æ´¾-å°å±‹" >å‘¨èŠ·è‹¥</span>
            <span cmd = "$to å³¨çœ‰æ´¾-å¤§æ®¿" >é™å¿ƒ</span></div>`,`<div class='item-commands'><span cmd = "$to é€é¥æ´¾-åœ°ä¸‹çŸ³å®¤" >æŒé—¨</span>
             <span cmd = "$to é€é¥æ´¾-æ—é—´å°é“" >åå‹¤</span>
             <span cmd = "$to é€é¥æ´¾-æœ¨å±‹" >è–›æ…•å</span>
             <span cmd = "$to é€é¥æ´¾-ç»ƒåŠŸæˆ¿" >æœ¨æ¡©</span></div>`,`<div class='item-commands'><span cmd = "$to ä¸å¸®-æ—é—´å°å±‹" >æŒé—¨</span>
             <span cmd = "$to ä¸å¸®-æš—é“;go east;" >åå‹¤</span>
             <span cmd = "$to ä¸å¸®-åœŸåœ°åº™" >åœŸåœ°åº™</span></div>`,`<div class='item-commands'><span cmd = "$to æ€æ‰‹æ¥¼-ä¹¦æˆ¿" >æŒé—¨</span>
             <span cmd = "$to æ€æ‰‹æ¥¼-ä¼‘æ¯å®¤;" >åå‹¤</span></div>`,`<div class='item-commands'><span cmd = "@call è‡ªåŠ¨è¥„é˜³" >è‡ªåŠ¨è¥„é˜³</span></div>`,`<div class='item-commands'><span cmd = "@call è‡ªåŠ¨æ­¦é“å¡”" >è‡ªåŠ¨æ­¦é“å¡”</span>
            <span cmd = "$goyt">å¦–å¡”</span>
            <span cmd = "$gogzm">å¤å®—é—¨</span>
            <span cmd = "$godddb">å¤§æ®¿åº•éƒ¨</span></div>`],fbui:function(e,t,o){let n="<div class='item-commands'>";return unsafeWindow&&unsafeWindow.ToRaid?(ToRaid.existAutoDungeon(e+" 0")&&(n+=`<span cmd = "@fb ${e} 0" >è‡ªåŠ¨å‰¯æœ¬-${e}</span>`),o&&ToRaid.existAutoDungeon(e+" 1")&&(n+=`<span cmd = "@fb ${e} 1" >è‡ªåŠ¨å‰¯æœ¬-${e}-å›°éš¾</span>`),t&&ToRaid.existAutoDungeon(e+" 2")&&(n+=`<span cmd = "@fb ${e} 2" >è‡ªåŠ¨å‰¯æœ¬-${e}-ç»„é˜Ÿ</span>`)):n+="æœªå®‰è£…Raid.jsæ’ä»¶","<div class='item-commands'>"==n?"<div>æš‚æ— è‡ªåŠ¨å‰¯æœ¬è„šæœ¬,æ¬¢è¿å…±äº«ã€‚å¯ä»¥åˆ°ä¸‰ä¸‰ä»“åº“å¯»æ‰¾æ›´å¤šè„šæœ¬ã€‚</div>":n+"</div>"},itemui:function(e){let t=`<div class="item-commands ">
            <span class = "addstore" cmd='$addstore ${e=e.toLowerCase()}'> æ·»åŠ åˆ°å­˜ä»“ </span>`;return 0<=lock_list.indexOf(e)?t+=`<span class = "dellock" cmd='$dellock ${e}'> ç§»é™¤ç‰©å“é” </span>`:t+=`<span class = "addlock" cmd='$addlock ${e}'> æ·»åŠ ç‰©å“é” </span>`,0<=e.indexOf("â˜…")||0<=e.indexOf("â˜†")||0<=e.indexOf("hio")||0<=e.indexOf("hir")||0<=e.indexOf("ord")||(0<=e.indexOf("æ®‹é¡µ")&&"æ­¦é“æ®‹é¡µ"!=e?t+=`<span class = "addzxbuy"  cmd='$addzxbuy ${e}'> æ·»åŠ åˆ°å›æ”¶ </span>`:t+=`<span class = "addfenjieid"  cmd='$addfenjieid ${e}'> æ·»åŠ åˆ°åˆ†è§£ </span>`,-1==lock_list.indexOf(e)&&(t+=`<span class = "adddrop" cmd='$adddrop ${e}'> æ·»åŠ åˆ°ä¸¢å¼ƒ </span>`)),t+="</div>"}},G={id:void 0,state:void 0,room_name:void 0,family:void 0,items:new Map,stat_boss_success:0,stat_boss_find:0,stat_xiyan_success:0,stat_xiyan_find:0,cds:new Map,in_fight:!1,fight_id:"",auto_preform:!1,auto_pfm_mode:!1,can_auto:!1,level:void 0,getitemShow:void 0,wk_listener:void 0,status:new Map,score:void 0,party:"",yaoyuan:0,yaotaFlag:!1,yaotaCount:0,jy:0,qn:0,selfStatus:[],wsdelaySetTime:void 0,wsdelaySetCount:void 0,wsdelay:void 0,enable_skills:[{type:"unarmed",name:"none"},{type:"force",name:"none"},{type:"parry",name:"none"},{type:"dodge",name:"none"},{type:"sword",name:"none"},{type:"throwing",name:"none"},{type:"blade",name:"none"},{type:"whip",name:"none"},{type:"club",name:"none"},{type:"staff",name:"none"}],eqs:[],isGod:function(){return null!=G.level&&(0<=G.level.indexOf("æ­¦å¸")||0<=G.level.indexOf("æ­¦ç¥")||0<=G.level.indexOf("å‰‘ç¥")||0<=G.level.indexOf("åˆ€çš‡")||0<=G.level.indexOf("å…µä¸»")||0<=G.level.indexOf("æˆ˜ç¥"))},cookie:void 0,connected:!1},GI={gcdThread:null,init:function(){WG.add_hook("items",function(e){WG.saveRoomstate(e)});var n=!1;WG.add_hook(["dialog","text"],function(e){if("dialog"==e.type){null==WG.packup_listener&&null!=e.id&&null!=e.store&&n&&(WG.SendCmd("store"),n=!1);var t=e.stores;if(null!=t){store_list=[];for(var o of t)store_list.push(o.name.toLowerCase());zdy_item_store=store_list.join(","),$("#store_info").val(zdy_item_store),GM_setValue(roleid+"_zdy_item_store",zdy_item_store),store_list=store_list.concat(zdy_item_store2.split(","))}}else auto_updateStore=GM_getValue(roleid+"_auto_updateStore",auto_updateStore),null==WG.sort_hook&&"å¼€"==auto_updateStore&&e.msg.indexOf("ä¹¦æ¶")<0&&(/^ä½ æŠŠ(.+)å­˜å…¥ä»“åº“ã€‚$/.test(e.msg)||/^ä½ ä»ä»“åº“é‡Œå–å‡º(.+)ã€‚$/.test(e.msg))&&(n=!0)}),WG.add_hook("dialog",function(e){if("pack"==e.dialog&&null!=e.items&&(packData=e.items,eqData=e.eqs,G.eqs=e.eqs),"pack"==e.dialog&&null!=e.uneq&&(G.eqs[e.uneq]=null),"pack"==e.dialog&&null!=e.eq&&(G.eqs[e.eq]={id:e.id,name:""}),"skills"==e.dialog){if(null!=e.enable&&"å¼€"==zdyskills&&(messageAppend("æ£€æµ‹åˆ°æ›´æ¢æŠ€èƒ½,è¯·åˆ·æ–°é‡æ–°è·å–æŠ€èƒ½æ•°æ®!"),zdyskills="å…³",GM_setValue(roleid+"_zdyskilllist",""),GM_setValue(roleid+"_zdyskills",zdyskills)),e.items)for(var t of e.items)if(0<=t.name.indexOf("åŸºæœ¬"))if(t.enable_skill){for(var o of G.enable_skills)if(o.type==t.id){o.name=t.enable_skill;break}}else for(var n of G.enable_skills)if(n.type==t.id){n.name="none";break}if(null!=e.enable)for(var s of G.enable_skills)if(s.type==e.id){s.name=e.enable;break}}"party"==e.dialog&&(G.party=e.name)}),WG.add_hook(["status","login","exits","room","items","itemadd","itemremove","sc","text","state","msg","perform","clearDistime","dispfm","combat","die"],function(n){switch(n.type){case"login":G.id=n.id,G.connected=!0,WG.online=!0;break;case"exits":G.exits=new Map,n.items.north&&G.exits.set("north",{exits:n.items.north}),n.items.south&&G.exits.set("south",{exits:n.items.south}),n.items.east&&G.exits.set("east",{exits:n.items.east}),n.items.west&&G.exits.set("west",{exits:n.items.west}),n.items.northup&&G.exits.set("northup",{exits:n.items.northup}),n.items.southup&&G.exits.set("southup",{exits:n.items.southup}),n.items.eastup&&G.exits.set("eastup",{exits:n.items.eastup}),n.items.westup&&G.exits.set("westup",{exits:n.items.westup}),n.items.northdown&&G.exits.set("northdown",{exits:n.items.northdown}),n.items.southdown&&G.exits.set("southdown",{exits:n.items.southdown}),n.items.eastdown&&G.exits.set("eastdown",{exits:n.items.eastdown}),n.items.westdown&&G.exits.set("westdown",{exits:n.items.westdown}),n.items.up&&G.exits.set("up",{exits:n.items.up}),n.items.down&&G.exits.set("down",{exits:n.items.down}),n.items.enter&&G.exits.set("enter",{exits:n.items.enter}),n.items.out&&G.exits.set("out",{exits:n.items.out});break;case"room":var s=n.path.split("/");G.map=s[0],G.room=s[1],"home"==G.map||"kuang"==G.room?G.can_auto=!0:G.can_auto=!1,G.room_name=n.name,G.in_fight&&(G.in_fight=!1,WG.auto_preform("stop"),WG.clean_dps());break;case"items":G.items=new Map;for(var e=0;e<n.items.length;e++){var i=n.items[e];if(i.id){if(i.id==G.id&&null!=i.status){G.selfStatus=[];for(var a=0;a<i.status.length;a++)G.selfStatus.push(i.status[a].sid)}let e=$.trim($("<body>"+i.name+"</body>").text());var l=e.lastIndexOf(" "),r=e.lastIndexOf("<");let t="",o="";0<=r&&(o=e.substr(r+1,2)),0<=l&&(t=e.substr(0,l),e=e.substr(l+1).replace(/<.*>/g,"")),G.items.set(i.id,{name:e,title:t,state:o,max_hp:i.max_hp,max_mp:i.max_mp,hp:i.hp,mp:i.mp,p:i.p,damage:0,status:i.status})}}break;case"itemadd":if(n.id){let e=$.trim($("<body>"+n.name+"</body>").text());var s=e.lastIndexOf(" "),d=e.lastIndexOf("<");let t="",o="";0<=s&&(t=e.substr(0,s),0<=d&&(o=e.substr(d+1,2)),e=e.substr(s+1).replace(/<.*>/g,"")),G.items.set(n.id,{name:e,title:t,state:o,max_hp:n.max_hp,max_mp:n.max_mp,hp:n.hp,mp:n.mp,p:n.p,damage:0,status:n.status})}break;case"itemremove":G.items.delete(n.id);break;case"sc":d=G.items.get(n.id);void 0!==n.hp&&(d.hp=n.hp,n.id!=G.id)&&(G.scid=n.id),void 0!==n.mp&&(d.mp=n.mp),n.id==G.id&&(null!=n.hp&&(G.hp=n.hp),null!=n.max_hp&&(G.maxHp=n.max_hp),null!=n.mp&&(G.mp=n.mp),null!=n.max_mp)&&(G.maxMp=n.max_mp);break;case"perform":G.skills=n.skills,""==zdyskilllist&&(zdyskilllist=JSON.stringify(n.skills),GM_setValue(roleid+"_zdyskilllist",zdyskilllist));break;case"clearDistime":G.cds.forEach(function(e,t){G.cds.set(t,!1)});case"dispfm":n.id&&(G.cds.set(n.id,!0),o=n.id,setTimeout(function(){G.cds.set(o,!1);var e={data:JSON.stringify({type:"enapfm",id:o})};WG.receive_message(e)},n.distime)),n.rtime&&(G.gcd&&clearTimeout(GI.gcdThread),G.gcd=!0,GI.gcdThread=setTimeout(function(){G.gcd=!1},n.rtime));break;case"combat":n.start&&(G.in_fight=!0,battletime=new Date,WG.auto_preform()),n.end&&(G.in_fight=!1,WG.auto_preform("stop"),WG.clean_dps());break;case"status":if(null!=n.count&&G.status.set(n.id,{sid:n.sid,count:n.count}),n.id==G.id)if("add"==n.action)G.selfStatus.push(n.sid),n.duration&&setTimeout(()=>{G.selfStatus.remove(n.sid)},n.duration-(n.overtime||0));else if("remove"==n.action){var t=[];for(let e=0;e<G.selfStatus.length;e++)G.selfStatus[e]!=n.sid&&t.push(G.selfStatus[e]);G.selfStatus=t}else"clear"==n.action&&(G.selfStatus=[]);if("å¼€"===busy_info)if(n.id==G.id){if("add"==n.action&&("busy"==n.sid||"faint"==n.sid)){var o=n.id;if(messageAppend(`ä½ è¢«${n.name}äº†${n.duration/1e3}ç§’`,2,0),"ç»Šå­—è¯€"==n.name)return}}else"add"!=n.action||"busy"!=n.sid&&"faint"!=n.sid&&"chidun"!=n.sid&&"unarmed"!=n.sid||messageAppend(`${G.items.get(n.id).name}è¢«${n.name}äº†${n.duration/1e3}ç§’`,2,0);var u=G.items.get(n.id);if(null!=u)if("add"==n.action)null==u.status&&(u.status=[]),u.status.push({sid:n.sid,name:n.name,duration:n.duration,overtime:0});else if("remove"==n.action){for(let e=0;e<u.status.length;e++)if(u.status[e].sid==n.sid){u.status.splice(e,1);break}}else if("clear"==n.action)for(let e=0;e<u.status.length;e++)u.status.splice(e,1);break;case"text":0<=n.msg.indexOf("è¿˜æ²¡å‡†å¤‡å¥½ï¼Œä½ è¿˜ä¸èƒ½ä½¿ç”¨ã€‚")&&(G.gcd||(G.gcd=!0,setTimeout(()=>{G.gcd=!1},500))),(0<=n.msg.indexOf("ä¸è¦æ€¥")||0<=n.msg.indexOf("ä½ ç°åœ¨æ‰‹å¿™è„šä¹±")||0<=n.msg.indexOf("ä½ æ­£åœ¨æ˜è¿·")||0<=n.msg.indexOf("ä½ ä¸Šä¸ªæŠ€èƒ½"))&&G.auto_preform&&(G.gcd||(G.gcd=!0,setTimeout(()=>{G.gcd=!1},500)));break;case"die":G.selfStatus=[],""!=die_str&&null==n.relive&&textShow(die_str)}}),WG.add_hook("state",function(e){console.dir(e),"state"!=e.type||null!=e.state||0<=G.room_name.indexOf("å‰¯æœ¬")||0<=G.room_name.indexOf("è¥„é˜³")||0<=G.room_name.indexOf("çŸ¿å±±")||0<=G.room_name.indexOf("ç»ƒåŠŸæˆ¿")||(statehml=GM_getValue(roleid+"_statehml",statehml),WG.SendCmd(statehml))}),WG.add_hook("dialog",function(i){if("pack"==i.dialog&&null!=i.items&&0<=i.items.length){for(var e=0;e<i.items.length;e++)0<=i.items[e].name.indexOf("é“é•")&&(equip["é“é•"]=i.items[e].id);for(var t=0;t<i.eqs.length;t++)null!=i.eqs[t]&&0<=i.eqs[t].name.indexOf("é“é•")&&(equip["é“é•"]=i.eqs[t].id)}else if("pack"==i.dialog&&null!=i.desc)messageClear(),messageAppend(`<div class="item-commands ">
                <span class = "copyid" data-clipboard-target = ".target1" > `+i.desc.split("\n")[0]+":"+i.id+`å¤åˆ¶åˆ°å‰ªè´´æ¿ </span></div>
                         `),$(".copyid").off("click"),$(".copyid").on("click",()=>{GM_setClipboard(i.id),messageAppend("å¤åˆ¶æˆåŠŸ")});else if("pack"==i.dialog&&null!=i.name)packData.push({id:i.id,name:i.name,count:i.count});else if("list"==i.dialog&&null!=i.stores)storeData=i.stores;else if("list"==i.dialog&&null!=i.store){let t=!0,o=null,n=null;for(let e=0;e<packData.length;e++){var a=packData[e];if(null!=a&&a.id==i.id){t=!1;a=a.count-i.store;0==a?o=e:packData[e].count=a;break}}if(t)for(let e=0;e<storeData.length;e++){var l=storeData[e];if(null!=l&&l.id==i.storeid){l={id:i.id,name:l.name,count:Math.abs(i.store)};packData.push(l);break}}let s=!0;for(let e=0;e<storeData.length;e++){var r=storeData[e];if(null!=r&&r.id==i.id){s=!1;r=r.count+i.store;0===r?n=e:storeData[e].count=r;break}}if(s)for(let e=0;e<packData.length;e++){var d=packData[e];if(null!=d&&d.id===i.id){d={id:i.stroeid,name:d.name,count:Math.abs(i.store)};storeData.push(d);break}}null!=o&&packData.splice(o,1),null!=n&&storeData.splice(n,1)}else if("pack"==i.dialog&&null!=i.jldesc){var o=i.jldesc.match(/<(.*)>(.*)<\/.*><br\/>ç²¾ç‚¼<(hig|hic|hiy|hiz|hio|ord)>ï¼‹(.*)\s</i);if(o){var n=o[1],n=`<${n}>`+o[2]+`</${n}>`,s=13-parseInt(o[4]);let t=[];for(let e=0;e<s;e++)t.push(`jinglian ${i.id} ok`);$(".content-message pre").append($(`<div class="item-commands"><span class="jinglian">ç²¾ç‚¼6æ˜Ÿ => ${n}</span></div>`).click(()=>WG.SendCmd(t))),AutoScroll(".content-message")}}"score"==i.dialog&&(console.log("score update"),G.level||null==i.level||(G.level=i.level,console.log("æ¬¢è¿"+G.level)),G.family||null==i.family?null!=i.study_per&&(G.score2=i):(G.pfamily=i.family,G.family=i.family.replaceAll("æ´¾",""),console.log(G.family),"æ— é—¨æ— "==G.family&&(G.family="æ­¦é¦†"),family=G.family,G.score=i,GM_setValue(roleid+"_family",G.family)),i.hp)&&i.mp&&i.pot&&(G.score=i)}),WG.add_hook(["dialog","items"],e=>{if("dialog"==e.type){if(e.selllist){for(var t of e.selllist){var o=t.name.replace(/<[^>]+>/g,""),n=/<([^<>]*)>/.exec(t.name)[1];null!=pgoods[o]&&(pgoods[o].id=t.id),null!=pgoods[n+o]&&(pgoods[n+o].id=t.id)}GM_setValue("goods",pgoods)}}else if("items"==e.type)if(WG.at("æ‰¬å·åŸ-é†‰ä»™æ¥¼")){for(var s of e.items)if("åº—å°äºŒ"==s.name)return npcs["åº—å°äºŒ"]=s.id,void GM_setValue("npcs",npcs)}else for(var i of e.items){if("åº—å°äºŒ"==i.name)return;if(null!=npcs[i.name])return npcs[i.name]=i.id,void GM_setValue("npcs",npcs)}}),WG.add_hook("msg",function(e){var t,o;"sys"==e.ch?(t=GM_getValue(roleid+"_automarry",t),0<=e.content.indexOf("ï¼Œå©šç¤¼å°†åœ¨ä¸€åˆ†é’Ÿåå¼€å§‹ã€‚")&&(console.dir(e),"å¼€"==t&&0==G.in_fight?stopauto||WG.at("å‰¯æœ¬")?(messageClear(),messageAppend("<hiy>ç‚¹å‡»å‚åŠ å–œå®´</hiy>"),messageAppend("<div class=\"item-commands\"><span  id = 'onekeyjh'>å‚åŠ å–œå®´</span></div>"),$("#onekeyjh").on("click",function(){WG.xiyan()})):(console.log("xiyan"),WG.xiyan()):"å…³"!=t&&1!=G.in_fight||(messageClear(),messageAppend("<hiy>ç‚¹å‡»å‚åŠ å–œå®´,ç”±äºæœªå¼€å¯è‡ªåŠ¨ä¼ é€,æˆ–è€…åœ¨æˆ˜æ–—ä¸­,éœ€è¦æ‰‹åŠ¨ä¼ é€</hiy>"),messageAppend("<div class=\"item-commands\"><span  id = 'onekeyjh'>å‚åŠ å–œå®´</span></div>"),$("#onekeyjh").on("click",function(){WG.xiyan()})))):"rumor"==e.ch&&0<=e.content.indexOf("å¬è¯´")&&0<=e.content.indexOf("å‡ºç°åœ¨")&&0<=e.content.indexOf("ä¸€å¸¦ã€‚")&&(console.dir(e),"å¼€"==autoKsBoss&&0==G.in_fight?stopauto||WG.at("å‰¯æœ¬")?(o="<div class=\"item-commands\"><span id = 'onekeyKsboss'>ä¼ é€åˆ°boss</span></div>",messageClear(),messageAppend("bosså·²å‡ºç°"),messageAppend(o),$("#onekeyKsboss").on("click",function(){WG.kksBoss(e)})):WG.kksBoss(e):"å…³"!=autoKsBoss&&1!=G.in_fight||(o="<div class=\"item-commands\"><span id = 'onekeyKsboss'>ä¼ é€åˆ°boss</span></div>",messageClear(),messageAppend("<hiy>bosså·²å‡ºç°,ç”±äºæœªå¼€å¯è‡ªåŠ¨ä¼ é€,æˆ–è€…åœ¨æˆ˜æ–—ä¸­,éœ€è¦æ‰‹åŠ¨ä¼ é€</hiy>"),messageAppend(o),$("#onekeyKsboss").on("click",function(){WG.kksBoss(e)})))}),WG.add_hook("text",function(t){if(G.getitemShow&&(0<=t.msg.indexOf("æ­å–œä½ å¾—åˆ°")||0<=t.msg.indexOf("è·å¾—")&&-1==t.msg.indexOf("ç»éªŒ")&&-1==t.msg.indexOf("æ½œèƒ½")&&-1==t.msg.indexOf("æå‡")||0==t.msg.indexOf("ä½ æ‰¾åˆ°")||0==t.msg.indexOf("ä½ ä»")||0<=t.msg.indexOf("å¾—åˆ°")&&-1==t.msg.indexOf("éƒ­è¥„åœ¨å¾—åˆ°å€šå¤©å‰‘")&&-1==t.msg.indexOf("é•¿ç™½å±±å¾—åˆ°å‰‘è°±"))&&messageAppend(t.msg),-1==t.msg.indexOf("è¯´ï¼š")&&((0<=t.msg.indexOf("åªèƒ½åœ¨æˆ˜æ–—ä¸­ä½¿ç”¨ã€‚")||-1!=t.msg.indexOf("è¿™é‡Œä¸å…è®¸æˆ˜æ–—")||-1!=t.msg.indexOf("æ²¡æ—¶é—´è¿™ä¹ˆåš"))&&G.in_fight&&(G.in_fight=!1,WG.auto_preform("stop"),WG.clean_dps()),0<=t.msg.indexOf("åŠ æ²¹ï¼ŒåŠ æ²¹ï¼ï¼")&&0==G.in_fight&&(G.in_fight=!0,WG.auto_preform()),0<=t.msg.indexOf("ä½ çš„å†…åŠ›ä¸å¤Ÿï¼Œæ— æ³•ä½¿ç”¨"))&&null!=G.preform_timer&&(WG.auto_preform("stop"),messageAppend("å†…åŠ›ä¸è¶³,åœæ­¢è‡ªåŠ¨å‡ºæ‹›",1,0)),"text"==t.type){if((0<=t.msg.indexOf(role+"èº«ä¸Šä¸œè¥¿å¤ªå¤šäº†")||0<=t.msg.indexOf("ä½ èº«ä¸Šä¸œè¥¿å¤ªå¤šäº†")||0<=t.msg.indexOf("ä½ æ‹¿ä¸ä¸‹é‚£ä¹ˆå¤šä¸œè¥¿ã€‚"))&&(WG.Send("tm å‹æƒ…æç¤ºï¼šè¯·æ£€æŸ¥æ˜¯å¦èƒŒåŒ…å·²æ»¡ï¼"),messageAppend("å‹æƒ…æç¤ºï¼šè¯·æ£€æŸ¥æ˜¯å¦èƒŒåŒ…å·²æ»¡ï¼",1),1==bagFull?Beep():2==bagFull&&FakerTTS.playtts(role+"ï¼Œè¯·æ£€æŸ¥æ˜¯å¦èƒŒåŒ…å·²æ»¡ï¼"),0<=WG.sm_state)&&(WG.sm_state=-1,$(".sm_button").text("å¸ˆé—¨(Q)")),0<=t.msg.indexOf("é•¿å¾—")&&0<=t.msg.indexOf("çœ‹èµ·æ¥")){var o=t.msg.split("\n")[0].split(" ");let e=o[o.length-1];0<=e.indexOf("<")&&(e=e.split("<")[0]);o=(new Date).getMilliseconds();messageAppend(`<div class="item-commands"><span id="addshield${o}">å±è”½ ${e}</span></div>`,0,0),$("#addshield"+o).on("click",function(){GM_setValue("_shield",shield=""!=(shield=GM_getValue("_shield",shield))?shield+","+e:e),$("#shield").val(shield),messageAppend("å·²å±è”½",1,1)})}"å¼€"==dpssakada&&(/.*é€ æˆ<.*>.*<\/.*>ç‚¹.*/.test(t.msg)&&"ä½ "!=(e=(o=t.msg.split(/.*é€ æˆ<wht>|.*é€ æˆ<hir>|<\/wht>ç‚¹|<\/hir>ç‚¹/))[2].split(/ä¼¤å®³|\(|</))[2]&&("æš´å‡»"==e[0]?lastcri=parseInt(o[1]):lastpfm=parseInt(o[1]),dpslock=1),2<=(e=t.msg.split(/çœ‹èµ·æ¥å……æ»¡æ´»åŠ›ï¼Œä¸€ç‚¹ä¹Ÿä¸ç´¯ã€‚|ä¼¼ä¹æœ‰äº›ç–²æƒ«ï¼Œä½†æ˜¯ä»ç„¶ååˆ†æœ‰æ´»åŠ›ã€‚|çœ‹èµ·æ¥å¯èƒ½æœ‰äº›ç´¯äº†ã€‚|åŠ¨ä½œä¼¼ä¹å¼€å§‹æœ‰ç‚¹ä¸å¤ªçµå…‰ï¼Œä½†æ˜¯ä»ç„¶æœ‰æ¡ä¸ç´Šã€‚|å·²ç»ä¸€å‰¯å¤´é‡è„šè½»çš„æ¨¡æ ·ï¼Œæ­£åœ¨å‹‰åŠ›æ”¯æ’‘è‘—ä¸å€’ä¸‹å»ã€‚|çœ‹èµ·æ¥å·²ç»åŠ›ä¸ä»å¿ƒäº†ã€‚|å·²ç»é™·å…¥åŠæ˜è¿·çŠ¶æ€ï¼Œéšæ—¶éƒ½å¯èƒ½æ‘”å€’æ™•å»ã€‚|ä¼¼ä¹ååˆ†ç–²æƒ«ï¼Œçœ‹æ¥éœ€è¦å¥½å¥½ä¼‘æ¯äº†ã€‚|æ°”å–˜å˜˜å˜˜ï¼Œçœ‹èµ·æ¥çŠ¶å†µå¹¶ä¸å¤ªå¥½ã€‚|æ‘‡å¤´æ™ƒè„‘ã€æ­ªæ­ªæ–œæ–œåœ°ç«™éƒ½ç«™ä¸ç¨³ï¼Œçœ¼çœ‹å°±è¦å€’åœ¨åœ°ä¸Šã€‚/)).length)&&(e[0].indexOf("ä½ ")<0&&(0<lastcri&&(critical+=lastcri,criticalnum+=1),0<lastpfm)&&(pfmdps+=lastpfm,pfmnum+=1),lastpfm=lastcri=0)}o=t.msg.match(/çœ‹èµ·æ¥(.*)æƒ³æ€æ­»ä½ ï¼/)||t.msg.match(/ä½ æ‰‘å‘(.*)/);if(Array.isArray(o)&&1<o.length){let t=o[1];var e=roomData.find(e=>e.name&&e.name.includes(t));e&&(G.fight_id=e.id)}}),WG.add_hook("dialog",function(e){"jh"==e.dialog&&e.fbs&&(fb_path=e.fbs)}),WG.add_hook(["text","sc"],function(e){if("å…³"!=funnycalc)if("text"===e.type&&/ä½ çš„æœ€å¤§å†…åŠ›å¢åŠ äº†/.test(e.msg)){var t=e.msg.replace(/[^0-9]/gi,""),o=G.score,n=o.max_mp,o=o.limit_mp,t=(o-n)/(6*t);messageAppend(`<hic class="remove_nl">ä½ çš„æœ€å¤§å†…åŠ›ä»${n}åˆ°${o}è¿˜éœ€${t<60?parseInt(t)+"åˆ†é’Ÿ":`${parseInt(t/60)}å°æ—¶${parseInt(t%60)}åˆ†é’Ÿ`}ã€‚
</hic>`,0,1)}else if("sc"==e.type&&e.id==G.id)null!=e.max_mp&&null!=e.mp&&(G.score.max_mp=e.max_mp,G.score.mp=e.mp);else if("text"==e.type&&/ä½ è·å¾—äº†(.*)ç‚¹ç»éªŒï¼Œ(.*)ç‚¹æ½œèƒ½/.test(e.msg)){n=e.msg.match(/è·å¾—äº†(.*)ç‚¹ç»éªŒï¼Œ(.*)ç‚¹æ½œèƒ½/);G.jy+=parseInt(n[1]),G.qn+=parseInt(n[2]);let t=`<span class="remove_jy">å…±è®¡è·å¾—äº†${G.jy}ç‚¹ç»éªŒå’Œ${G.qn}ç‚¹æ½œèƒ½ã€‚
</span>`;setTimeout(()=>{return e=t,$(".remove_jy").remove(),$(".content-message pre").append(e),void AutoScroll(".content-message");var e},200)}}),WG.add_hook("roles",function(t){!function e(){originWindow.source?originWindow.source.postMessage(t.roles,"*"):setTimeout(e,1e3)}(),setTimeout(()=>{var t=getQueryVariable("login");if(t){var o=$("#role_panel > ul > li.content > ul >li");for(let e=0;e<o.length;e++)t==e+1?$(o[e]).addClass("select"):$(o[e]).removeClass("select");$("li[command=SelectRole]").click()}},5e3)})},configInit:function(){var e;family=GM_getValue(roleid+"_family",family),automarry=GM_getValue(roleid+"_automarry",automarry),autoKsBoss=GM_getValue(roleid+"_autoKsBoss",autoKsBoss),ks_pfm=GM_getValue(roleid+"_ks_pfm",ks_pfm),ks_wait=GM_getValue(roleid+"_ks_wait",ks_wait),eqlist=GM_getValue(roleid+"_eqlist",eqlist),skilllist=GM_getValue(roleid+"_skilllist",skilllist),autoeq=GM_getValue(roleid+"_auto_eq",autoeq),null==family&&(family=$(".role-list .select").text().substr(0,2)),wudao_pfm=GM_getValue(roleid+"_wudao_pfm",wudao_pfm),sm_loser=GM_getValue(roleid+"_sm_loser",sm_loser),sm_any=GM_getValue(roleid+"_sm_any",sm_any),sm_price=GM_getValue(roleid+"_sm_price",sm_price),sm_getstore=GM_getValue(roleid+"_sm_getstore",sm_getstore),unauto_pfm=GM_getValue(roleid+"_unauto_pfm",unauto_pfm),auto_pfmswitch=GM_getValue(roleid+"_auto_pfmswitch",auto_pfmswitch),auto_pfm_mode=GM_getValue(roleid+"_auto_pfm_mode",auto_pfm_mode),auto_rewardgoto=GM_getValue(roleid+"_auto_rewardgoto",auto_rewardgoto),busy_info=GM_getValue(roleid+"_busy_info",busy_info),saveAddr=GM_getValue(roleid+"_saveAddr",saveAddr),auto_updateStore=GM_getValue(roleid+"_auto_updateStore",auto_updateStore),auto_relogin=GM_getValue(roleid+"_auto_relogin",auto_relogin),!(blacklist=GM_getValue(roleid+"_blacklist",blacklist))instanceof Array&&(blacklist=blacklist.split(",")),getitemShow=GM_getValue(roleid+"_getitemShow",getitemShow),G.getitemShow="å¼€"==getitemShow,zml=GM_getValue(roleid+"_zml",zml),zdy_item_store=GM_getValue(roleid+"_zdy_item_store",zdy_item_store),zdy_item_store2=GM_getValue(roleid+"_zdy_item_store2",zdy_item_store2),zdy_item_lock=GM_getValue(roleid+"_zdy_item_lock",zdy_item_lock),zdy_item_drop=GM_getValue(roleid+"_zdy_item_drop",zdy_item_drop),zdy_item_fenjie=GM_getValue(roleid+"_zdy_item_fenjie",zdy_item_fenjie),zdy_item_store&&(store_list=store_list.concat(zdy_item_store.split(","))),zdy_item_store2&&(store_list=store_list.concat(zdy_item_store2.split(","))),zdy_item_lock&&(lock_list=lock_list.concat(zdy_item_lock.split(","))),zdy_item_drop&&(drop_list=drop_list.concat(zdy_item_drop.split(","))),zdy_item_fenjie&&(fenjie_list=fenjie_list.concat(zdy_item_fenjie.split(","))),ztjk_item=GM_getValue(roleid+"_ztjk",ztjk_item),"å¼€"==auto_pfmswitch&&(G.auto_preform=!0),"å¼€"==auto_pfm_mode&&(G.auto_pfm_mode=!0),auto_command=GM_getValue(roleid+"_auto_command",auto_command);for(e of unauto_pfm.split(","))e&&blackpfm.push(e);welcome=GM_getValue(roleid+"_welcome",welcome),die_str=GM_getValue(roleid+"_die_str",die_str),shieldswitch=GM_getValue("_shieldswitch",shieldswitch),shield=GM_getValue("_shield",shield),shieldkey=GM_getValue("_shieldkey",shieldkey),statehml=GM_getValue(roleid+"_statehml",statehml),backimageurl=GM_getValue(roleid+"_backimageurl",backimageurl),loginhml=GM_getValue(roleid+"_loginhml",loginhml),timequestion=GM_getValue(roleid+"_timequestion",timequestion),silence=GM_getValue(roleid+"_silence",silence),dpssakada=GM_getValue(roleid+"_dpssakada",dpssakada),funnycalc=GM_getValue(roleid+"_funnycalc",funnycalc),auto_buylist=GM_getValue(roleid+"_auto_buylist",auto_buylist),auto_skillPaperSelllist=GM_getValue(roleid+"_auto_skillPaperSelllist",auto_skillPaperSelllist),zdyskilllist=GM_getValue(roleid+"_zdyskilllist",zdyskilllist),zdyskills=GM_getValue(roleid+"_zdyskills",zdyskills),bagFull=GM_getValue(roleid+"_bagFull",bagFull),pushSwitch=GM_getValue("_pushSwitch",pushSwitch),pushType=GM_getValue("_pushType",pushType),pushToken=GM_getValue("_pushToken",pushToken),color_select=GM_getValue("color_select",color_select),WG.zdy_btnListInit()}},S={serverUrl:"https://wsmud.ii74.com",GetJson:function(e,t){let o="";return $.post(S.serverUrl+e,t,e=>{o=e}),o},shareJson:function(e,t){$.post(S.serverUrl+"/sharejk",{username:e,json:JSON.stringify(t)},e=>{e&&0==e.code?(GM_setClipboard(e.shareid),messageAppend("å¤åˆ¶æˆåŠŸ"+e.msg+":"+e.shareid)):messageAppend("å¤±è´¥äº†"+e.msg)})},getShareJson:function(e,t){$.post(S.serverUrl+"/getjk",{shareid:e},e=>{e&&0==e.code?t(e):messageAppend("å¤±è´¥äº†"+e.msg)})},getUserConfig:function(e,t){$.get(S.serverUrl+"/User/Load?id="+e,e=>{e&&""!=e?t(e):messageAppend("å¤±è´¥äº†")})},uploadUserConfig:function(e,t,o){$.post(S.serverUrl+"/User/Backup",{id:e,data:JSON.stringify(t)},e=>{e&&"true"==e?o(e):messageAppend("å¤±è´¥äº†,æˆ–é…ç½®å·²å­˜åœ¨")})}},FakerTTS={playtts:function(t){try{var e=new SpeechSynthesisUtterance(t);e.lang="zh",e.voice=speechSynthesis.getVoices().filter(function(e){return"Whisper"==e.name})[0],speechSynthesis.speak(e)}catch(e){try{android.speak(t)}catch(e){console.log("è¿™ä¸ªçœŸæ²¡æœ‰.")}}}};function Beep(){document.getElementById("beep-alert").play()}function Push(e){if(e)if("å¼€"!=pushSwitch||null==pushType||null==pushToken)messageAppend("é€šçŸ¥åŠŸèƒ½æœªå¼€å¯æˆ–è®¾ç½®ä¸å®Œæ•´ï¼Œè¯·åœ¨ å³é”®èœå•-è®¾ç½® ä¸­è®¾ç½®å¼€å¯ã€‚",1);else switch(String(pushType)){case"0":$.post(`https://sctapi.ftqq.com/${pushToken}.send?title=`+e);break;case"1":$.post(`https://api.day.app/${pushToken}/æ­¦ç¥ä¼ è¯´/`+encodeURIComponent(e));break;case"2":var t={token:pushToken,title:"æ­¦ç¥ä¼ è¯´",content:e};$.ajaxSetup({contentType:"application/json; charset=utf-8"}),$.post("http://www.pushplus.plus/send/",JSON.stringify(t));break;case"3":t={msg_type:"text",content:{text:e}};$.ajaxSetup({contentType:"application/json; charset=utf-8"}),$.post("https://open.feishu.cn/open-apis/bot/v2/hook/"+pushToken,JSON.stringify(t));break;case"4":$.post(`https://qmsg.zendee.cn/send/${pushToken}?msg=`+e);break;case"5":$.post(`https://qmsg.zendee.cn/group/${pushToken}?msg=`+e)}}class MusicBox{constructor(e){this.arrFrequency=[262,294,330,349,392,440,494,523,587,659,698,784,880,988,1047,1175,1319,1397,1568,1760,1967],this.arrNotes=["Â·1","Â·2","Â·3","Â·4","Â·5","Â·6","Â·7","1","2","3","4","5","6","7","1Â·","2Â·","3Â·","4Â·","5Â·","6Â·","7Â·"],this.opts=Object.assign({loop:!1,musicText:"",autoplay:!1,type:"sine",duration:2},e),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.opts.autoplay&&this.playMusic(this.opts.musicText,this.opts.autoplay)}createSound(e){var t=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();t.connect(o),o.connect(this.audioCtx.destination),t.type=this.opts.type,t.frequency.value=e,o.gain.setValueAtTime(0,this.audioCtx.currentTime),o.gain.linearRampToValueAtTime(1,this.audioCtx.currentTime+.01),t.start(this.audioCtx.currentTime),o.gain.exponentialRampToValueAtTime(.001,this.audioCtx.currentTime+this.opts.duration),t.stop(this.audioCtx.currentTime+this.opts.duration)}createMusic(e){e=this.arrNotes.indexOf(e);-1!==e&&this.createSound(this.arrFrequency[e])}pressBtn(e){this.createSound(this.arrFrequency[e])}playMusic(e,t=2){let o=0,n=e.split(" "),s=setInterval(()=>{try{var e=this.arrNotes.indexOf(n[o]);"-"!==n[o]&&"0"!==n[o]&&this.pressBtn(e),++o>=n.length&&(this.opts.loop?o=0:clearInterval(s))}catch(e){alert("è¯·è¾“å…¥æ­£ç¡®çš„ä¹è°±ï¼"),clearInterval(s)}},1e3/t);return s}}var originWindow={};$(document).ready(function(){function receiveMessage(event){originWindow=event;var origin=event.origin,data=event.data,jscode;if(0<=String(data).indexOf("denglu")){if(null!=role)return;console.log(data);let userName=data.split(" ")[1],userList=$("#role_panel > ul > li.content > ul >li");for(var user of userList)0<=user.innerText.indexOf(userName)?$(user).addClass("select"):$(user).removeClass("select");void $("li[command=SelectRole]").click()}else{try{if(JSON.parse(data)instanceof Object)return}catch(error){console.log("Run at message")}"string"==typeof data&&("æŒ–çŸ¿"===data||"ä¿®ç‚¼"===data?WG.zdwk():"æ—¥å¸¸"===data?WG.SendCmd("$daily"):"æŒ‚æœº"===data?WG.SendCmd("stopstate"):0<=data.split("\n")[0].indexOf("//")?unsafeWindow&&unsafeWindow.ToRaid&&ToRaid.perform(data):0<=data.split("\n")[0].indexOf("#js")?(jscode=data.split("\n"),jscode.baoremove(0),eval(jscode.join(""))):WG.SendCmd(data))}}function makeTp(e=0){var t={"è±ªå®…":"ä½æˆ¿","è¡™é—¨":"æ‰¬å·åŸ-è¡™é—¨æ­£å…","é•–å±€":"æ‰¬å·åŸ-é•–å±€æ­£å…","å½“é“º":"æ‰¬å·åŸ-å½“é“º","æ“‚å°":"æ‰¬å·åŸ-æ“‚å°","è¯é“º":"æ‰¬å·åŸ-è¯é“º","ä¹¦é™¢":"æ‰¬å·åŸ-ä¹¦é™¢"},o=(1==e&&(t={"æ­¦å½“":"æ­¦å½“æ´¾-å¹¿åœº","å°‘æ—":"å°‘æ—æ´¾-å¹¿åœº","åå±±":"åå±±æ´¾-é•‡å²³å®«","å³¨çœ‰":"å³¨çœ‰æ´¾-é‡‘é¡¶","é€é¥":"é€é¥æ´¾-é’è‰åª","ä¸å¸®":"ä¸å¸®-æ ‘æ´å†…éƒ¨","æ­¦é¦†":"æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†","æ€æ‰‹æ¥¼":"æ€æ‰‹æ¥¼-å¤§é—¨"},17<=(new Date).getHours())&&(t={"æ­¦å½“":"æ­¦å½“æ´¾-åå±±å°é™¢","å°‘æ—":"å°‘æ—æ´¾-æ–¹ä¸ˆæ¥¼","åå±±":"åå±±æ´¾-å®¢å…","å³¨çœ‰":"å³¨çœ‰æ´¾-æ¸…ä¿®æ´","é€é¥":"é€é¥æ´¾-åœ°ä¸‹çŸ³å®¤","ä¸å¸®":"ä¸å¸®-æ—é—´å°å±‹","æ­¦é¦†":"æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†","æ€æ‰‹æ¥¼":"æ€æ‰‹æ¥¼-å¤§é—¨"}),{});for(let e in t)o[e]={name:e,callback:function(){WG.go(t[e])}};0==e&&(o.wmls={name:"æ­¦åº™ç–—ä¼¤",callback:function(){WG.go("æ‰¬å·åŸ-æ­¦åº™"),WG.Send("liaoshang")}});var n=jQuery.Deferred();return setTimeout(function(){n.resolve(o)},20),n.promise()}function createSomeMenu(){return{items:{"å…³é—­è‡ªåŠ¨":{name:"å…³é—­è‡ªåŠ¨",visible:function(e,t){return 0!=timer},callback:function(e,t){WG.timer_close()}},"è‡ªåŠ¨":{name:"è‡ªåŠ¨",visible:function(e,t){return 0==timer},items:{"è‡ªåŠ¨æ­¦é“":{name:"è‡ªåŠ¨æ­¦é“",callback:function(e,t){WG.wudao_auto()}},"è‡ªåŠ¨å°æ ‘æ—":{name:"è‡ªåŠ¨å°æ ‘æ—",callback:function(e,t){WG.grove_auto()}},"è‡ªåŠ¨æ•´ç†å¹¶æ¸…åŒ…":{name:"è‡ªåŠ¨æ•´ç†å¹¶æ¸…åŒ…",callback:function(e,t){WG.sell_all()}},"å›æ”¶ç§˜ç±æ®‹é¡µ":{name:"å›æ”¶ç§˜ç±æ®‹é¡µ",callback:function(e,t){WG.zxBuy()}},"è‡ªåŠ¨æ¯”è¯•":{name:"è‡ªåŠ¨æ¯”è¯•",visible:function(e,t){return null==WG.fight_listener},callback:function(e,t){WG.auto_fight()}},"å…³é—­æ¯”è¯•":{name:"å…³é—­æ¯”è¯•",visible:function(e,t){return null!=WG.fight_listener},callback:function(e,t){WG.auto_fight()}},"è‡ªåŠ¨ä½¿ç”¨é“å…·":{name:"è‡ªåŠ¨ä½¿ç”¨é“å…·",callback:function(e,t){WG.auto_useitem()}},"è‡ªåŠ¨ç ”è¯":{name:"è‡ªåŠ¨ç ”è¯",callback:function(e,t){WG.auto_Development_medicine()}},"ä¸€é”®æ—¥å¸¸":{name:"ä¸€é”®æ—¥å¸¸",callback:function(e,t){WG.oneKeyDaily()}},"ä¸€é”®è¯·å®‰":{name:"ä¸€é”®è¯·å®‰",callback:function(e,t){WG.oneKeyQA()}},"ä¸€é”®æ‰«è¡":{name:"ä¸€é”®æ‰«è¡",callback:function(e,t){WG.oneKeySD()}},"ä¸€é”®å½“é“ºè´­ä¹°":{name:"ä¸€é”®å½“é“ºè´­ä¹°",callback:function(e,t){WG.tnBuy()}}}},"æ¢è£…è®¾ç½®":{name:"æ¢è£…è®¾ç½®",callback:function(e,t){WG.eqhelperui()}},"æ¢è£…":{name:"æ¢è£…",items:WG.eqloader()},"è‡ªå‘½ä»¤,è‡ªå®šç›‘æ§":{name:"è‡ªå‘½ä»¤,è‡ªå®šç›‘æ§",callback:function(e,t){WG.zmlztjk()}},"æ‰‹åŠ¨å–œå®´":{name:"æ‰‹åŠ¨å–œå®´",callback:function(e,t){console.log("å½“å‰è‡ªåŠ¨çŠ¶æ€:"+stopauto),WG.xiyan()}},"å¿«æ·ä¼ é€":{name:"å¸¸ç”¨åœ°ç‚¹",items:makeTp(0)},"é—¨æ´¾ä¼ é€":{name:"é—¨æ´¾ä¼ é€",items:makeTp(1)},"æ‰“å¼€ä»“åº“":{name:"æ‰“å¼€ä»“åº“",callback:function(e,t){WG.at("æ‰¬å·åŸ-é’±åº„")?WG.Send("store"):WG.go("æ‰¬å·åŸ-é’±åº„")}},"åˆ‡æ¢èœå•":{name:"åˆ‡æ¢èœå•",callback:function(e,t){let o=inzdy_btn?"off":"on";WG.zdy_btnshow(o)}},"ç®€å•å·¥å…·":{name:"ç®€å•å·¥å…·",callback:function(e,t){WG.calc()}},"è°ƒè¯•BOSS":{name:"è°ƒè¯•BOSS",visible:!1,callback:function(e,t){WG.kksBoss({content:"å¬è¯´å‘¼ç¬¦å‡ºç°åœ¨é€é¥æ´¾-åœ°ä¸‹çŸ³å®¤ä¸€å¸¦ã€‚"})}},"æµç¨‹èœå•Raid.js":{name:"æµç¨‹èœå•Raid.js",callback:function(e,t){unsafeWindow&&unsafeWindow.ToRaid?unsafeWindow.ToRaid.menu():(messageAppend("æ’ä»¶æœªå®‰è£…,è¯·è®¿é—® https://greasyfork.org/zh-CN/scripts/375851-wsmud-raid ä¸‹è½½å¹¶å®‰è£…"),window.open("https://greasyfork.org/zh-CN/scripts/375851-wsmud-raid ","_blank").location)}},"è®¾ç½®":{name:"è®¾ç½®",callback:function(e,t){WG.setting()}},"æ‰“å¼€é¢æ¿":{name:"æ‰“å¼€é¢æ¿",visible:function(e,t){return"none"==$(".WG_log").css("display")},callback:function(e,t){WG.showhideborad()}},"å…³é—­é¢æ¿":{name:"å…³é—­é¢æ¿",visible:function(e,t){return"none"!=$(".WG_log").css("display")},callback:function(e,t){WG.showhideborad()}},"æ‰“å¼€å¿«æ·æ“ä½œæ ":{name:"æ‰“å¼€å¿«æ·æ“ä½œæ ",visible:function(e,t){return"none"==$(".WG_button").css("display")},callback:function(e,t){WG.showhidebtn()}},"å…³é—­å¿«æ·æ“ä½œæ ":{name:"å…³é—­å¿«æ·æ“ä½œæ ",visible:function(e,t){return"none"!=$(".WG_button").css("display")},callback:function(e,t){WG.showhidebtn()}}}}}$("head").append('<link href="https://cdn.staticfile.org/jquery-contextmenu/3.0.0-beta.2/jquery.contextMenu.min.css" rel="stylesheet">'),$("head").append('<link href="https://cdn.staticfile.org/layer/2.3/skin/layer.css" rel="stylesheet">'),$("head").append('<link href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">'),$("body").append(UI.codeInput),$("body").append($('<audio id="beep-alert" preload="auto"></audio>').append('<source src="https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script/plugins/complete.mp3" type="audio/mpeg">')),setInterval(()=>{var e="";parseInt(10*Math.random())<3?e="<hir>ã€æ’ä»¶ã€‘æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åŠ å…¥ æ­¦ç¥ä¼ è¯´-ä»™ç•Œ 367657589 è¿›è¡ŒæŠ€æœ¯äº¤æµï¼Œè„šæœ¬è®¨è®ºã€‚\n<hir>":parseInt(10*Math.random())<10&&(e="<hir>ã€æ’ä»¶ã€‘æ¬¢è¿è®¿é—® https://emeisuqing.github.io/wsmud.old/ è‹è½» åŠ©ä½ æ­¦ç¥ä¹‹è·¯ä¸Šæ›´åŠ è½»æ¾æ„‰å¿«ã€‚\n<hir>"),parseInt(10*Math.random())<2?$(".channel pre").append(e):console.log(""),$(".channel")[0].scrollTop=99999},32e4),KEY.init(),WG.init(),GI.init(),unsafeWindow.WG=WG,unsafeWindow.T=T,unsafeWindow.L=L,unsafeWindow.G=G,unsafeWindow.messageClear=messageClear,unsafeWindow.messageAppend=messageAppend,unsafeWindow.send_cmd=send_cmd,unsafeWindow.roomData=roomData,unsafeWindow.MusicBox=MusicBox,unsafeWindow.FakerTTS=FakerTTS,unsafeWindow.Beep=Beep,unsafeWindow.Push=Push,unsafeWindow.WSStore=store,unsafeWindow.imgShow=imgShow,window.addEventListener("message",receiveMessage,!1),$(".room-name").on("click",e=>{e.preventDefault(),$(".container").contextMenu({x:1,y:1})}),$.contextMenu({selector:".container",build:function(e,t){return createSomeMenu()}})})}(),!function(){class o{constructor(){this.roles=this.getValue("roles")}set roles(e){e instanceof Array?(e.sort((e,t)=>e.sort-t.sort),e.forEach((e,t)=>{e.server?e.sort=t+1:e.sort=9999}),this._roles=e):this._roles=[],this.setValue("roles",this._roles)}get roles(){return this._roles}addStyle(e){GM_addStyle(e)}cookie(){var e=document.cookie.split(";").reduce((e,t)=>{var o=t.indexOf("="),n=t.substr(0,o).trim(),t=t.substr(o+1);return e[n]=t,e},{});return new Proxy(e,{set:(e,t,o)=>{return document.cookie=t+"="+o,Reflect.set(e,t,o)},deleteProperty:(e,t)=>{return document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",Reflect.deleteProperty(e,t)}})}setValue(e,t){localStorage.setItem(e,JSON.stringify(t))}getValue(e){return JSON.parse(localStorage.getItem(e))}deleteValue(e){localStorage.removeItem(e)}}$(document).ready(function(){var e=unsafeWindow.WG,a=Vue.observable(new o);e.add_hook("roles",function(e){e.roles instanceof Array&&(e.roles.forEach(e=>{let{id:t,name:o,title:n}=e;e=a.roles.findIndex(e=>e.id===t);-1===e?a.roles.push({id:t,name:o,title:n,sort:9999}):(a.roles[e].name=o,a.roles[e].title=n)}),a.roles=a.roles.slice(0))}),e.add_hook("login",function(e){let t=e.id;var o;!a.id&&t&&(a.id=t,e=a.roles.findIndex(e=>e.id===t),a.name=a.roles[e].name,o=a.cookie(),a.roles[e].u=o.u,a.roles[e].p=o.p,a.roles[e].s=o.s,a.roles[e].server=["ä¸€åŒº","äºŒåŒº","ä¸‰åŒº","å››åŒº","æµ‹è¯•"][o.s],a.roles=a.roles.slice(0))});let t=a.getValue("auto-login-id");t?(a.deleteValue("auto-login-id"),e.add_hook(["roles"],function(){setTimeout(()=>$(`.role-item[roleid=${t}]`).click(),1e3),setTimeout(()=>$(".panel_item[command=SelectRole]").click(),2e3)})):($('li.panel_item[command="SelectRole"]').after(`
<li class="panel_item" id="wsmud-login" style="color:orange;" @click.stop="show = true">
  <span class="glyphicon glyphicon-ok"></span> <span style="margin-left:0.5rem">[è‹è½»]ä¸€é”®ç™»å½•</span>
  <div v-if="show" class="login-dialog-bg" @click.stop="show = false">
    <div class="login-dialog" @click.stop>
      <div class="login-dialog-title">[è‹è½»]ä¸€é”®ç™»å½•</div>
      <transition-group class="login-dialog-rows" tag="div" name="login-animate-list">
        <div class="login-dialog-row" v-for="(role, index) in roles" :key="role.id" v-if="role.server">
          <span class="login-dialog-role" @click="login(role)">[{{ role.server }}] {{ role.name }}</span>
          <span class="glyphicon glyphicon-arrow-up login-dialog-up" @click="up(index)"></span>
          <span class="glyphicon glyphicon-arrow-down login-dialog-down" @click="down(index)"></span>
          <span class="glyphicon glyphicon-trash login-dialog-remove" @click="remove(index)"></span>
        </div>
      </transition-group>
    </div>
  </div>
</li>
`),new Vue({data:{show:!1},computed:{roles(){return a.roles}},mounted(){var e,t,o,n=new URLSearchParams(window.location.search),s=(n.get("type")&&(e=n.get("username"),t=n.get("password"),o=n.get("area"),s=n.get("name"),e)&&t&&o&&s&&$.ajax({type:"POST",url:"/UserAPI/Login",data:"code="+e+"&pwd="+t,success:function(e){console.log(e),a.cookie().s=o;e=window.location.href.split("?")[0];window.location=e+"?name="+s},error:function(e){}}),n.get("name"));if(s)for(var i of a.roles)i.name==s&&this.login(i)},methods:{login(e){var t=a.cookie();t.u=e.u,t.p=e.p,t.s=e.s,a.setValue("auto-login-id",e.id),(window.android?android:window.location).reload()},up(e){a.roles[e].sort=e-1,a.roles=a.roles.slice(0)},down(e){a.roles[e].sort=e+3,a.roles=a.roles.slice(0)},remove(e){delete a.roles[e].server,a.roles=a.roles.slice(0),this.$forceUpdate()}},el:"#wsmud-login"}),a.addStyle(`
.login-dialog-bg {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  z-index: 100;
  overflow-y: auto;
  background-color: #000000dd;
  cursor: default;
  user-select: none;
}
.login-dialog {
  display: block;
  position: absolute;
  left: 50%;
  top: 50%;
  z-index: 101;
  min-width: 300px;
  padding: 10px;
  transform: translate(-50%, -50%);
  border-radius: 10px;
  color: #999999;
  background-color: #080808;
  box-shadow: 0 0 5px #333333;
}
.login-dialog-title {
  color: #00f000;
  padding: 10px 0 10px 10px;
  text-shadow: 0 0 15px;
}
.login-dialog-rows {
  max-height: 230px;
  overflow: auto;
}
.login-dialog-row {
  cursor: pointer;
  padding: 10px;
  display: flex;
}
.login-dialog-role {
  flex: 1 0 auto;
}
.login-dialog-role:hover {
  color: #00ffff;
  text-shadow: 0 0 15px;
}
.login-dialog-up, .login-dialog-down, .login-dialog-remove {
  flex: 0 0 22px;
  margin-left: 5px;
}
.login-dialog-up:hover, .login-dialog-down:hover {
  color: #088000;
  text-shadow: 0 0 15px;
}
.login-dialog-remove:hover {
  color: #880000;
  text-shadow: 0 0 15px;
}
/* å›¾æ ‡ */
.glyphicon-arrow-up:before {
  content: "\\e093";
}
.glyphicon-arrow-down:before {
  content: "\\e094";
}
.glyphicon-trash:before {
  content: "\\e020";
}
/* è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ */
.login-animate-list-move {
  transition: transform 0.5s;
}
.login-animate-list-item {
  display: inline-block;
  margin-right: 10px;
}
.login-animate-list-enter-active, .login-animate-list-leave-active {
  transition: all 0.5s;
}
.login-animate-list-enter, .login-animate-list-leave-to {
  opacity: 0;
  transform: translateX(50px);
}
`))})}(),!function(){var Message={append:function(e){console.log(e)},clean:function(){},cmdLog:function(e,t){let o=`&nbsp;&nbsp;<hic>${e}</hic>`;null!=t&&(o+=": "+t),this.append(o)}};function CopyObject(e){return JSON.parse(JSON.stringify(e))}let SortInsert=function(e,t,o){let n=e.length;for(;0<=n;){if(0==n){e.splice(n,0,t);break}if(o(e[n-1],t)){e.splice(n,0,t);break}--n}},SourceCodeHelper={split:function(e){var e=e.split(/\s*\n+/g),t=e[0],t=(null!=t&&0==/\S/.test(t)&&e.splice(0,1),e[e.length-1]);return null!=t&&0==/\S/.test(t)&&e.splice(e.length-1,1),e},appendHeader:function(e,t){let o=`
`+t;return o=(o=(o=o.replace(/(\n)/g,"$1"+e)).replace(/\n\s*\n/g,"\n")).replace(/^\s*\n/,"")}};class PersistentCache{constructor(e,t,o){this._save=e,this._getAll=t,this._remove=o}save(e,t){this._save(e,t)}get(e){return this.getAll()[e]}getAll(){return this._getAll()}remove(e){this._remove(e)}}class PrecompileRule{constructor(e,t){this._handle=e,this.priority=t}handle(e){return this._handle(e)}}class PrecompileRuleCenter extends PrecompileRule{constructor(){super(function(e){var t,o=e;for(t of this._rules)o=t.handle(o);return o},-1),this._rules=[],this.instance=this}static shared(){return this.instance||(this.instance=new PrecompileRuleCenter),this.instance}addRule(e){SortInsert(this._rules,e,(e,t)=>e.priority>=t.priority)}}class Precompiler{precompile(e){e=SourceCodeHelper.split(e);return e.length<=0?e:PrecompileRuleCenter.shared().handle(e)}}let ControlKeys={while:"while",continue:"continue",break:"break",if:"if",elseif:"elseif",else:"else",exit:"exit"};class Compiler{constructor(){this._cc="CC",this._pc="PC",this._breakStacks=[]}compile(e){var t;return null==e?[]:(e=(new Precompiler).precompile(e),t=["[if] true"],e.forEach(e=>{t.push("  "+e)}),(e=this._handleBlock(t,0).cmds).push("%exit"),e)}_handleBlock(e,o,t){var n=t,s=[],i=this._handleCondition(e[0]),a=function(){},l=this;switch(i.type){case ControlKeys.while:this._breakStacks.push([]),s.push(i.cmd),s.push(null),a=function(){s.push(`%${l._pc}=`+o);var t=s.length+o;s[1]=`%${l._pc}=${l._cc}?${o+2}:`+t,l._breakStacks.pop().forEach(e=>{s[e-o]=`%${l._pc}=`+t})},n=o;break;case ControlKeys.if:s.push(i.cmd),s.push(null),a=function(){s.push("%pass");var e=s.length+o;s[1]=`%${l._pc}=${l._cc}?${o+2}:`+e};break;case ControlKeys.elseif:s.push(i.cmd),s.push(null),a=function(){s.push("%pass");var e=s.length+o;s[1]=`%${l._pc}=${l._cc}?${o+2}:`+e};break;case ControlKeys.else:s.push(null),a=function(){var e=s.length+o;s[0]=`%${l._pc}=${l._cc}?${e}:`+(o+1)};break;case ControlKeys.continue:return s.push(`%${l._pc}=`+t),{type:"continue",cmds:s};case ControlKeys.break:return s.push(null),this._breakStacks[this._breakStacks.length-1].push(o),{type:"break",cmds:s};case ControlKeys.exit:return s.push("%exit"),{type:"exit",cmds:s};default:throw"æœªçŸ¥çš„æ§åˆ¶å…³é”®å­—: "+i.type}for(var r=e.length,d=1;d<r;){var u=e[d],c=/^\s*/g.exec(u)[0].length;if("["==u[c]){for(var m=[u],p=d+1;p<r;){var g=e[p];if(" "!=g[c])break;m.push(g),p+=1}var f=s.length-1,h=s.length+o,h=this._handleBlock(m,h,n);h.cmds.forEach(e=>{s.push(e)}),"elseif"==h.type?s[f]=`%${this._pc}=`+(s.length+o-1):"else"==h.type&&(s[f]=`%${this._pc}=`+(s.length+o)),d=p}else s.push(u.substring(c)),d+=1}return a(),{type:i.type,cmds:s}}_handleCondition(e){var t,o=null,n=null;for(t of[{type:ControlKeys.while,regexp:/^\s*\[while\]/g},{type:ControlKeys.if,regexp:/^\s*\[if\]/g},{type:ControlKeys.elseif,regexp:/^\s*\[else\s?if\]/g},{type:ControlKeys.else,regexp:/^\s*\[else\]/g},{type:ControlKeys.continue,regexp:/^\s*\[continue\]/g},{type:ControlKeys.break,regexp:/^\s*\[break\]/g},{type:ControlKeys.exit,regexp:/^\s*\[exit\]/g}]){var s=t.regexp.exec(e);if(s){o=t.type,s=e.substring(s[0].length),n=`%${this._cc}=`+s;break}}if(null==o)throw"ç¼–è¯‘å¤±è´¥: "+e;return{type:o,cmd:n}}}let PrecompileRulePriority={subflow:100,call:90,annatition:80,compatible:70,guard:60,emptyLine:50,high:30,ordinary:20,low:10};!function(){var e=new PrecompileRule(function(e){var t,o=[];for(t of e)/^\s*\/\//.test(t)||o.push(t);return o},PrecompileRulePriority.annatition);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var t,o=[],n=!1;for(t of e)/^\s*\/\*/.test(t)?n=!0:n&&/\*\/\s*$/.test(t)?n=!1:n||o.push(t);return o},PrecompileRulePriority.annatition);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var t,o=[];let n=!1,s=null;for(t of e)null!=/^(\s*)<===+\s*$/.exec(t)?(n=!0,s="<==="):n?null!=/^\s*=+==>\s*$/.exec(t)?(n=!1,s+="===>",o.push(s)):s+=`
`+t:o.push(t);return o},PrecompileRulePriority.subflow);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var t,o=[],n=[],s=!1;for(t of e){var i=/^(\s*)<---+/.exec(t);if(null!=i){var s=!0,i={headerLength:i[1].length,cmds:[]};n.push(i)}else if(s)null==/^\s*-+-->/.exec(t)?(i=n[n.length-1]).cmds.push(t.substring(i.headerLength)):s=!1;else{o.push(t);i=/^(\s*)[^\[\s]/.exec(t);if(null!=i){var a=i[1],l=!1;for(let e=n.length;0<e;e--){var r=n[e-1];a.length<r.headerLength?n.pop():(l||(o.push(a+"%guardStart"),l=!0),r.cmds.forEach(e=>{o.push(""+a+e)}))}l&&o.push(a+"%guardEnd")}}}return o},PrecompileRulePriority.guard);PrecompileRuleCenter.shared().addRule(e)}();var __CallCounter=0,FlowStore=null;function CompatibleOperator(e){return e=(e=(e=e.replace(/([^&])[&]([^&])/g,"$1&&$2")).replace(/([^\|])[\|]([^\|])/g,"$1||$2")).replace(/([^=<>!])[=]([^=])/g,"$1==$2")}!function(){var e=new PrecompileRule(function(e){let d=[];return e.forEach(o=>{var n=/^(\s*)@call\s(\S+)(\s*(\S.*)+\s*|\s*)$/.exec(o);if(null==n)d.push(o);else{o=n[4];let t="";if(null!=o&&0<o.length){var s=o.split(",");for(let e=0;e<s.length;e++){var i=s[e];t+=`($arg${e})=${i}
`}}var o=n[2],a=FlowStore.get(o);null==a&&Message.append(`<ord>æœªæ‰¾åˆ°è°ƒç”¨çš„æµç¨‹ ${o}</ord>`);let e=`[if] true
`+SourceCodeHelper.appendHeader("    ",t+`
`+a);var l,o=__CallCounter,a=(__CallCounter+=1,e=(e=e.replace(/\(\$([_a-z][a-zA-Z0-9_]*?)\)/g,`($__x${o}_$1)`)).replace(/\(([_a-z][a-zA-Z0-9_]*?)\)/g,`(__x${o}_$1)`),SourceCodeHelper.split(e)),r=n[1];for(l of a)/^\s*#/.test(l)||d.push(""+r+l)}}),d},PrecompileRulePriority.call);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var t,o=[];for(t of e)/\S+/.test(t)&&o.push(t);return o},PrecompileRulePriority.emptyLine);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var o=[];return e.forEach(e=>{var t=/^\s*#(\[.*)$/.exec(e);null==t?o.push(e):(e=t[1],o.push("<---",e,"---\x3e"))}),o},PrecompileRulePriority.compatible);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var n=[];return e.forEach(e=>{var t,o=/^(\s*)\[=(.+?)\](.*)$/.exec(e);null==o?n.push(e):(e=o[1],t=CompatibleOperator(t=o[2]),o=o[3],n.push(e+"@until "+t),/\S/.test(o)&&n.push(""+e+o))}),n},PrecompileRulePriority.compatible);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var n=[];return e.forEach(e=>{var t,o=/^(\s*)\[(.*?[=<>].*?|true|false)\](.*)$/i.exec(e);null==o?n.push(e):(e=o[3],/\S/.test(e)&&(t=o[1],o=CompatibleOperator(o=o[2]),n.push(t+"[if] "+o,t+"    "+e)))}),n},PrecompileRulePriority.compatible);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var o=[];return e.forEach(e=>{var t=/^(\s*)@next(.*)$/i.exec(e);null==t?o.push(e):(e=t[1],o.push(e+"[continue]"))}),o},PrecompileRulePriority.compatible);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new PrecompileRule(function(e){var o=[];return e.forEach(e=>{var t=/^(\s*)@exit(.*)$/i.exec(e);null==t?o.push(e):(e=t[1],o.push(e+"[break]"))}),o},PrecompileRulePriority.compatible);PrecompileRuleCenter.shared().addRule(e)}();var AssertLeftMarkHandlerCenter={addHandler:function(e){this._leftMarkHandlers.push(e)},getValue(t){for(let e=0;e<this._leftMarkHandlers.length;e++){var o=this._leftMarkHandlers[e].handle(t);if(o.handle)return o.value}return t},_leftMarkHandlers:[]};class AssertWrapper{constructor(e){var t=this;this.assert=function(){return e(t.text)}}setText(e){this.text=e}}class AssertHolder{constructor(e,t){this.match=e,this._getAssertWrapper=t}getAssertWrapper(){return this._getAssertWrapper()}}var AssertHolderCenter={addAssertHolder:function(e){this._assertHolders.push(e)},get:function(e){var o,n,s,t=e.replace(/^\s*|\s*$/g,""),i=this,e=t.search(/&&|\|\|/g);if(-1!=e)return o=t.substring(e,e+2),n=t.substring(0,e),s=t.substring(e+2),function(){var e=i.get(n),t=i.get(s);switch(o){case"&&":return e()&&t();case"||":return e()||t()}};if("!"==t[0])return function(){return!i.get(t.substring(1))()};for(let e=0;e<this._assertHolders.length;e++){var a=this._assertHolders[e];if(a.match(t))return(a=a.getAssertWrapper()).setText(t),a.assert}return null},_assertHolders:[]};!function(){function e(e){return!0}var t=new AssertHolder(function(e){return"true"==e},function(){return new AssertWrapper(e)});AssertHolderCenter.addAssertHolder(t)}(),!function(){function e(e){return!1}var t=new AssertHolder(function(e){return"false"==e},function(){return new AssertWrapper(e)});AssertHolderCenter.addAssertHolder(t)}(),!function(){function e(e){let t=e;t=(t=t.replace(/<(\w+)>/g,"ã€Œ$1ã€")).replace(/<(\/\w+)>/g,"ã€ŒÂ¿$1ã€");var e=l.exec(t)[0],o=(i=t.split(e))[0].replace(/^\s*|\s*$/g,""),n=AssertLeftMarkHandlerCenter.getValue(o),s=i[1].replace(/^\s*|\s*$/g,""),o=parseFloat(n),i=parseFloat(s),a=!1;switch(isNaN(o)||isNaN(i)||(n=o,s=i,a=!0),e){case"=":case"==":return a?Math.abs(n-s)<.001:n==s;case">":return s<n;case"<":return n<s;case">=":return s<=n;case"<=":return n<=s;case"!=":return a?.001<Math.abs(n-s):n!=s;default:return!1}}var l=new RegExp(">=?|<=?|!=|==?"),t=new AssertHolder(function(e){return l.test(e)},function(){return new AssertWrapper(e)});AssertHolderCenter.addAssertHolder(t)}();let CmdPrehandlerPriority={ordinary:50};class CmdPrehandler{constructor(e,t){this._handle=e,this.priority=t||CmdPrehandlerPriority.ordinary}handle(e,t){return this._handle(e,t)}}class CmdPrehandleCenter extends CmdPrehandler{constructor(){super(function(e,t){var o,n=t;for(o of this._handlers)n=o.handle(e,n);return n},-1),this._handlers=[],this.instance=this}static shared(){return this.instance||(this.instance=new CmdPrehandleCenter),this.instance}addHandler(e){SortInsert(this._handlers,e,(e,t)=>e.priority>=t.priority)}}let CmdExecutorPriority={compiler:90,high:30,ordinary:20,low:10};class CmdExecutor{constructor(e,t,o){this._appropriate=e,this._execute=t,this.priority=o||CmdExecutorPriority.ordinary}appropriate(e){return this._appropriate(e)}execute(e,t){return this._execute(e,t)}}var CmdExecuteCenter={addExecutor:function(e){SortInsert(this._executors,e,(e,t)=>e.priority>=t.priority)},execute:function(e,t){var o,n=null;for(o of this._executors)if(o.appropriate(t)){n=o;break}if(null==n)throw"æ— æ³•å¤„ç†æ­¤å‘½ä»¤: "+t;return n.execute(e,t)},_executors:[]};class Performer{constructor(e,t){this._name=e,this._source=t,this._log=!1,this._running=!1,this._pausing=!1}name(){return this._name}runing(){return this._running}pausing(){return this._pausing}log(e){return null==e||1==/\/\/\s*~silent\s*\n/.test(this._source)?this._log:void(this._log=e)}start(e){if(!this._running){try{var t=new Compiler,o=(new Date).getTime(),n=(this._cmds=t.compile(this._source),(new Date).getTime());console.log(`ç¼–è¯‘æ€»è€—æ—¶: ${n-o} æ¯«ç§’`)}catch(e){return void Message.append("<ord>ç¼–è¯‘é”™è¯¯</ord>: "+e)}this._log&&Message.append(`<hiy>å¼€å§‹æ‰§è¡Œï¼Œæµç¨‹: ${this._name}...</hiy>`),this._running=!0,this._pausing=!1,this._callback=e,this._pc=0,this._cc=!0,this._guarding=!1,this._subflows=[],this._perform()}}stop(){if(this._running){this._running=!1;for(var e of this._subflows)e.stop();this._log&&Message.append(`<hiy>æ‰§è¡Œå®Œæ¯•ï¼Œæµç¨‹: ${this._name}ã€‚</hiy>`),this._callback&&this._callback()}}pause(){if(this._running){this._log&&Message.append(`<hiy>æš‚åœæ‰§è¡Œï¼Œæµç¨‹: ${this._name}...</hiy>`),this._pausing=!0;for(var e of this._subflows)e.pause()}}resume(){if(this._running&&this._pausing){this._log&&Message.append(`<hiy>æ¢å¤æ‰§è¡Œï¼Œæµç¨‹: ${this._name}ã€‚</hiy>`),this._pausing=!1;for(var e of this._subflows)e.resume();this._perform()}}guarding(){return this._guarding}timeSeries(e){if(null==e)return this._systemCmdTimeSeries;this.guarding()||(this._systemCmdTimeSeries=e)}async _perform(){if(this._running&&!this._pausing&&!this._doing){var e=this._cmds[this._pc];this._pc+=1;try{this._doing=!0,await CmdExecuteCenter.execute(this,e)}catch(e){return Message.append("<ord>æ‰§è¡Œé”™è¯¯</ord>: "+e),void this.stop()}finally{this._doing=!1}this._perform()}}}function TryCalculate(expression){return/^[0-9\+\-\*\/% ]*$/g.test(expression)?eval(expression):expression}!function(){var e=new CmdExecutor(function(e){return"%exit"==e},function(e,t){e.stop()},CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(function(e){return"%pass"==e},function(e,t){},CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(e)}(),!function(){let appropriate=function(e){return 0==e.indexOf("%PC=CC")},execute=function(performer,cmd){performer._pc=eval("performer._cc"+cmd.substring(6))},executor=new CmdExecutor(appropriate,execute,CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(executor)}(),!function(){let appropriate=function(e){return 0==e.indexOf("%PC=")},execute=function(performer,cmd){performer._pc=eval(cmd.substring(4))},executor=new CmdExecutor(appropriate,execute,CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(executor)}(),!function(){var e=new CmdExecutor(function(e){return 0==e.indexOf("%CC=")},function(e,t){t=CmdPrehandleCenter.shared().handle(e,t),t=AssertHolderCenter.get(t.substring(4));e._cc=t()},CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(function(e){return"%guardStart"==e},function(e,t){e._guarding=!0},CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(function(e){return"%guardEnd"==e},function(e,t){e._guarding=!1},CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(function(e){return/^<===[^çˆ«]*===>$/.test(e)},function(e,t){t=t.slice(4,-4),t=new Performer("subflow",t);e._subflows.push(t),t.start()},CmdExecutorPriority.compiler);CmdExecuteCenter.addExecutor(e)}();var PersistentVariables=null;function UpdateVariable(e,t,o){/^_*[A-Z][a-zA-Z0-9_]*$/.test(t)?PersistentVariables.save(t,TryCalculate(o)):/^_*[a-z][a-zA-Z0-9_]*$/.test(t)&&(null==e.tempParams&&(e.tempParams={}),e.tempParams[t]=TryCalculate(o))}!function(){var o=/^\(\$([A-Za-z_][a-zA-Z0-9_]*?)\)\s*=\s*(.+)\s*/,e=new CmdExecutor(function(e){return o.test(e)},function(e,t){t=CmdPrehandleCenter.shared().handle(e,t),t=o.exec(t);UpdateVariable(e,t[1],t[2])});CmdExecuteCenter.addExecutor(e)}();var VariableStore={register:function(e){this._allGetAll.push(e)},getAll:function(){var e,t={};for(e of this._allGetAll){var o,n=e();for(o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t},_allGetAll:[]};!function(){let s=function(e,t){for(var o=[],n=/\([:a-zA-Z0-9_]+?\)/g,s=n.exec(e);null!=s;)o.push(s[0]),s=n.exec(e);let i=e;for(let e=0;e<o.length;e++){var a=o[e],l=t[a.substring(1,a.length-1)];null==l&&(l="null"),i=i.replace(a,l)}var r,d=[],u=/\((:[a-zA-Z0-9_]+?)\s+([^\(\)\s][^\(\)]*?)\s*\)/g;let c=u.exec(i);for(;null!=c;)d.push({value:c[0],key:c[1]+" ",params:c[2]}),c=u.exec(i);for(r of d){var m=t[r.key];let e="null";null!=m&&"function"==typeof m&&(e=m(r.params)),i=i.replace(r.value,e)}return i};var e=new CmdPrehandler(function(e,t){var o={},e=(Object.assign(o,VariableStore.getAll(),e.tempParams),function(e,t){let o=e;for(;;){var n=s(o,t);if(n==o)return o;o=n}}(t,o));return e});CmdPrehandleCenter.shared().addHandler(e)}();class AtCmdExecutor extends CmdExecutor{constructor(n,s,e){super(function(e){return 0==e.indexOf("@"+n)},function(e,t){t=CmdPrehandleCenter.shared().handle(e,t);let o=/^\s*(.*)\s*$/.exec(t.substring(n.length+1))[1];return o&&0==o.length&&(o=null),s(e,o)},e)}}!function(){var e=new AtCmdExecutor("wait",function(e,t){return e.log()&&Message.cmdLog(`ç­‰å¾… ${(t/1e3).toFixed(2)} ç§’`),new Promise(e=>{setTimeout(()=>e(),t)})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("await",function(e,n){return new Promise(t=>{e="setTimeout(() =>  postMessage('0'), "+n+")",e=new Blob(["(function(){"+e.toString()+"})()"]),e=window.URL.createObjectURL(e);var e,o=new Worker(e);o.onmessage=function(e){o.terminate(),t()}})});CmdExecuteCenter.addExecutor(e)}(),!function(){let executor=new AtCmdExecutor("debug",function(performer,param){let text=param;">"==text[0]&&(text=JSON.stringify(eval(text.substring(1))));var message=`&nbsp;&nbsp;[debug]: <hiz>${text}</hiz>`;Message.append(message)});CmdExecuteCenter.addExecutor(executor)}(),!function(){var e=new AtCmdExecutor("print",function(e,t){Message.append(t)});CmdExecuteCenter.addExecutor(e)}();class UntilAtCmdExecutor extends CmdExecutor{constructor(a,l,e,r,d){super(function(e){return 0==e.indexOf("@"+a)},function(n,s){function i(t){var e=CmdPrehandleCenter.shared().handle(n,s);let o=/^\s*(.*)\s*$/.exec(e.substring(a.length+1))[1];null!=o&&0==o.length&&(o=null),1==l(n,o)?null!=d?setTimeout(e=>{t()},d):t():setTimeout(e=>{i(t)},null!=r?r:500)}return n.log()&&Message.cmdLog("ç­‰å¾…ï¼Œç›´è‡³ç¬¦åˆæ¡ä»¶",s),new Promise(e=>{i(e)})},e),this._key=a,this._assert=l}}function PerformerPromise(o,n,s){return new Promise(t=>{var e=new Performer("",o);s&&e.log(s),e.start(e=>{n?n(t):t()})})}!function(){var e=new UntilAtCmdExecutor("until",function(e,t){return AssertHolderCenter.get(t)()});CmdExecuteCenter.addExecutor(e)}(),!function(){let appropriate=function(e){return 0==e.indexOf("@js ")},execute=function(performer,cmd){let validCmd=CmdPrehandleCenter.shared().handle(performer,cmd),exp=validCmd.substring(4),result=(performer.log()&&Message.cmdLog("è°ƒç”¨ js",exp),/^\(\$([A-Za-z_][a-zA-Z0-9_]*?)\)\s*=\s*/.exec(exp));if(null==result)eval(exp);else{let name=result[1];exp=exp.substring(result[0].length),UpdateVariable(performer,name,eval(exp))}},executor=new CmdExecutor(appropriate,execute);CmdExecuteCenter.addExecutor(executor)}(),!function(){var e=new CmdExecutor(function(e){return 0==e.indexOf("@stop ")},function(e,t){let o=CmdPrehandleCenter.shared().handle(e,t).substring(6);e.log()&&Message.cmdLog("åœæ­¢æµç¨‹",o);var n,t=/^\(\$([A-Za-z_][a-zA-Z0-9_]*?)\)\s*=\s*/.exec(o);null==t?ManagedPerformerCenter.getAll().filter(e=>e.name()==o).forEach(e=>e.stop()):(n=t[1],o=o.substring(t[0].length),UpdateVariable(e,n,ManagedPerformerCenter.getAll().filter(e=>e.name()==o).forEach(e=>e.stop())))});CmdExecuteCenter.addExecutor(e)}(),VariableStore.register(e=>({":date":(new Date).getDate(),":day":(new Date).getDay(),":hour":(new Date).getHours(),":minute":(new Date).getMinutes(),":second":(new Date).getSeconds()})),!function(){var e=new CmdExecutor(function(e){return 0==e.indexOf("$wait ")},function(e,t){return PerformerPromise("@wait "+t.substring(6),null,e.log())});CmdExecuteCenter.addExecutor(e)}();var __ConfigDomIdCounter=0;function GetConfigDomId(){var e=__ConfigDomIdCounter;return __ConfigDomIdCounter+=1,"wsmud_raid_config_dom_id_"+e}var __ConfigPanelHtml="",__ConfigPanelInits=[],__ConfigPanelActions=[];class HashCmdExecutor extends CmdExecutor{constructor(t,n){super(function(e){return 0==e.indexOf("#"+t)},function(e,t){var o=CmdPrehandleCenter.shared().handle(e,t).substring(this._key.length+2),e=n(e,t,o);null!=e&&(e.html&&(__ConfigPanelHtml+=e.html),e.init&&__ConfigPanelInits.push(e.init),e.action)&&__ConfigPanelActions.push(e.action)}),this._key=t}}!function(){var e=new HashCmdExecutor("input",function(e,t,o){o=/^\(\$([a-zA-Z0-9_]+)\)\s?=\s?([^,]+?),(.*)\s*$/.exec(o);if(null==o)throw"é”™è¯¯çš„æ ¼å¼: "+t;let n=o[1];t=o[2];let s=null==o[3]?"":o[3],i=GetConfigDomId();return{html:`
            <p>
                <label for="${i}">&nbsp;* ${t}:&nbsp;</label><input style='width:80px' id ="${i}" type="text">
            </p>`,init:function(){$("#"+i).val(s)},action:function(){var e={};return e[n]=$("#"+i).val(),e}}});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new HashCmdExecutor("select",function(e,t,o){o=/^\(\$([a-zA-Z0-9_]+)\)\s?=\s?([^,]+?),([^,]+?),([^,]+?)\s*$/.exec(o);if(null==o)throw"é”™è¯¯çš„æ ¼å¼: "+t;let n=o[1];var t=o[2],s=o[3].split("|");let i=o[4],a=GetConfigDomId(),l="";s.forEach(e=>{l+=`<option value="${e}">${e}</option>`});return{html:`
            <p>
                <label for="${a}">&nbsp;* ${t}:&nbsp;</label><select style='width:80px' id="${a}">
                    ${l}
                </select>
            </p>`,init:function(){$("#"+a).val(i)},action:function(){var e={};return e[n]=$("#"+a).val(),e}}});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(function(e){return/^#config\s*$/.test(e)},function(n,e){return new Promise(e=>{var t=layer.open({type:1,skin:"layui-layer-rim",area:"350px",title:"é…ç½®å‚æ•°",content:__ConfigPanelHtml,offset:"auto",shift:2,move:!1,closeBtn:0,success:function(e,t){__ConfigPanelInits.forEach(e=>{e()});for(var o of e[0].children)"layui-layer-content"==o.className&&o.setAttribute("style","max-height: 370px;color: rgb(0, 128, 0);")},end:function(){__ConfigPanelHtml="",__ConfigPanelInits=[],__ConfigPanelActions=[]},btn:["è¿è¡Œæµç¨‹","å–æ¶ˆ"],yes:function(){__ConfigPanelActions.forEach(e=>{var t,o=e();for(t in o)o.hasOwnProperty(t)&&UpdateVariable(n,t,o[t])}),layer.close(t),e()},btn2:function(){n.stop(),e()}})})});CmdExecuteCenter.addExecutor(e)}();var WG=null,messageAppend=null,messageClear=null,T=null,L=null;Message.append=function(e){messageAppend(e)},Message.clean=function(){messageClear()};let RoleState={none:"å‘å‘†",liaoshang:"ç–—ä¼¤",dazuo:"æ‰“å",wakuang:"æŒ–çŸ¿",gongzuo:"å·¥ä½œ",lianxi:"ç»ƒä¹ ",xuexi:"å­¦ä¹ ",biguan:"é—­å…³",lianyao:"ç‚¼è¯",lingwu:"é¢†æ‚Ÿ",dushu:"è¯»ä¹¦",juhun:"èšé­‚",tuiyan:"æ¨æ¼”"};function FindItem(e,t,o,n,s){var i,a=o?t:"^"+t+"$",l=(/<[a-zA-Z]{3}>.+<\/[a-zA-Z]{3}>/g.test(t)?a="^"+t+"$":null!=n&&null!=(n={white:"wht",w:"wht",green:"hig",g:"hig",blue:"hic",b:"hic",yellow:"hiy",y:"hiy",purple:"HIZ",p:"HIZ",orange:"hio",o:"hio",red:"ord",r:"ord"}[n])&&(a=o?"<"+n+">.*"+t+".*</"+n+">":"<"+n+">"+t+"</"+n+">"),new RegExp(a));for(i of e)if(l.test(i.name)&&!FilterCenter.filter(s,i))return i;return null}var Role={id:null,name:null,grade:null,family:null,energy:0,money:0,hp:0,maxHp:0,mp:0,maxMp:0,status:{},equipments:[],items:{},stores:{},_weaponType:"",skills:{},profitInfo:null,kongfu:{quan:null,nei:null,zhao:null,qing:null,jian:null,dao:null,gun:null,zhang:null,bian:null,an:null},init:function(){WG.add_hook("login",function(e){Role.id=e.id,Role.status=[],setTimeout(function(){$("span[command=skills]").click(),setTimeout(e=>{$(".glyphicon-remove-circle").click()},500)},2e3),UI.showToolbar(),setTimeout(e=>{Server.getNotice()},3e3)}),$("li[command=SelectRole]").on("click",function(){Role.name=$(".role-list .select").text().split(/\s+/).pop()}),Role._monitorHpMp(),Role._monitorStatus(),Role._monitorState(),Role._monitorDeath(),Role._monitorSkillCD(),Role._monitorSkills(),Role._monitorGains(),Role._monitorItems(),Role._monitorCombat(),Role._monitorInfo(),Role._monitorWeapon()},hasStatus:function(e){e=Role.status[e];return null!=e&&!(e<(new Date).getTime())},isFree:function(){return!Role.hasStatus("busy")&&!Role.hasStatus("faint")&&!Role.hasStatus("rash")},gains(t,o){var n=Role._gains.slice(),s=-1,i=-1;for(let e=0;e<n.length;e++)if(n[e].timestamp>=t){s=e;break}for(let e=n.length-1;0<=e;e--)if(n[e].timestamp<=o){i=e;break}return-1==s||-1==i?[]:n.slice(s,i+1)},state:RoleState.none,wearing:function(e){for(var t of this.equipments)if(null!=t&&t.id==e)return!0;return!1},getEqId:function(e){e=this.equipments[e];return null==e?null:e.id},living:!0,combating:!1,rtime:!1,shimen:function(e){var t=(new Date).getTime();Role._shimen(0,t,e)},atPath:function(e){switch(arguments.length){case 0:return Room.path;case 1:return e==Room.path}},inRoom:function(e){switch(arguments.length){case 0:return Room.name;case 1:return e==Room.name}},findItem:function(e,t,o,n){return FindItem(Object.values(Role.items),e,t,o,n)},renew:function(e){new Performer("",`
            stopstate;$to æ‰¬å·åŸ-æ­¦åº™
            @liaoshang
            [if] (:mpPer)<0.8
                @dazuo
                stopstate
            `).start(e)},cleanBag:function(e){WG.clean_all(),e&&e()},tidyBag:function(e){Role._tidyBag(0,e)},hasCoolingSkill:function(){return 0<Role._coolingSkills.length},coolingSkills:function(){var e,t=[];for(e of Role._coolingSkills)t.push(e.split("_")[0]);return t},coolingSkill:function(e){return-1!=this.coolingSkills().indexOf(e)},hasSkill:function(e){return-1!=$(".combat-commands").html().indexOf(e)},weapon:function(){return Role._weaponType},_renewHookIndex:null,_renewStatus:"resting",_coolingSkills:[],_gains:[],_shimen:function(e,t,o){0==e&&(WG.SendCmd("stopstate"),WG.sm_button()),null!=SystemTips.search("ä½ å…ˆå»ä¼‘æ¯|å’Œæœ¬é—¨æ¯«æ— ç“œè‘›|ä½ æ²¡æœ‰",t)?o():setTimeout(function(){Role._shimen(e+1,t,o)},1e3)},_tidyBag:function(e,t){0==e&&WG.sell_all(),WG.packup_listener?10<e?(WG.packup_listener&&WG.sell_all(),t()):window.setTimeout(function(){Role._tidyBag(e+1,t)},1e3):window.setTimeout(t,1e3)},_monitorHpMp:function(){WG.add_hook(["items","sc","itemadd"],function(e){switch(e.type){case"items":if(null!=e.items)for(var t=e.items.length-1;0<=t;t--){var o=e.items[t];if(o.id==Role.id){Role.hp=o.hp,Role.maxHp=o.max_hp,Role.mp=o.mp,Role.maxMp=o.max_mp;break}}break;case"itemadd":case"sc":e.id==Role.id&&(null!=e.hp&&(Role.hp=e.hp),null!=e.max_hp&&(Role.maxHp=e.max_hp),null!=e.mp&&(Role.mp=e.mp),null!=e.max_mp)&&(Role.maxMp=e.max_mp)}})},_monitorStatus:function(){WG.add_hook(["items","status","itemadd"],function(e){switch(e.type){case"items":if(null!=e.items)for(var t=e.items.length-1;0<=t;t--){var o=e.items[t];if(o.id==Role.id){if(null==o.status)break;Role.status={};for(var n=(new Date).getTime(),s=o.status.length-1;0<=s;s--){var i=o.status[s];Role.status[i.sid]=n+i.duration-i.overtime}break}}break;case"status":var a;e.id==Role.id&&(a=(new Date).getTime(),"add"==e.action?Role.status[e.sid]=a+e.duration:"remove"==e.action&&delete Role.status[e.sid]);break;case"itemadd":if(e.id==Role.id&&null!=e.status){Role.status={};for(var l=(new Date).getTime(),r=e.status.length-1;0<=r;r--){var d=e.status[r];Role.status[d.sid]=l+d.duration-d.overtime}}}})},_monitorState:function(){WG.add_hook("state",function(e){var t=e.state;if(null!=t)for(var o in RoleState)if(RoleState.hasOwnProperty(o)){o=RoleState[o];if(-1!=t.indexOf(o))return void(Role.state=o)}Role.state=RoleState.none})},_monitorDeath:function(){WG.add_hook("die",function(e){1==e.relive?Role.living=!0:Role.living=!1})},_monitorInfo:function(){WG.add_hook("dialog",function(e){var t;"score"==e.dialog&&e.id==Role.id&&(null!=e.level&&(t=e.level.replace(/<\/?.+?>/g,""),Role.grade=t.replace(/ /g,"")),null!=e.family&&(Role.family=e.family),null!=e.jingli)&&(t=e.jingli.split("/"),Role.energy=t[0])})},_monitorItems:function(){WG.add_hook("dialog",function(t){if(null!=t.dialog){if("pack"==t.dialog){if(null!=t.items){Role.items={};for(let e of t.items)e.id&&(Role.items[e.id]=e)}else if(null!=t.id){if(null==t.remove&&null!=t.count)return void(Role.items[t.id]=t);if(null!=t.remove){var e=Role.items[t.id];if(null==e)return;null!=e.count?e.count-=t.remove:e.count=0,0==e.count&&delete Role.items[t.id]}}null!=t.eqs?Role.equipments=CopyObject(t.eqs):null!=t.uneq&&null!=t.id?((o=Role.equipments[t.uneq]).count=1,o.id=t.id,Role.items[o.id]=o,Role.equipments[t.uneq]=null):null!=t.eq&&null!=t.id&&(o=Role.items[t.id],Role.equipments[t.eq]=o,delete Role.items[t.id]),null!=t.money&&(Role.money=t.money)}if("list"==t.dialog)if(null!=t.stores){Role.stores={};for(let e of t.stores)e.id&&(Role.stores[e.id]=e)}else{var o;null!=t.id&&null!=t.storeid&&null!=t.store&&(e=Role.items[t.id],o=Role.stores[t.storeid],null==e&&((e=Object.assign({},o,{count:0})).id=t.id,Role.items[e.id]=e),null==o&&(o=Object.assign({},e,{count:0}),Role.stores[o.id]=o),e.count-=t.store,o.count+=t.store,e.count<=0&&delete Role.items[t.id],o.count<=0)&&delete Role.stores[t.storeid]}}})},_monitorGains:function(){WG.add_hook("dialog",function(e){var t,o,n;"pack"==e.dialog&&null!=e.id&&null!=e.name&&null!=e.unit&&null!=e.count&&null==e.remove&&(t=(new Date).getTime(),o=Role.items[e.id],n=e.count,null!=o&&null!=o.count&&(n-=o.count),Role._gains.push({timestamp:t,name:e.name,count:n,unit:e.unit}))})},_monitorSkillCD:function(){WG.add_hook("dispfm",function(e){var t=Date.parse(new Date),o=e.id+"_"+t;Role._coolingSkills.push(o),window.setTimeout(function(){var e=Role._coolingSkills.indexOf(o);-1!=e&&Role._coolingSkills.splice(e,1)},e.distime),null!=e.rtime&&0!=e.rtime&&(null!=Role._rtimer&&clearTimeout(Role._rtimer),Role.rtime=!0,Role._rtimer=setTimeout(e=>{Role.rtime=!1},e.rtime))})},_monitorSkills:function(){function a(e,t,o){switch(e){case"unarmed":Role.kongfu.quan=t,Role.kongfu.quan_c=o;break;case"force":Role.kongfu.nei=t,Role.kongfu.nei_c=o;break;case"parry":Role.kongfu.zhao=t,Role.kongfu.zhao_c=o;break;case"dodge":Role.kongfu.qing=t,Role.kongfu.qing_c=o;break;case"sword":Role.kongfu.jian=t,Role.kongfu.jian_c=o;break;case"blade":Role.kongfu.dao=t,Role.kongfu.dao_c=o;break;case"club":Role.kongfu.gun=t,Role.kongfu.gun_c=o;break;case"staff":Role.kongfu.zhang=t,Role.kongfu.zhang_c=o;break;case"whip":Role.kongfu.bian=t,Role.kongfu.bian_c=o;break;case"throwing":Role.kongfu.an=t,Role.kongfu.an_c=o}}WG.add_hook("dialog",function(e){if(null!=e.dialog&&"skills"==e.dialog){if(null!=e.items)for(var t of e.items){var o,n=t.enable_skill||null,s="";Role.skills=e.items;for(o of e.items)o.id==n&&(s=/<([^<>]*)>/.exec(o.name)[1]);a(t.id,n,s.toLocaleLowerCase())}if(null!=e.id&&null!=e.enable){0==(n=e.enable)&&(n="none");var i,s="";for(i of Role.skills)i.id==n&&(s=/<([^<>]*)>/.exec(i.name)[1]);a(e.id,n,s)}}})},_monitorCombat:function(){WG.add_hook("combat",function(e){null!=e.start&&1==e.start?Role.combating=!0:null!=e.end&&1==e.end&&(Role.combating=!1)}),WG.add_hook("text",function(e){null!=e.msg&&(-1==e.msg.indexOf("åªèƒ½åœ¨æˆ˜æ–—ä¸­ä½¿ç”¨")&&-1==e.msg.indexOf("è¿™é‡Œä¸å…è®¸æˆ˜æ–—")&&-1==e.msg.indexOf("æ²¡æ—¶é—´è¿™ä¹ˆåš")||(Role.combating=!1),-1!=e.msg.indexOf("æˆ˜æ–—ä¸­æ‰“åï¼Œä½ æ‰¾æ­»å—ï¼Ÿ")||-1!=e.msg.indexOf("ä½ æ­£åœ¨æˆ˜æ–—"))&&(Role.combating=!0)})},_monitorWeapon:function(){WG.add_hook("perform",function(e){null!=e.skills&&(-1!=JSON.stringify(e.skills).indexOf("sword")?Role._weaponType="sword":-1!=JSON.stringify(e.skills).indexOf("blade")?Role._weaponType="blade":Role._weaponType="")})}},Room={name:null,path:null,updateTimestamp:null,init:function(){this._monitorLocation(),this._monitorItemsInRoom(),this._monitorDeath()},getItem:function(e){return this._itemsInRoom[e]},getItemId:function(e,t,o,n){for(var s of Object.values(this._itemsInRoom))if(1==t){if(-1!=s.name.indexOf(e)&&(1!=o||-1==s.name.indexOf("çš„å°¸ä½“"))&&!FilterCenter.filter(n,s))return s.id}else if(s.name==e&&!FilterCenter.filter(n,s))return s.id;return null},didKillItemsInRoom:function(e){var t,o=this._deadItemsInRoom.slice();for(t of e){var n=!1;for(let e=0;e<o.length;e++){var s=o[e];if(1==t.blurry?-1!=s.name.indexOf(t.name)&&(n=!0):s.name==t.name&&(n=!0),n){o.splice(e,1);break}}if(!n)return!1}return!0},_itemsInRoom:{},_deadItemsInRoom:[],_monitorLocation:function(){WG.add_hook("room",function(e){Room.name=e.name,Room.path=e.path,Room.updateTimestamp=(new Date).getTime(),Room._itemsInRoom={},Room._deadItemsInRoom=[]})},_monitorItemsInRoom:function(){WG.add_hook(["items","itemadd","itemremove","sc","status"],function(t){switch(t.type){case"items":if(null!=t.items)for(var e of t.items)null!=e.name&&null!=e.id&&(Room._itemsInRoom[e.id]=e);break;case"itemadd":null!=t.name&&null!=t.id&&(Room._itemsInRoom[t.id]=t);break;case"itemremove":null!=t.id&&delete Room._itemsInRoom[t.id];break;case"sc":var o;null!=t.id&&(null!=(o=Room._itemsInRoom[t.id])&&(null!=t.hp&&(o.hp=t.hp),null!=t.max_hp&&(o.max_hp=t.max_hp),null!=t.mp&&(o.mp=t.mp),null!=t.max_mp))&&(o.max_mp=t.max_mp);break;case"status":if(null!=t.action&&null!=t.id&&null!=t.sid){var n=Room._itemsInRoom[t.id];if(null!=n)if("add"==t.action)null==n.status&&(n.status=[]),n.status.push({sid:t.sid,name:t.name,duration:t.duration,overtime:0});else if("remove"==t.action)for(let e=0;e<n.status.length;e++)if(n.status[e].sid==t.sid){n.status.splice(e,1);break}}}})},_monitorDeath:function(){WG.add_hook("sc",function(e){if(null!=e.id&&null!=e.hp&&0==e.hp)for(var t of Object.values(Room._itemsInRoom))if(t.id==e.id)return void Room._deadItemsInRoom.push(t)})}};class SystemTip{constructor(e){this.timestamp=(new Date).getTime(),this.text=e}}var SystemTips={init:function(){this._monitorSystemTips()},search:function(e,t){var o=new RegExp(e),n=this._tips.slice();for(let e=n.length-1;0<=e;e--){var s=n[e];if(s.timestamp<t)break;s=o.exec(s.text);if(s)return s}return null},clean:function(e){for(;;){if(this._tips.length<=0)break;if(this._tips[0].timestamp>e)break;this._tips.shift()}},rejectTimestamp:null,_monitorSystemTips:function(){var o=this;WG.add_hook("text",function(e){var t=new SystemTip(e.msg);o._push(t),"ä¸è¦æ€¥ï¼Œæ…¢æ…¢æ¥ã€‚"==e.msg&&(o.rejectTimestamp=(new Date).getTime())}),WG.add_hook("item",function(e){var e=e.desc;null!=e&&(e=new SystemTip(e),o._push(e))})},_push:function(e){this._tips.length>=this._maxCapacity&&this._tips.shift(),this._tips.push(e)},_tips:[],_maxCapacity:100};class MsgTip{constructor(e,t,o,n){this.timestamp=(new Date).getTime(),this.content=e,this.ch=t,this.name=o,this.uid=n}}var MsgTips={init:function(){this._monitorSystemTips()},search:function(e,t){var o=new RegExp(e),n=this._tips.slice();for(let e=n.length-1;0<=e;e--){var s=n[e];if(s.timestamp<t)break;s=o.exec(s.content);if(s)return s}return null},clean:function(e){for(;;){if(this._tips.length<=0)break;if(this._tips[0].timestamp>e)break;this._tips.shift()}},rejectTimestamp:null,_monitorSystemTips:function(){var t=this;WG.add_hook("msg",function(e){e=new MsgTip(e.content,e.ch,e.name,e.uid);t._push(e)})},_push:function(e){this._tips.length>=this._maxCapacity&&this._tips.shift(),this._tips.push(e)},_tips:[],_maxCapacity:100},DialogList={init:function(){this._monitorDialogList()},timestamp:null,findItem:function(e,t,o,n){return FindItem(this._list,e,t,o,n)},_list:[],_monitorDialogList:function(){let o=this;WG.add_hook("dialog",function(e){let t=null;null!=e.selllist?t=e.selllist:null!=e.stores?t=e.stores:"pack2"==e.dialog&&null!=e.items&&(t=e.items),null!=t&&(o.timestamp=(new Date).getTime(),o._list=t)})}},TaskList={init:function(){this._monitorTasksList()},search:function(e,t){if(!(this._timestamp<t)){var o,n=new RegExp(e);for(o of this._list){var s=n.exec(o);if(s)return s}}return null},_timestamp:null,_list:[],_monitorTasksList:function(){let n=this;WG.add_hook("dialog",function(e){if(null!=e.dialog&&"tasks"==e.dialog&&null!=e.items){var t,o=[];for(t of e.items)o.push(t.desc);n._timestamp=(new Date).getTime(),n._list=o}})}},Xiangyang={init:function(){this._monitorXiangyang()},search:function(e,t){return!(this._timestamp<t)&&new RegExp(e).exec(this._desc)||null},_timestamp:null,_desc:"",_monitorXiangyang:function(){let t=this;WG.add_hook("dialog",function(e){null!=e.dialog&&"fam"==e.t&&8==e.index&&null!=e.desc&&(t._timestamp=(new Date).getTime(),t._desc=e.desc)})}};!function(){function n(){return"flow_store@"+Role.id}function s(){let e=GM_getValue(n(),null);return e=null==e?GM_getValue("flow_store@null",{}):e}(FlowStore=new PersistentCache((e,t)=>{var o=s();o[e]=t,GM_setValue(n(),o)},e=>s(),e=>{var t=s();delete t[e],GM_setValue(n(),t)})).corver=function(e){GM_setValue(n(),e)}}(),!function(){function n(){return"global_params@"+Role.id}function s(){let e=GM_getValue(n(),null);return e=null==e?GM_getValue("global_params@null",{}):e}PersistentVariables=new PersistentCache((e,t)=>{var o=s();o[e]=t,GM_setValue(n(),o)},e=>s(),e=>{var t=s();delete t[e],GM_setValue(n(),t)}),VariableStore.register(e=>PersistentVariables.getAll())}(),VariableStore.register(e=>({":online":WG.online,":id":Role.id,":name":Role.name,":grade":Role.grade,":family":Role.family,":energy":Role.energy,":money":Role.money,":hp":Role.hp,":maxHp":Role.maxHp,":hpPer":Role.hp/Role.maxHp,":mp":Role.mp,":maxMp":Role.maxMp,":mpPer":Role.mp/Role.maxMp,":living":Role.living,":state":Role.state,":combating":Role.combating,":free":Role.isFree,":gains":Role.profitInfo,":room":Room.name,":path":Room.path,":eq0":Role.getEqId(0),":eq1":Role.getEqId(1),":eq2":Role.getEqId(2),":eq3":Role.getEqId(3),":eq4":Role.getEqId(4),":eq5":Role.getEqId(5),":eq6":Role.getEqId(6),":eq7":Role.getEqId(7),":eq8":Role.getEqId(8),":eq9":Role.getEqId(9),":eq10":Role.getEqId(10),":kf_quan":Role.kongfu.quan,":kf_nei":Role.kongfu.nei,":kf_zhao":Role.kongfu.zhao,":kf_qing":Role.kongfu.qing,":kf_jian":Role.kongfu.jian,":kf_dao":Role.kongfu.dao,":kf_gun":Role.kongfu.gun,":kf_zhang":Role.kongfu.zhang,":kf_bian":Role.kongfu.bian,":kf_an":Role.kongfu.an,":kf_quan_c":Role.kongfu.quan_c,":kf_nei_c":Role.kongfu.nei_c,":kf_zhao_c":Role.kongfu.zhao_c,":kf_qing_c":Role.kongfu.qing_c,":kf_jian_c":Role.kongfu.jian_c,":kf_dao_c":Role.kongfu.dao_c,":kf_gun_c":Role.kongfu.gun_c,":kf_zhang_c":Role.kongfu.zhang_c,":kf_bian_c":Role.kongfu.bian_c,":kf_an_c":Role.kongfu.an_c})),VariableStore.register(e=>({":room ":function(e){var t;for(t of e.split(","))if(-1!=Room.name.indexOf(t))return!0;return!1},":cd ":function(e){return Role.coolingSkill(e)},":status ":function(e){var t=e.split(",");if(1<t.length){var o=t[0],t=Room.getItem(t[1]);if(null!=t&&null!=t.status)for(var n of t.status)if(n.sid==o)return!0;return!1}return Role.hasStatus(e)},":hp ":function(e){e=Room.getItem(e);return null!=e?e.hp:-1},":weapon ":function(e){return e==Role.weapon()},":maxHp ":function(e){e=Room.getItem(e);return null!=e?e.max_hp:-1},":mp ":function(e){e=Room.getItem(e);return null!=e?e.mp:-1},":maxMp ":function(e){e=Room.getItem(e);return null!=e?e.max_mp:-1},":exist ":function(e){return null!=e&&null!=Room.getItem(e)},":findName ":function(e){return null!=e&&null!=(e=Room.getItem(e))?e.name.replace(/<.+?>|&lt.*/g,"").split(" ").pop():null}}));let FilterCenter={filter:function(filterExp,obj){if(null==filterExp)return!1;let exp=filterExp.substring(1,filterExp.length-2),yes=eval(""+exp);return yes}};function ReplacePlaceholder(e){for(var t=/\{([a-z]?)([^a-z%#]+?|<\w+>[^a-z%#]+?<\/\w+>)([a-z]?)(%?)(#?)\}\??(#[^#{}]*#)?/g,o=[],n=t.exec(e);null!=n;)o.push({text:n[0],location:""==n[1]?null:n[1],name:n[2],blurry:"%"!=n[4],quality:""==n[3]?null:n[3],type:"#"!=n[5]?"id":"amount",filterExp:n[6]}),n=t.exec(e);var s;let i=e;for(s of o){var a=function(t){let e=[];for(var o of e=null==t.location?null==t.quality?["r","b","d"]:["b","d"]:[t.location]){let e=null;switch(o){case"r":e=Room.getItemId(t.name,t.blurry,!1,t.filterExp);break;case"b":var n=Role.findItem(t.name,t.blurry,t.quality,t.filterExp);n&&(e="id"==t.type?n.id:n.count);break;case"d":n=DialogList.findItem(t.name,t.blurry,t.quality,t.filterExp);n&&(e="id"==t.type?n.id:n.count)}if(null!=e)return e}return null}(s);i=i.replace(s.text,a)}return i}!function(){var e=new CmdPrehandler(function(e,t){return ReplacePlaceholder(t)});CmdPrehandleCenter.shared().addHandler(e)}(),!function(){var e=new PrecompileRule(function(e){var t,o,n=[],s="",i=!1;for(t of e)if(0!=t.indexOf("`")&&!i||(0==(o=t).indexOf("`")&&(o=t.substr(1)),s=s+" "+(o="`"==t[t.length-1]?t.substr(0,t.length-1):o),i=!0),"`"==t[t.length-1])n[n.length-1]=n[n.length-1]+s,s="",i=!1;else if(!i){var a=/^\s*/.exec(t)[0],l=/(\{[^\}]+\})([^\?]|$)/g;let e=l.exec(t);for(var r=t.indexOf("@js");null!=e&&-1==r;)n.push(`${a}@until ${e[1]}? != null`),e=l.exec(t);n.push(t)}return n},PrecompileRulePriority.low);PrecompileRuleCenter.shared().addRule(e)}(),!function(){var e=new CmdExecutor(e=>0==e.indexOf("<-stopSSAuto")||0==e.indexOf("@stopSSAuto"),(e,t)=>{e.log()&&Message.cmdLog("æš‚åœè‡ªåŠ¨å©šå®´å’Œè‡ªåŠ¨Boss","ç›®å‰æ‰‹åŠ¨ç»ˆæ­¢æµç¨‹ä¸ä¼šè‡ªåŠ¨æ¢å¤"),WG.stopAllAuto()});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(e=>0==e.indexOf("stopSSAuto->")||0==e.indexOf("@recoverSSAuto"),(e,t)=>{e.log()&&Message.cmdLog("æ¢å¤è‡ªåŠ¨å©šå®´å’Œè‡ªåŠ¨Bossè®¾ç½®"),WG.reSetAllAuto()});CmdExecuteCenter.addExecutor(e)}();var __RecordGainsFrom=null;!function(){var e=new CmdExecutor(e=>0==e.indexOf("<-recordGains"),(e,t)=>{e.log()&&Message.cmdLog("å¼€å§‹è®°å½•ç‰©å“è·å–"),__RecordGainsFrom=(new Date).getTime()});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new CmdExecutor(e=>0==e.indexOf("recordGains->"),(e,t)=>{var o,n,s=Role.gains(__RecordGainsFrom,(new Date).getTime()),i={},a=(s.forEach(e=>{var t=0,o=i[e.name];o&&(t=o.count),i[e.name]={count:t+e.count,unit:e.unit}}),"");for(o in-1==t.indexOf("recordGains->silent")&&(Message.clean(),Message.append("&nbsp;&nbsp;> æˆ˜åˆ©å“åˆ—è¡¨å¦‚ä¸‹ï¼š")),i)i.hasOwnProperty(o)&&(n=i[o],-1==t.indexOf("recordGains->silent")&&Message.append("&nbsp;&nbsp;* "+o+" <wht>"+n.count+n.unit+"</wht>"),a+=`&nbsp;&nbsp;* ${o} <wht>${n.count}${n.unit}</wht><br>`);Role.profitInfo=""!=a?a:null,0!=t.indexOf("recordGains->nopopup")&&0!=t.indexOf("recordGains->silent")&&layer.open({type:1,area:["380px","300px"],title:"æˆ˜åˆ©å“åˆ—è¡¨",content:a,offset:"auto",shift:2})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("toolbar",function(e,t){return e.timeSeries((new Date).getTime()),$(`span[command=${t}]`).click(),new Promise(t=>{setTimeout(e=>{$(".glyphicon-remove-circle").click(),t()},500)})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilAtCmdExecutor("liaoshang",function(e,t){return 1<=Role.hp/Role.maxHp?(WG.SendCmd("stopstate"),!0):(Role.state!=RoleState.liaoshang&&WG.SendCmd("stopstate;liaoshang"),!1)},null,1e3);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilAtCmdExecutor("dazuo",function(e,t){return.99<Role.mp/Role.maxMp?(WG.SendCmd("stopstate"),!0):(Role.state!=RoleState.dazuo&&WG.SendCmd("stopstate;dazuo"),!1)},null,1e3);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilAtCmdExecutor("eq",function(e,t){t=t.split(",");let o=[];return t.forEach(e=>{Role.wearing(e)||o.push("eq "+e)}),!(0<o.length&&(WG.SendCmd("stopstate;"+o.join(";")),1))},null,1e3);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilAtCmdExecutor("cd",function(e,t){if(null==t)return!Role.hasCoolingSkill();let o=t,n=!1;"^"==o[0]&&(o=o.substring(1),n=!0);var s=o.split(",");if(n){for(var i of Role.coolingSkills())if(-1==s.indexOf(i))return!1}else{var a,l=Role.coolingSkills();for(a of s)if(-1!=l.indexOf(a))return!1}return!0});CmdExecuteCenter.addExecutor(e)}();class UntilSearchedAtCmdExecutor extends UntilAtCmdExecutor{constructor(e,u){super(e,function(t,e){var o=[],n=/\(\$[a-zA-Z0-9_]+?\)/g;let s=n.exec(e);for(;null!=s;)o.push(s[0]),s=n.exec(e);let i=e;for(let e=0;e<o.length;e++){var a=o[e];i=i.replace(a,"(.+?)")}var l=u(i,t.timeSeries());if(null==l)return!1;for(let e=0;e<o.length;e++){var r=o[e],r=r.substring(2,r.length-1),d=l[e+1];null!=d&&UpdateVariable(t,r,d)}return!0})}}function UntilRoleFreePerformerPromise(e,t){return PerformerPromise("@until (:free) == true",e,t)}!function(){var e=new UntilSearchedAtCmdExecutor("tip",(e,t)=>SystemTips.search(e,t));CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilSearchedAtCmdExecutor("msgtip",(e,t)=>MsgTips.search(e,t));CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilSearchedAtCmdExecutor("task",(e,t)=>TaskList.search(e,t));CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilSearchedAtCmdExecutor("xy",(e,t)=>Xiangyang.search(e,t));CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilAtCmdExecutor("kill",function(e,t){var o=t.split(","),n=[];for(let t=0;t<o.length;t++){const s=o[t];let e=!0;"%"==s.substring(s.length-1)&&(s=s.substring(0,s.length-1),e=!1),n.push({name:s,blurry:e})}if(Room.didKillItemsInRoom(n))return!0;{let t="";return n.forEach(e=>{e=Room.getItemId(e.name,e.blurry,!0);null!=e&&(t+="kill "+e+";")}),WG.SendCmd(t),!1}},null,1e3,1e3);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new UntilAtCmdExecutor("dialog",function(e,t){return DialogList.timestamp>e.timeSeries()});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("cleanBag",function(e,t){return e.log()&&Message.cmdLog("æ¸…ç†åŒ…è£¹"),UntilRoleFreePerformerPromise(e=>{WG.SendCmd("$cleanall"),setTimeout(e,1e3)})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("tidyBag",function(e,t){return e.log()&&Message.cmdLog("æ•´ç†åŒ…è£¹"),UntilRoleFreePerformerPromise(t=>{Role.tidyBag(e=>{setTimeout(t,1e3)})})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("shimen",function(e,t){return e.log()&&Message.cmdLog("è‡ªåŠ¨å®Œæˆå…è®¸æ”¾å¼ƒçš„æ”¾å¼ƒå¸ˆé—¨"),UntilRoleFreePerformerPromise(t=>{Role.shimen(e=>{setTimeout(t,1e3)})})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("renew",function(e,t){return e.log()&&Message.cmdLog("æ¢å¤è§’è‰²æ°”è¡€å’Œå†…åŠ›"),UntilRoleFreePerformerPromise(t=>{Role.renew(e=>{setTimeout(t,1e3)})})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("beep",function(e,t){Beep()});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("push",function(e,t){Push(t)});CmdExecuteCenter.addExecutor(e)}();var SkillStateMachine={perform:function(e,t){var o=(new Date).getTime();this._perform(e,t,o)},_perform:function(n,t,s){if(!(null!=this._skillStack[n]&&this._skillStack[n]>s)){let o=this;if(!Role.isFree()&&!t||Role.coolingSkill(n)||Role.rtime)setTimeout(e=>{o._perform(n,t,s)},200);else{this._skillStack[n]=s,WG.SendCmd("perform "+n);let t=setInterval(e=>{Role.coolingSkill(n)||0==Role.combating?(clearInterval(t),null!=o._skillStack[n]&&o._skillStack[n]==s&&delete o._skillStack[n]):Role.isFree()&&!Role.rtime&&WG.SendCmd("perform "+n)},1e3)}}},reset:function(){this._skillStack={}},_skillStack:{},_performNum:0},__systemCmdDelay=1500;!function(){var e=new AtCmdExecutor("cmdDelay",function(e,t){e._cmdDelay=parseInt(t)});CmdExecuteCenter.addExecutor(e)}();let UnpackSystemCmd=function(e){let t=e;var o=/([^;]+)\[(\d+?)\]/g;let n=o.exec(e);for(;null!=n;){var s=n[1],i=parseInt(n[2]),i=new Array(i).fill(s).join(";");t=t.replace(n[0],i),n=o.exec(e)}return t},GetDungeonFlow=(!function(){var e=new CmdExecutor(e=>!0,(i,e)=>{let a=CmdPrehandleCenter.shared().handle(i,e);return a=UnpackSystemCmd(a),UntilRoleFreePerformerPromise(o=>{let n=(new Date).getTime(),e=0;var t=n-SystemTips.rejectTimestamp,s=(t<1500&&(e=t),t="setTimeout(() =>  postMessage('0'), "+e+")",t=new Blob(["(function(){"+t.toString()+"})()"]),t=window.URL.createObjectURL(t),new Worker(t));s.onmessage=function(e){s.terminate(),i.log()&&Message.cmdLog("æ‰§è¡Œç³»ç»Ÿå‘½ä»¤",a),i.timeSeries(n),i.systemCmdTimestamp=n,WG.SendCmd(a);var t=null==i._cmdDelay?__systemCmdDelay:i._cmdDelay;setTimeout(o,t)}})},CmdExecutorPriority.low);CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("force",function(o,n){return new Promise(e=>{o.log()&&Message.cmdLog("å¼ºè¡Œæ‰§è¡Œç³»ç»Ÿå‘½ä»¤",n),WG.SendCmd(n);var t=null==o._cmdDelay?__systemCmdDelay:o._cmdDelay;setTimeout(e,t)})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("perform",function(e,t){var o;for(o of t.split(","))SkillStateMachine.perform(o,!1)});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("on",function(e,t){unsafeWindow.TriggerCenter.activate(t)});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("off",function(e,t){unsafeWindow.TriggerCenter.deactivate(t)});CmdExecuteCenter.addExecutor(e)}(),function(e){for(var t of Dungeons)if(t.name==e)return t.source;return null}),AutoDungeonName=function(e){var e=e.split(" "),t=e[0];let o="";switch(e[1]){case"0":if(GetDungeonFlow(t))return t;if(o=t+"(ç®€å•)",GetDungeonFlow(o))return o;break;case"1":if(o=t+"(å›°éš¾)",null!=GetDungeonFlow(o))return o;break;case"2":if(o=t+"(ç»„é˜Ÿ)",null!=GetDungeonFlow(o))return o}return null};function GetDungeonSource(e){e=GetDungeonFlow(e);return null==e?null:`
[if] (_DungeonHpThreshold) == null
    ($_DungeonHpThreshold) = 50
[if] (_DungeonWaitSkillCD) == null
    ($_DungeonWaitSkillCD) = æ‰“å¼€
[if] (_DungeonBagCleanWay) == null
    ($_DungeonBagCleanWay) = å­˜ä»“åŠå”®å–
[if] (_DungeonRecordGains) == null
    ($_DungeonRecordGains) = æ˜¯
#select ($_DungeonHpThreshold) = å‰¯æœ¬å†…ç–—ä¼¤ï¼Œå½“æ°”è¡€ä½äºç™¾åˆ†æ¯”,100|90|80|70|60|50|40|30|20|10,(_DungeonHpThreshold)
#select ($_DungeonWaitSkillCD) = Bossæˆ˜å‰ç­‰å¾…æŠ€èƒ½å†·å´,æ‰“å¼€|å…³é—­,(_DungeonWaitSkillCD)
#select ($_DungeonBagCleanWay) = èƒŒåŒ…æ¸…ç†æ–¹æ¡ˆ,ä¸æ¸…ç†|å”®å–|å­˜ä»“åŠå”®å–,(_DungeonBagCleanWay)
#select ($_DungeonRecordGains) = ç»“æŸåæ˜¾ç¤ºæ”¶ç›Šç»Ÿè®¡,æ˜¯|å¦,(_DungeonRecordGains)
#input ($_repeat) = é‡å¤æ¬¡æ•°,1
#config
[if] (arg0) != null
    ($_DungeonHpThreshold) = (arg0)
[if] (arg1) != null
    ($_DungeonWaitSkillCD) = (arg1)
[if] (arg2) != null
    ($_DungeonBagCleanWay) = (arg2)
[if] (arg3) != null
    ($_repeat) = (arg3)
<-stopSSAuto
stopstate
<---
[if] (_DungeonHpThreshold) == null
    ($_DungeonHpThreshold) = 50
($hpPer) = (_DungeonHpThreshold)/100
[if] (:hpPer) < (hpPer)
    @liaoshang
--->
[if] (_DungeonRecordGains) == æ˜¯
    <-recordGains
($_i) = 0
[if] (_repeat) == null
    ($_repeat) = 1
[while] (_i) < (_repeat)
    @renew
    [if] (_DungeonBagCleanWay) == å”®å–
        @cleanBag
    [else if] (_DungeonBagCleanWay) == å­˜ä»“åŠå”®å–
        @tidyBag
${SourceCodeHelper.appendHeader("    ",e)}
    cr;cr over
    ($_i) = (_i) + 1
[if] (_DungeonBagCleanWay) == å”®å–
    @cleanBag
[else if] (_DungeonBagCleanWay) == å­˜ä»“åŠå”®å–
    @tidyBag
$to ä½æˆ¿-ç»ƒåŠŸæˆ¿;dazuo
[if] (_DungeonRecordGains) == æ˜¯
    recordGains->
stopSSAuto->`}!function(){var e=new AtCmdExecutor("fb",function(e,t){let n=AutoDungeonName(t);if(null!=n){let o=GetDungeonSource(n);return new Promise(t=>{var e=new Performer("è‡ªåŠ¨å‰¯æœ¬-"+n,o);e.log(!0),e.start(e=>{t()})})}Message.append("æš‚ä¸æ”¯æŒæ¬¡å‰¯æœ¬å“¦ï¼Œæ¬¢è¿åˆ°è®ºå›åˆ†äº«æ­¤å‰¯æœ¬æµç¨‹ã€‚")});CmdExecuteCenter.addExecutor(e)}();let Dungeons=[{name:"åå±±è®ºå‰‘",source:`
@print ğŸ‘‘ æ„Ÿè°¢ koyodaklaã€freesunny å¯¹æ­¤å‰¯æœ¬ä»£ç æä¾›çš„å¸®åŠ©ã€‚
jh fb 30 start1;cr huashan/lunjian/leitaixia
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go up
@tip æ­å–œä½ æˆ˜èƒœäº†äº”ç»
@wait 1000
jump bi
get all from {räº”ç»å®ç®±}`},{name:"å…‰æ˜é¡¶(ç»„é˜Ÿ)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ dtooboss åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 26 start3;cr mj/shanmen 2 0
go north;go west;go northwest
@kill å†·è°¦
go north
@kill å¼ ä¸­
go north
@kill å‘¨é¢ 
go north;go north
@kill é¢œå£
go east
@kill å”æ´‹
go north
@kill è¾›ç„¶
go west;go west
@kill åº„é“®
go south
@kill é—»è‹æ¾
go east;go south
@kill è¯´ä¸å¾—,å½­è¹ç‰
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[2]
@kill éŸ¦ä¸€ç¬‘,æ®·å¤©æ­£
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[2]
@kill å¼ æ— å¿Œ,æ¨é€,èŒƒé¥`},{name:"å…‰æ˜é¡¶",source:`
@print ğŸ‘‘ æ„Ÿè°¢ dtooboss åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 26 start1;cr mj/shanmen
go north;go west;go northwest
@kill å†·è°¦
go north
@kill å¼ ä¸­
go north
@kill å‘¨é¢ 
go north;go north
@kill é¢œå£
go east
@kill å”æ´‹
go north
@kill è¾›ç„¶
go west;go west
@kill åº„é“®
go south
@kill é—»è‹æ¾
go east;go south
@kill è¯´ä¸å¾—,å½­è¹ç‰
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[2]
@kill éŸ¦ä¸€ç¬‘,æ®·å¤©æ­£
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[2]
@kill å¼ æ— å¿Œ,æ¨é€,èŒƒé¥`},{name:"ç‡•å­å(å›°éš¾)",source:`
jh fb 23 start2;cr murong/anbian 1 0
go east;go east
@kill åŒ…ä¸åŒ
go east;go south;go east;go south;go south
@kill ç‹å¤«äºº
go north;go north;go west;go north
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east;go east;go east
@kill æ…•å®¹å¤
go west;go north
look pai;bai pai[3]
go north;search
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go south
@kill æ…•å®¹åš
go east
@kill é˜¿æœ±`},{name:"ç‡•å­å(ç®€å•)",source:`
jh fb 23 start1;cr murong/anbian
go east;go east
@kill åŒ…ä¸åŒ
go east;go south;go east;go south;go south
@kill ç‹å¤«äºº
go north;go north;go west;go north
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east;go east;go east
@kill æ…•å®¹å¤
go west;go north
look pai;bai pai[3]
go north;search
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go south
@kill æ…•å®¹åš
go east
@kill é˜¿æœ±`},{name:"ç‡•å­å(å·ä¹¦)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ Airson åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 23 start1;cr murong/anbian
go east;go east
@kill åŒ…ä¸åŒ
go east;go east;go east;go north
look pai;bai pai[3]
go north;search`},{name:"ç§»èŠ±å®«(å›°éš¾)",source:`
jh fb 22 start2;cr huashan/yihua/shandao 1 0
go south[5]
go south[5]
go south[5]
@kill èŠ±æœˆå¥´
go south;go south
@kill ç§»èŠ±å®«å¥³å¼Ÿå­,ç§»èŠ±å®«å¥³å¼Ÿå­
go south
@kill ç§»èŠ±å®«å¥³å¼Ÿå­,ç§»èŠ±å®«å¥³å¼Ÿå­
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go southeast
@kill æ¶Ÿæ˜Ÿ
[if] {ré‚€æœˆ}? != null
    @kill é‚€æœˆ
[if] {é‚€æœˆçš„å°¸ä½“}? == null
    [if] (_DungeonWaitSkillCD) == æ‰“å¼€
        @cd
go northwest;go southwest
[if] {ré‚€æœˆ}? != null
    @kill é‚€æœˆ
[if] {bç«æŠ˜å­g}? != null
    look hua
    @tip ä½ æ•°äº†ä¸‹å¤§æ¦‚æœ‰($number)æœµèŠ±
    go southeast
    look bed;pushstart bed
    pushleft bed[(number)]
    @await 1000
    pushright bed[8]
    @await 1000
    go down;fire;go west
    @kill èŠ±æ— ç¼º
    look xia;open xia`},{name:"ç§»èŠ±å®«(ç®€å•)",source:`
jh fb 22 start1;cr huashan/yihua/shandao
go south[5]
go south[5]
go south[5]
@kill èŠ±æœˆå¥´
go south;go south
@kill ç§»èŠ±å®«å¥³å¼Ÿå­,ç§»èŠ±å®«å¥³å¼Ÿå­
go south
@kill ç§»èŠ±å®«å¥³å¼Ÿå­,ç§»èŠ±å®«å¥³å¼Ÿå­
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go southeast
@kill æ¶Ÿæ˜Ÿ
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go northwest;go southwest
@kill é‚€æœˆ
[if] {bç«æŠ˜å­g}? != null
    look hua
    @tip ä½ æ•°äº†ä¸‹å¤§æ¦‚æœ‰($number)æœµèŠ±
    go southeast
    look bed;pushstart bed
    pushleft bed[(number)]
    @await 1000
    pushright bed[8]
    @await 1000
    go down;fire;go west
    @kill èŠ±æ— ç¼º
    look xia;open xia`},{name:"å†°ç«å²›(å›°éš¾)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ WanJiaQi åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 21 start2;cr mj/bhd/haibian 1 0
go west
@kill ç‚é¾™
go west
@kill ç‚é¾™
go west
@kill ç‚é¾™ç‹
@liaoshang
go west;search
@tip ä½ æ‰¾åˆ°äº†
go east[4];go north
@kill ç™½ç†Š
go north
@kill ç™½ç†Š
@liaoshang
go north;go west;zuan dong
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
@kill å¼ ç¿ å±±
@kill è°¢é€Š`},{name:"å†°ç«å²›(ç®€å•)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ WanJiaQi åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 21 start1;cr mj/bhd/haibian 0 0
go west
@kill ç‚é¾™
go west
@kill ç‚é¾™
go west
@kill ç‚é¾™ç‹
@liaoshang
//go west;search
//@tip ä½ æ‰¾åˆ°äº†
go east[3];go north
@kill ç™½ç†Š
go north
@kill ç™½ç†Š
@liaoshang
go north;go west;zuan dong
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
@kill è°¢é€Š`},{name:"æ˜Ÿå®¿æµ·",source:`
jh fb 20 start1;cr xingxiu/xxh6
go northeast
@kill æ˜Ÿå®¿æ´¾
go north
@kill æ˜Ÿå®¿æ´¾
go northwest
@kill æ˜Ÿå®¿æ´¾
go southwest
@kill æ˜Ÿå®¿æ´¾
go south
@kill æ˜Ÿå®¿æ´¾
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north;go northeast;go north
@kill ä¸æ˜¥ç§‹`},{name:"ç™½é©¼å±±",source:`
jh fb 19 start1;cr baituo/damen
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[4]
@kill æ¬§é˜³é”‹
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go south
@kill æ¬§é˜³å…‹,ç™½è¡£å°‘å¥³
go south[2];go west[3]
@kill æ¯’è›‡
go north
@kill æ¯’è›‡
go north;go north
@kill èŸ’è›‡`},{name:"ç™½é©¼å±±(ç»„é˜Ÿ)",source:`
jh fb 19 start3;cr baituo/damen 2 0
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[4]
@kill æ¬§é˜³é”‹
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go south
@kill æ¬§é˜³å…‹,ç™½è¡£å°‘å¥³
go south[2];go west[3]
@kill æ¯’è›‡
go north
@kill æ¯’è›‡
go north;go north
@kill èŸ’è›‡`},{name:"æ¡ƒèŠ±å²›(å›°éš¾)",source:`
jh fb 18 start2;cr taohua/haitan 1 0
@until (:path) == taohua/haitan
@taohualin
@wait 1000
go south
@kill é™†ä¹˜é£
go east;go east
@kill æ›²çµé£
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east;go east
@kill é»„è¯å¸ˆ
go west;go north
@kill é»„è“‰`},{name:"æ¡ƒèŠ±å²›(ç®€å•)",source:`
jh fb 18 start1;cr taohua/haitan
@until (:path) == taohua/haitan
@taohualin
@wait 1000
go south
@kill é™†ä¹˜é£
go east;go east
@kill æ›²çµé£
go east;go north
ok {é»„è“‰}
@zhoubotong
@kill å‘¨ä¼¯é€š
look xia;search xia
go east[2]
go northwest;go southeast;go southeast;go northwest
go southwest;go northeast;go northeast;go southwest
@until (:path) == taohua/haitan
@taohualin
@wait 2000
go south;go east
go east;go east;go north
select {é»„è“‰};give1 {é»„è“‰}
@kill é»„è“‰`},{name:"äº‘æ¢¦æ²¼æ³½(ç»„é˜Ÿ)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ leiyulin åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 17 start3;cr cd/yunmeng/senlin 2 0
$wait 500
go east
@kill å·¨é³„
go north
@kill å·¨é³„,å·¨é³„
go east
@kill å·¨é³„,å·¨é³„
go west;go north
@kill å·¨é³„,å·¨é³„
look lu;kan lu;go north
@kill ç«é¾™
go north
@kill ç«é¾™
go north
@kill ç«é¾™
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill ç«é¾™ç‹`},{name:"äº‘æ¢¦æ²¼æ³½",source:`
@print ğŸ‘‘ æ„Ÿè°¢ leiyulin åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 17 start1;cr cd/yunmeng/senlin
$wait 500
go east
@kill å·¨é³„
go north
@kill å·¨é³„,å·¨é³„
go east
@kill å·¨é³„,å·¨é³„
go west;go north
@kill å·¨é³„,å·¨é³„
look lu;kan lu;go north
@kill ç«é¾™
go north
@kill ç«é¾™
go north
@kill ç«é¾™
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill ç«é¾™ç‹`},{name:"åµ©å±±",source:`
jh fb 16 start1;cr wuyue/songshan/taishi
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north[2]
@kill åä¸‰å¤ªä¿
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go northup;go northeast;go northup[2]
@kill åä¸‰å¤ªä¿,åä¸‰å¤ªä¿
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go northup;go north
@kill åä¸‰å¤ªä¿,åä¸‰å¤ªä¿,åä¸‰å¤ªä¿
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill åä¸‰å¤ªä¿,åä¸‰å¤ªä¿,åä¸‰å¤ªä¿,åä¸‰å¤ªä¿
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill å·¦å†·ç¦…`},{name:"æ³°å±±",source:`
jh fb 15 start1;cr wuyue/taishan/daizong
go northup[2]
@kill ç‰ç£¬å­
go northup[2]
@kill ç‰éŸ³å­
go northup[2]
go northup[2]
@kill ç‰ç‘å­`},{name:"è¡¡å±±",source:`
jh fb 14 start1;cr wuyue/henshan/hengyang
go west;go north
@kill åµ©å±±å¼Ÿå­,åµ©å±±å¼Ÿå­
go north;go north
@kill è´¹å½¬
@kill å²ç™»è¾¾,ä¸å‹‰
@kill åˆ˜æ­£é£
go south[3];go west[2]
@kill æ›²æ´‹,æ›²éçƒŸ
go east[4];go southeast;go south;go east;go south
@kill è«å¤§`},{name:"é’åŸå±±",source:`
@print ğŸ‘‘ æ„Ÿè°¢ çŸ®å¤§ç“œ åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 13 start1;cr wuyue/qingcheng/shanlu
go westup
@kill é’åŸæ´¾å¼Ÿå­,é’åŸæ´¾å¼Ÿå­
go north
go northup
go eastup
@kill é’åŸæ´¾å¼Ÿå­,é’åŸæ´¾å¼Ÿå­
go northup
@kill æ´ªäººé›„
go north[3]
@kill äºäººè±ª
go north
@kill ä¾¯äººè‹±,ç½—äººæ°
go south
go east
@kill ä½™äººå½¦
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill ä½™æ²§æµ·`},{name:"æ’å±±",source:`
@print ğŸ‘‘ æ„Ÿè°¢ .min-A åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 12 start1;cr wuyue/hengshan/daziling
go northup;go northwest;go northwest;go northup;go northup
@kill ä¸æˆ’å’Œå°š,ä»ªç³,å“‘å©†å©†
go north;go north
@kill å®šé™å¸ˆå¤ª,å®šé—²å¸ˆå¤ª,å®šä»ªå¸ˆå¤ª

($path)=(:path)
[while] true
    <---
    @until (path)!=(:path)
    ($path)=(:path)
    ($guy) = {ré‡‡èŠ±å¤§ç›— ç”°ä¼¯å…‰}?
    [if] (guy) != null
        @kill é‡‡èŠ±å¤§ç›— ç”°ä¼¯å…‰
    [if] {ç”°ä¼¯å…‰çš„å°¸ä½“}? != null
        [break]
    --->
    go south
    go west
    go north
    go south
    go east
    go east
    go north
    go south
    go west
    go south
    go southdown
    go east
    go southeast
    go northup
    go southdown
    go southeast
    go southdown

    go northup
    go northwest
    go northup
    go southdown
    go northwest
    go northup
    go northup
    go north
    go north`},{name:"äº”æ¯’æ•™(ç»„é˜Ÿ)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ çŸ®å¤§ç“œ åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 11 start3;cr cd/wudu/damen 2 0
@kill äº”æ¯’æ•™å¾’,äº”æ¯’æ•™å¾’,äº”æ¯’æ•™å¾’,äº”æ¯’æ•™å¾’
go east
@kill æ²™åƒé‡Œ
go south
@kill è—ç’
go west
@kill ç™½é«¯è€è€…
go east
go south
@kill æ¯’éƒä¸­
go north
go north
[if](_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east
@kill æ½˜ç§€è¾¾,å²‘å…¶æ–¯,é½äº‘æ•–
[if](_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east
@kill ä½•çº¢è¯
[if](_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east
@kill ä½•é“æ‰‹`},{name:"äº”æ¯’æ•™",source:`
@print ğŸ‘‘ æ„Ÿè°¢ çŸ®å¤§ç“œ åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 11 start1;cr cd/wudu/damen
@kill äº”æ¯’æ•™å¾’,äº”æ¯’æ•™å¾’,äº”æ¯’æ•™å¾’,äº”æ¯’æ•™å¾’
go east
@kill æ²™åƒé‡Œ
go south
@kill è—ç’
go west
@kill ç™½é«¯è€è€…
go east
go south
@kill æ¯’éƒä¸­
go north
go north
[if](_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east
@kill æ½˜ç§€è¾¾,å²‘å…¶æ–¯,é½äº‘æ•–
[if](_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east
@kill ä½•çº¢è¯
[if](_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go east
@kill ä½•é“æ‰‹`},{name:"æ¸©åºœ",desc:"æ¸©åºœ(2k+é—ªé¿)",source:`
@print ğŸ‘‘ æ„Ÿè°¢ JiaQi Wan åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 10 start1;cr cd/wen/damen
look tree;climb tree;go north;go northeast
[while] true
    [if] (:path) != cd/wen/zoulang4
        go northeast
    [else]
        [break]
go north[2];go northwest;go north
look zhuang;tiao zhuang
@kill æ¸©æ–¹ä¹‰,æ¸©æ–¹å±±,æ¸©æ–¹æ–½,æ¸©æ–¹å—
[if] {ræ¸©å®¶è€å¤§ æ¸©æ–¹è¾¾%}? != null
    @kill æ¸©æ–¹è¾¾
@wait 2000
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
look zhuang;tiao zhuang
@until (:path) == cd/wen/xiaoyuan
@wait 500
[if] {rå¤é›ªå®œ}? != null
    @kill å¤é›ªå®œ
go north
@kill æ¸©ä»ª`},{name:"å…³å¤–",source:`
@print ğŸ‘‘ æ„Ÿè°¢ è€å®äºº åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 9 start1;cr bj/guanwai/damen
go northeast
@kill é‡‘é›•
go east
@kill é‡‘é›•
go southeast
@kill é‡‘é›•
go east
@kill å¹³å››
go north
select {rèƒ¡æ–}
ask {rèƒ¡æ–} about é˜åŸº
@tip èƒ¡æ–è¯´é“ï¼šé˜åŸºæ˜¯æˆ‘çš„æ€çˆ¶ä»‡äºº($chat)
[if] (chat) == ï¼Œ
        give {rèƒ¡æ–} {bé˜åŸºçš„å¤´é¢…}
        ask {rèƒ¡æ–} about èƒ¡å®¶åˆ€è°±
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
@kill èƒ¡æ–
go south;go east
@kill ä¸œåŒ—è™
go eastup
@kill ä¸œåŒ—è™
go southup
@kill ä¸œåŒ—è™
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go eastup
@kill é»‘ç†Š
go westdown;go northdown;go west[2];go northwest
go west;go southwest;go west
give {rèˆ¹å¤«} 10000 money
@until (:room)==å…³å¤–-èˆ¹å‚(å‰¯æœ¬åŒºåŸŸ)
@wait 500
@kill èˆ¹å¤«
go south;go west[5];go north
@kill æ±Ÿæ¹–åŒ»ç”Ÿ é˜åŸº`},{name:"ç¥é¾™æ•™(ç»„é˜Ÿ)",source:`
jh fb 8 start3;cr bj/shenlong/haitan 2 0;go north
@kill æ¯’è›‡,ç«¹å¶é’
look bush;kan bush;go north
@kill æ¯’è›‡,ç«¹å¶é’
go north
@kill ç¥é¾™æ•™å¼Ÿå­,ç¥é¾™æ•™å¼Ÿå­
go north
@kill ç¥é¾™æ•™å†›å¸ˆ é™†é«˜è½©
go south;go east
@kill ç¥é¾™æ•™é’é¾™ä½¿ è®¸é›ªäº­
go east
@kill ç¥é¾™æ•™å¥³å¼Ÿå­,ç¥é¾™æ•™å¥³å¼Ÿå­
go north[2]
@kill ç¥é¾™æ•™å¼Ÿå­,ç¥é¾™æ•™å¼Ÿå­
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill æ´ªå®‰é€š,å¼ æ·¡æœˆ,æ— æ ¹é“é•¿`},{name:"ç¥é¾™æ•™",source:`
jh fb 8 start1;cr bj/shenlong/haitan;go north
@kill æ¯’è›‡,ç«¹å¶é’
look bush;kan bush;go north
@kill æ¯’è›‡,ç«¹å¶é’
go north
@kill ç¥é¾™æ•™å¼Ÿå­,ç¥é¾™æ•™å¼Ÿå­
go north
@kill ç¥é¾™æ•™å†›å¸ˆ é™†é«˜è½©
go south;go east
@kill ç¥é¾™æ•™é’é¾™ä½¿ è®¸é›ªäº­
go east
@kill ç¥é¾™æ•™å¥³å¼Ÿå­,ç¥é¾™æ•™å¥³å¼Ÿå­
go north[2]
@kill ç¥é¾™æ•™å¼Ÿå­,ç¥é¾™æ•™å¼Ÿå­
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill æ´ªå®‰é€š,å¼ æ·¡æœˆ,æ— æ ¹é“é•¿`},{name:"å¤©åœ°ä¼š",source:`
@print ğŸ‘‘ æ„Ÿè°¢ jicki åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ï¼Œæ„Ÿè°¢ andyfosã€mma1996 ååŠ©å®Œæˆã€‚
jh fb 7 start1;cr bj/tdh/hct
@kill è¯é“ºä¼™è®¡
@kill å¤©åœ°ä¼šé’æœ¨å ‚æŠ¤æ³• å¾å¤©å·
go west
@kill å…³å¤«å­ å…³å®‰åŸº
knock;knock;knock
go down
@until {rå°¸ä½“}? != null
go west[5]
@until {rå°¸ä½“}? != null
go north
@liaoshang
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
@kill é™ˆè¿‘å—
go east
get {rä¸€}?
@wait 500
get {rä¸€}?
go west
go north
go east
@tip æ‹”åˆ€ç›¸åŠ©ï¼Œè´«å°¼æ„Ÿæ¿€ä¸å°½ã€‚
@wait 1000
select {rç¥å°¼};cha {rç¥å°¼}
@wait 1000
@kill ç‹¬è‡‚ç¥å°¼`},{name:"é³Œæ‹œåºœ",source:`
@print ğŸ‘‘ æ„Ÿè°¢ Jeaepan åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 6 start1;cr bj/ao/damen
@kill å®˜å…µ,å®˜å…µ
go west
@kill å´ä¹‹è£
go north
@kill å¨å¸ˆ
go south;go west
@kill å®¶å°†,å®¶å°†,å¥³ç®¡å®¶
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go west
@kill æ»¡æ´²ç¬¬ä¸€å‹‡å£« é³Œæ‹œ
go east;go north
look shu;open shu
@tip å‘ç°æ‰‰é¡µçš„($pos)ä¸‹è§’è¢«é³Œæ‹œå†™äº†ä¸€ä¸ªå¤§å¤§çš„æ€å­—
look hua
$wait 500
[if] (pos) == å·¦
    tleft hua
[if] (pos) == å³
    $wait 500
    tright hua
go north
select {rå››åäºŒç« ç»g}?
get {rå››åäºŒç« ç»g}?
go south;go south
($open) = æ²¡å¼€
look men;unlock men
@tip ä½ ç”¨ä¸€æŠŠé’¥åŒ™($open)äº†ç‰¢æˆ¿é—¨|ä½ ä¸ä¼šæ’¬é”
[if] (open) == æ‰“å¼€
    go south
    select {råº„å…åŸ}?
    ask {råº„å…åŸ}? about å´ä¹‹è£
    @kill åº„å…åŸ`},{name:"åº„åºœ",source:`
@print ğŸ‘‘ æ„Ÿè°¢ qwer68588 åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 5 start1;cr bj/zhuang/xiaolu
go north
@kill åœŸåŒª
go north
look men;break men
go north
@kill ç¥é¾™æ•™å¼Ÿå­,ç¥é¾™æ•™å¼Ÿå­
go north
@kill ç¥é¾™æ•™å¼Ÿå­
@kill ç¥é¾™æ•™å°å¤´ç›® ç« è€ä¸‰
go west
@kill ç¥é¾™æ•™å¼Ÿå­
go east;go east
@kill ç¥é¾™æ•™å¼Ÿå­`},{name:"å…µè¥",source:`
@print ğŸ‘‘ æ„Ÿè°¢ qwer68588 åˆ†äº«æ­¤å‰¯æœ¬ä»£ç ã€‚
jh fb 4 start1;cr yz/by/damen
@kill å®˜å…µ,å®˜å…µ
$wait 1000
@liaoshang
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go south
@kill å®˜å…µ,å®˜å…µ,å®˜å…µ,æ­¦å°†,æ­¦å°†,å²é’å±±
$wait 1000
look men;open men
go south;search`},{name:"æµæ°“å··(ç»„é˜Ÿ)",source:`
jh fb 2 start3;cr yz/lmw/xiangzi1 2 0
@kill å°æµæ°“,å°æµæ°“
go east
@kill æµæ°“,æµæ°“
go north
@kill æµæ°“å¤´,æµæ°“,æµæ°“
go south;go east
@kill æµæ°“,æµæ°“
go east
@kill æµæ°“å¤´é¢†`},{name:"æµæ°“å··",source:`
jh fb 2 start1;cr yz/lmw/xiangzi1
@kill å°æµæ°“,å°æµæ°“
go east
@kill æµæ°“,æµæ°“
go north
@kill æµæ°“å¤´,æµæ°“,æµæ°“
go south;go east
@kill æµæ°“,æµæ°“
go east
@kill æµæ°“å¤´é¢†`},{name:"ä¸½æ˜¥é™¢",source:`
jh fb 3 start1;cr yz/lcy/dating
@kill éŸ¦æ˜¥èŠ³
go up
@kill é¾Ÿå…¬
go west
@kill å²æ¾
look tai;tui tai;go enter
@kill èŒ…åå…«`},{name:"è´¢ä¸»å®¶(å›°éš¾)",source:`
jh fb 1 start2;cr yz/cuifu/caizhu 1 0
@kill å¤§ç‹¼ç‹—,å¤§ç‹¼ç‹—
go north
@kill ç®¡å®¶,å®¶ä¸,å®¶ä¸
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill è´¢ä¸» å´”å‘˜å¤–
($open) = æ²¡å¼€
look men;open men
@tip ä½ ä¸ä¼šæ’¬é”|é’¥åŒ™($open)äº†ç§˜é—¨
[if] (open) == æ‰“å¼€
    go east
    ok {ä¸«é¬Ÿ}
    go west;go south;go south
    ok {ä¸«é¬Ÿ}?
    go north;go north;go west
    select {è´¢ä¸»å¥³å„¿ å´”èºèº};ask {è´¢ä¸»å¥³å„¿ å´”èºèº} about ä¸œå¢
[else]
    go west
@kill è´¢ä¸»å¥³å„¿ å´”èºèº
[if] (open) == æ‰“å¼€
    go east;go east;look gui;search gui`},{name:"è´¢ä¸»å®¶(ç®€å•)",source:`
jh fb 1 start1;cr yz/cuifu/caizhu
@kill å¤§ç‹¼ç‹—,å¤§ç‹¼ç‹—
go north
@kill ç®¡å®¶,å®¶ä¸,å®¶ä¸
[if] (_DungeonWaitSkillCD) == æ‰“å¼€
    @cd
go north
@kill è´¢ä¸» å´”å‘˜å¤–
($open) = æ²¡å¼€
look men;open men
@tip ä½ ä¸ä¼šæ’¬é”|é’¥åŒ™($open)äº†ç§˜é—¨
[if] (open) == æ‰“å¼€
    go east
    ok {ä¸«é¬Ÿ}
    go west;go south;go south
    ok {ä¸«é¬Ÿ}?
    go north;go north;go west
    select {è´¢ä¸»å¥³å„¿ å´”èºèº};ask {è´¢ä¸»å¥³å„¿ å´”èºèº} about ä¸œå¢
[else]
    go west
@kill è´¢ä¸»å¥³å„¿ å´”èºèº
[if] (open) == æ‰“å¼€
    go east;go east;look gui;search gui`}],Server={uploadConfig:function(){let t={};GM_listValues().forEach(e=>{"roles"!=e&&(t[e]=GM_getValue(e))}),null!=unsafeWindow.TriggerConfig&&(e=unsafeWindow.TriggerConfig.get(),t["@@@trigger"]=e);var e=JSON.stringify(t);Server._sync("uploadConfig",{id:Role.id,value:e},e=>{GM_setClipboard(e),alert(`wsmud_Raid é…ç½®ä¸Šä¼ æˆåŠŸï¼Œè¯¥æµè§ˆå™¨æ‰€æœ‰è§’è‰²é…ç½®ä¼šåœ¨æœåŠ¡å™¨ä¿å­˜ 24 å°æ—¶ã€‚
é…ç½®è·å–ç ï¼š${e}ï¼Œå·²å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚`),Message.append(`<hiy>è§’è‰²é…ç½®è·å–ç ï¼š${e}</hiy>`),Message.append(`<div class="item-commands"><span cmd = "@js prompt('è¯·æ‰‹åŠ¨å¤åˆ¶ä¸‹é¢çš„æ•°æ®','${e}');" >
                                 æˆ‘æ— æ³•å¤åˆ¶ </span></div>`)},e=>{alert("wsmud_Raid é…ç½®ä¸Šä¼ å¤±è´¥ï¼")})},downloadConfig:function(e){Server._sync("downloadConfig",{pass:e},e=>{var t,o=JSON.parse(e);for(t in o)"@@@trigger"==t?null!=unsafeWindow.TriggerConfig&&unsafeWindow.TriggerConfig.set(o[t]):"roles"!=t&&GM_setValue(t,o[t]);alert("wsmud_Raid é…ç½®ä¸‹è½½æˆåŠŸï¼")},e=>{alert("wsmud_Raid é…ç½®ä¸‹è½½å¤±è´¥ï¼")})},uploadFlows:function(){var e=FlowStore.getAll(),t=WorkflowConfig._rootList(),t=JSON.stringify({map:t,flows:e});Server._sync("uploadFlows",{id:Role.id,value:t},e=>{GM_setClipboard(e),alert(`è§’è‰²æµç¨‹ä¸Šä¼ æˆåŠŸï¼Œè¯¥è§’è‰²æµç¨‹ä¼šåœ¨æœåŠ¡å™¨ä¿å­˜ 24 å°æ—¶ã€‚
è§’è‰²æµç¨‹è·å–ç ï¼š${e}ï¼Œå·²å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚`),Message.append(`<hiy>è§’è‰²æµç¨‹è·å–ç ï¼š${e}</hiy>`),Message.append(`<div class="item-commands"><span cmd = "@js prompt('è¯·æ‰‹åŠ¨å¤åˆ¶ä¸‹é¢çš„æ•°æ®','${e}');" >
                                 æˆ‘æ— æ³•å¤åˆ¶ </span></div>`)},e=>{alert("è§’è‰²æµç¨‹ä¸Šä¼ å¤±è´¥ï¼")})},downloadFlows:function(e){Server._sync("downloadFlows",{pass:e},e=>{e=JSON.parse(e);FlowStore.corver(e.flows),WorkflowConfig._rootList(e.map),alert("æ‹·è´è§’è‰²æµç¨‹æˆåŠŸï¼")},e=>{alert("é”™è¯¯çš„è§’è‰²æµç¨‹è·å–ç ï¼")})},uploadTriggers:function(){var e=unsafeWindow.TriggerCenter.getAllData(),e=JSON.stringify(e);Server._sync("uploadTriggers",{id:Role.id,value:e},e=>{GM_setClipboard(e),alert(`è§’è‰²è§¦å‘å™¨ä¸Šä¼ æˆåŠŸï¼Œè¯¥è§’è‰²è§¦å‘ä¼šåœ¨æœåŠ¡å™¨ä¿å­˜ 24 å°æ—¶ã€‚
è§’è‰²è§¦å‘å™¨è·å–ç ï¼š${e}ï¼Œå·²å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚`),Message.append(`<hiy>è§’è‰²è§¦å‘è·å–ç ï¼š${e}</hiy>`),Message.append(`<div class="item-commands"><span cmd = "@js prompt('è¯·æ‰‹åŠ¨å¤åˆ¶ä¸‹é¢çš„æ•°æ®','${e}');" >
                                    æˆ‘æ— æ³•å¤åˆ¶ </span></div>`)},e=>{alert("è§’è‰²è§¦å‘å™¨ä¸Šä¼ å¤±è´¥ï¼")})},downloadTriggers:function(e){Server._sync("downloadTriggers",{pass:e},e=>{e=JSON.parse(e);unsafeWindow.TriggerCenter.corver(e),alert("æ‹·è´è§’è‰²è§¦å‘å™¨æˆåŠŸï¼")},e=>{alert("é”™è¯¯çš„è§’è‰²è§¦å‘å™¨è·å–ç ï¼")})},getNotice:function(){let o="NoticeDataKey",n=GM_getValue(o,{version:"0.0.0",type:"0",value:"æ¬¢è¿ä½¿ç”¨ wsmud_Raid"});Server._async("notice",{version:n.version,id:Role.id},e=>{let t=n;if(e.version>n.version&&(GM_setValue(o,e),t=e),"0"==t.type)L.msg(`
                    <div>
                    <p><hig>Raidï¼š</hig>${t.value}</p>
                    <p style="text-align:center">(v-${GM_info.script.version})</p>
                    </div>`);else{let e="HideVersionNoticeKey";GM_getValue(e,null)!=t.version&&layer.open({type:1,skin:"layui-layer-rim",area:["380px"],title:"wsmud_Raid æç¤º",content:t.value,offset:"auto",shift:2,move:!1,closeBtn:0,btn:["ç¡®è®¤","ä¸å†æ˜¾ç¤º"],yes:function(e){layer.close(e)},btn2:function(){GM_setValue(e,t.version)}})}})},shareFlowTrigger:function(o,n,s,i){Server._getPhone(e=>{var t;""==e?alert("è¯·å…ˆç»‘å®šæ‰‹æœºå·ï¼"):(e={username:(t=i).author=o,password:n,name:i.name,phone:e,type:s,value:JSON.stringify(t)},Server._sync("uploadSingle",e,e=>{GM_setClipboard(e),alert(s+`åˆ†äº«æˆåŠŸï¼Œè¯¥${s}ä¼šåœ¨æœåŠ¡å™¨ä¿å­˜ 30 å¤©
æ¯æ¬¡ä¸‹è½½ä¼šå»¶é•¿ä¿å­˜ å§‹äºä¸‹è½½æ—¶åˆ»çš„ 30 å¤©
åˆ†äº«ç ï¼š${e}
å·²å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚`),Message.append(`<hiy>${s}åˆ†äº«ç ï¼š${e}</hiy>`),Message.append(`<div class="item-commands"><span cmd = "@js prompt('è¯·æ‰‹åŠ¨å¤åˆ¶ä¸‹é¢çš„æ•°æ®','${e}');" >
                                         æˆ‘æ— æ³•å¤åˆ¶ </span></div>`)},e=>{alert(e)}))},()=>{alert("è¯·å…ˆç»‘å®šæ‰‹æœºå·ï¼")})},importFlow:function(e,o){-1==e.indexOf("Â·æµç¨‹")?alert("é”™è¯¯çš„æµç¨‹åˆ†äº«ç ï¼"):(e={token:e},Server._sync("downloadSingle",e,e=>{var e=JSON.parse(e),t=WorkflowConfig.createWorkflow(e.name,e.source,o);1==t?Message.append(`<hiy>å¯¼å…¥æµç¨‹ ${e.name} æˆåŠŸï¼</hiy>`):alert(t)},e=>{alert("é”™è¯¯çš„æµç¨‹åˆ†äº«ç ï¼")}))},importTrigger:function(e){-1==e.indexOf("Â·è§¦å‘")?alert("é”™è¯¯çš„è§¦å‘å™¨åˆ†äº«ç ï¼"):(e={token:e},Server._sync("downloadSingle",e,e=>{var e=JSON.parse(e),t=unsafeWindow.TriggerCenter.create(e.name,e.event,e.conditions,e.source,e.active);1==t?Message.append(`<hiy>å¯¼å…¥è§¦å‘å™¨ ${e.name} æˆåŠŸï¼</hiy>`):alert(t)},e=>{alert("é”™è¯¯çš„è§¦å‘å™¨åˆ†äº«ç ï¼")}))},_address:"wsmud.ii74.com/S",_async(e,t,o,n){this._get(!0,e,t,o,n)},_sync(e,t,o,n){this._get(!1,e,t,o,n)},_get(e,t,o,n,s){$.ajax({type:"post",url:`https://${Server._address}/`+t,data:o,async:e,success:function(t){if(200==t.code)null!=n&&n(t.data);else{let e=null!=t.data?t.data:t.code;null!=s&&s(e)}},dataType:"json"})},_getPhone(t,o){$.ajax({type:"post",url:"/UserAPI/GetPhone",async:!0,xhrFields:{withCredentials:!0},success:function(e){e?(e=e.replace(/\"/g,""),null!=t&&t(e)):o(e)}})}};var CmdGroupManager={getAll:function(){var o=[];return GM_listValues().map(function(e){var t;0==e.indexOf(CmdGroupManager._prefix)&&(e=CmdGroupManager._id(e),t=CmdGroupManager.getName(e),o.push({id:e,name:t}))}),o},getName:function(e){e=GM_getValue(this._key(e));return null==e?null:JSON.parse(e).name},getCmdsText:function(e){e=GM_getValue(this._key(e));return null==e?"":JSON.parse(e).cmdsStr},getCmds:function(e){var e=this.getCmdsText(e).split(/^\s*|\s*\n+\s*/g),t=e[0],t=(null!=t&&0==t.length&&e.splice(0,1),e[e.length-1]);return null!=t&&0==t.length&&e.splice(e.length-1,1),e},createCmdGroup:function(e,t){var o=(new Date).getTime();return this.updateCmdGroup(o,e,t)},updateCmdGroup:function(e,t,o){return null!=t&&/\S+/g.test(t)?null!=o&&/\S+/g.test(o)?(t={name:t,cmdsStr:o},GM_setValue(this._key(e),JSON.stringify(t)),!0):(alert("å‘½ä»¤ç»„ä¸æƒ³æ²¡æœ‰ä»»ä½•å†…å®¹..."),!1):(alert("å‘½ä»¤ç»„æƒ³è¦ä¸€ä¸ªåå­—..."),!1)},removeCmdGroup:function(e){GM_deleteValue(this._key(e))},_prefix:"@cmdgroup",_key:function(e){return this._prefix+e},_id:function(e){return parseInt(e.substring(this._prefix.length))}},WorkflowConfigManager={getAll:function(){var o=[];return GM_listValues().map(function(e){var t;WorkflowConfigManager._isMyKey(e)&&(e=WorkflowConfigManager._id(e),t=WorkflowConfigManager.getName(e),o.push({id:e,name:t}))}),o},getName:function(e){e=GM_getValue(this._key(e));return null==e?null:JSON.parse(e).name},getCmdGroupInfos:function(e){e=GM_getValue(this._key(e));return null==e?null:JSON.parse(e).infos},getWorkflow:function(e){var t,o=[];for(t of this.getCmdGroupInfos(e)){var n=CmdGroupManager.getName(t.id),s=CmdGroupManager.getCmds(t.id),n=new CommandWorkflow(n,s,t.repeat);o.push(n)}return new Workflow(this.getName(e),o,1)},createWorkflowConfig:function(e,t){var o=(new Date).getTime();return this.updateWorkflowConfig(o,e,t)},updateWorkflowConfig:function(e,t,o){return null!=t&&/\S+/g.test(t)?null==o||o.length<=0?(alert("å·¥ä½œæµä¸æƒ³æ²¡æœ‰ä»»ä½•å†…å®¹..."),!1):(t={name:t,infos:o},GM_setValue(this._key(e),JSON.stringify(t)),!0):(alert("å·¥ä½œæµæƒ³è¦ä¸€ä¸ªåå­—..."),!1)},removeWorkflowConfig:function(e){GM_deleteValue(this._key(e))},_prefix:"workflow@",_isMyKey:function(e){return 0==e.indexOf(this._prefix+Role.id)},_key:function(e){return this._prefix+Role.id+e},_id:function(e){return parseInt(e.substring((this._prefix+Role.id).length))}};let CodeTranslator={run:function(){var e=this._getFinder("åŸå‘½ä»¤ç»„"),e=(e&&WorkflowConfig.removeFinder(e),WorkflowConfig.createFinder("åŸå‘½ä»¤ç»„"),this._getFinder("åŸå·¥ä½œæµç¨‹"));e&&WorkflowConfig.removeFinder(e),WorkflowConfig.createFinder("åŸå·¥ä½œæµç¨‹");let s=CmdGroupManager.getAll();var e=WorkflowConfigManager.getAll(),t=this._newSingleName(s,e);s=t.group,e=t.flow,s.forEach(e=>{var t=CmdGroupManager.getCmdsText(e.id),t=this._appendHeader("    ",t);WorkflowConfig.createWorkflow(e.name,`($_i) = 0
[while] (_i) < (arg0)
${t}
    ($_i) = (_i) + 1`,"åŸå‘½ä»¤ç»„")}),e.forEach(e=>{var t=WorkflowConfigManager.getCmdGroupInfos(e.id);let n="";t.forEach(e=>{let t=null;for(var o of s)if(o.id==e.id){t=o.name;break}n+=`@call ${t} ${e.repeat}
`}),WorkflowConfig.createWorkflow(e.name,n,"åŸå·¥ä½œæµç¨‹")})},_newSingleName:function(e,t){e=this._singleName(e);let n=this._singleName(t);return e.forEach(e=>{var t,o=e.name;for(t of n)if(t.name==o){e.name="èŠ«"+o;break}}),{group:e,flow:n}},_singleName:function(n){for(var e of n)e.name=e.name.replace(/[^_a-zA-Z0-9\u4e00-\u9fa5]/g,"");for(let o=0;o<n.length;o++){var s=n[o].name;let t=1;for(let e=o+1;e<n.length;e++){var i=n[e];i.name==s&&(i.name=s+"_"+t,t+=1)}}return n},_getFinder:function(e){var t=WorkflowConfig._rootList(),e=WorkflowConfig._findFinder(e,t);return null==e?null:t[e]},_appendHeader:function(e,t){let o=`
`+t;return o=(o=(o=o.replace(/(\n)/g,"$1"+e)).replace(/\n\s*\n/g,"\n")).replace(/^\s*\n/,"")}};var WorkflowConfig={rootFinderName:"æ ¹æ–‡ä»¶å¤¹",rootFinderSortWay:function(e){var t="__WorkflowRootFinderSortWay";if(null==e)return GM_getValue(t,"nameAsc");GM_setValue(t,e)},finderList:function(t){let e=[];var o,n;switch(t==this.rootFinderName?e=this._rootList():(n=this._rootList(),null!=(o=this._findFinder(t,n))&&(n=n[o],e=n.flows)),e.forEach(e=>{"flow"==e.type&&(e.finder=t)}),this.rootFinderSortWay()){case"updateDesc":e.reverse();break;case"nameAsc":e.sort(function(e,t){return e.name.localeCompare(t.name)});break;case"nameDesc":e.sort(function(e,t){return t.name.localeCompare(e.name)})}return e},createFinder:function(e,t){var o=this._checkName(null,e,!0);return 1!=o?o:((o=this._rootList()).push({name:e,type:"finder",flows:t||[]}),this._rootList(o),!0)},modifyFinder:function(e,t){var o=this._checkName(e.name,t,!0);return 1!=o?o:e.name==t||(this.removeFinder(e),this.createFinder(t,e.flows))},removeFinder:function(e){var t=this._rootList(),o=this._findFinder(e.name,t);if(null!=o){t.splice(o,1),this._rootList(t);for(var n of e.flows)FlowStore.remove(n.name)}},createWorkflow:function(e,t,o){var n=this._checkName(null,e,!1);if(1!=n)return n;var s,n={name:e,type:"flow"},i=this._rootList();let a=!1;return o==this.rootFinderName?(i.push(n),a=!0):null!=(s=this._findFinder(o,i))&&(i[s].flows.push(n),a=!0),a?(FlowStore.save(e,t),this._rootList(i),!0):`æœªæ‰¾åˆ°åä¸º"${o}"çš„æ–‡ä»¶å¤¹ã€‚`},modifyWorkflow:function(e,t,o,n){var s=this._checkName(e.name,t,!1);return 1!=s?s:e.name!=t||e.finder!=n?(this.removeWorkflow(e),this.createWorkflow(t,o,n)):(FlowStore.get(e.name)!=o&&FlowStore.save(e.name,o),!0)},removeWorkflow:function(t){var o=this._rootList();if(t.finder==this.rootFinderName)for(let e=0;e<o.length;e++){var n=o[e];if("flow"==n.type&&n.name==t.name){o.splice(e,1);break}}else{var e=this._findFinder(t.finder,o);if(null!=e){var s=o[e].flows;for(let e=0;e<s.length;e++)if(s[e].name==t.name){s.splice(e,1);break}}}this._rootList(o),FlowStore.remove(t.name)},getFinderNames:function(){let t=[this.rootFinderName];return this._rootList().forEach(e=>{"finder"==e.type&&t.push(e.name)}),t},_rootList:function(e){var t="WorkflowConfig_"+Role.id;return null!=e&&GM_setValue(t,e),GM_getValue(t,[])},_checkName:function(e,t,o){if(t!=e){var n=o?"æ–‡ä»¶å¤¹":"å·¥ä½œæµç¨‹";if(!/\S+/.test(t))return n+"çš„åç§°ä¸èƒ½ä¸ºç©ºã€‚";if(-1!=t.indexOf(this.rootFinderName))return n+`çš„åç§°ä¸­ä¸èƒ½åŒ…å«"${this.rootFinderName}"ã€‚`;if(!/^[_a-zA-Z0-9\u4e00-\u9fa5]+$/.test(t))return n+"çš„åç§°åªèƒ½ä½¿ç”¨ä¸­æ–‡ã€è‹±æ–‡å’Œæ•°å­—å­—ç¬¦ã€‚";var s,i=o?"finder":"flow";for(s of this._rootList()){if(s.type==i&&s.name==t)return`å·²ç»å­˜åœ¨æ­¤åç§°çš„${n}ã€‚`;if("finder"==s.type&&!o)for(var a of s.flows)if(a.name==t)return`å·²ç»å­˜åœ¨æ­¤åç§°çš„${n}ã€‚`}}return!0},_findFinder:function(t,o){for(let e=0;e<o.length;e++){var n=o[e];if("finder"==n.type&&n.name==t)return e}return null}},ManagedPerformerCenter={start:function(e,t,o,n){e=new Performer(e,t);e.log(null==o||o);let s="key"+this._counter;this._counter+=1,(this._performers[s]=e).start(e=>{delete ManagedPerformerCenter._performers[s],0==ManagedPerformerCenter.getAll().length&&$("#workflows-button").css("border-color","inherit"),n&&n()}),$("#workflows-button").css("border-color","#00FF00")},getAll:function(){return Object.values(this._performers)},_counter:0,_performers:{}};let UI={showToolbar:function(){UI._toolbarHidden&&(UI._toolbarHidden=!1,$(".WG_log").before(`
            <style>
                .raid-item{
                    display: inline-block;
                    border: solid 1px gray;
                    color: gray;
                    background-color: black;
                    text-align: center;
                    cursor: pointer;
                    border-radius: 0.25em;
                    //min-width: 2.5em;
                    margin-right: 0em;
                    //margin-left: 0.4em;
                    position: relative;
                    padding-left: 0.3em;
                    padding-right: 0.3em;
                    line-height: 28px;
                }
            </style>
            <div id="raidToolbar">
                <div class="raidToolbar" style="width:calc(100% - 40px);margin:5px 0 5px 0">
                    <span class="raid-item hideRaidToolbar" style="width:10px"><</span>
                    <span class="raid-item forum">ğŸŸ <hiy>å’¸é±¼</hiy></span>
                    <span class="raid-item shortcut">ğŸ¯ <hiz>æ·å¾„</hiz></span>
                    <span class="raid-item trigger">ğŸŸ <hio>è§¦å‘</hio></span>
                    <span class="raid-item customFlow" id="workflows-button">ğŸ¥— <hig>æµç¨‹</hig></span>
                    <span class="raid-item moreRaid">ğŸº <hic>å‰¯æœ¬</hic></span>
                    <!--<span class="raid-item hideRaidToolbar" style="float:right;"><wht>æµ‹è¯•</wht></span>-->
                </div>
            </div>`),$(".customFlow").on("click",UI.workflows),$(".trigger").on("click",UI.trigger),$(".forum").on("click",UI.forum),$(".shortcut").on("click",UI.shortcut),$(".moreRaid").on("click",UI.dungeons),$(".hideRaidToolbar").on("click",UI.hideToolbar))},hideToolbar:function(){var e=document.getElementById("raidToolbar");null!=e&&(e.parentNode.removeChild(e),L.msg("å•å‡»å³é”®ï¼Œé€‰æ‹©æµç¨‹èœå•å¯æ¢å¤æ˜¾ç¤ºã€‚")),UI._toolbarHidden=!0},trigger:function(){null==unsafeWindow.TriggerUI?(UI._appendHtml("ğŸŸ <hio>è§¦å‘å™¨</hio>",`
                <span class = "zdy-item install-trigger" style="width:120px"> å‰å¾€å®‰è£… </span>
                `),$(".install-trigger").on("click",function(){window.open("https://greasyfork.org/zh-CN/scripts/378984","_blank").location})):unsafeWindow.TriggerUI.triggerHome()},forum:function(){UI._appendHtml("ğŸŸ <hiy>ä¸€é”®å’¸é±¼</hiy>",`
            <span class = "zdy-item xianyu-xyjq" style="width:120px"> ğŸ¤Œ è¥„é˜³æé’± </span>
            <span class = "zdy-item xianyu-ksyb" style="width:120px"> ğŸ¦† å¿«é€Ÿè¿é•– </span>
            <span class="zdy-item xianyu-sdyt" style="width:120px"> ğŸ‰ æ‰«è¡å¦–å¡”</span>
            <span class="zdy-item xianyu-mghyj" style="width:120px"> ğŸŸ é—¨è´¡æ¢å…ƒæ™¶</span>
            <br><br>
            <span class="zdy-item xianyu-xybm" style="width:120px"> ğŸ˜ è¥„é˜³æŠ¥å</span>
            <span class="zdy-item xianyu-ltbm" style="width:120px"> ğŸ† æ“‚å°æŠ¥å</span>
            <span class="zdy-item xianyu-cbt" style="width:120px"> ğŸ’ è—å®å›¾</span>
            <span class = "zdy-item xianyu-setting" style="width:120px"> ğŸ”§ å‚æ•°è®¾ç½® </span>
            <br><br>
            <hr style="background-color: gray; height: 1px; width: calc(100% - 4em); border: none;"><br>
            <span class = "zdy-item about-script" style="width:120px"> ğŸ¦¶ <wht>è„šæœ¬æ•™ç¨‹</wht> </span>
            <!--<span class = "zdy-item about-flow" style="width:120px"> <wht>æµç¨‹è®¨è®º</wht> </span>-->
            <!--<span class = "zdy-item about-trigger" style="width:120px"> <wht>è§¦å‘å™¨è®¨è®º</wht> </span>-->
            <span class = "zdy-item about-bug" style="width:120px"> ğŸ <wht>Bug æäº¤</wht> </span>
            <!--<br><br>-->
            <!--<hr style="background-color: gray; height: 1px; width: calc(100% - 4em); border: none;"><br>-->
            <span class = "zdy-item about-yaofang" style="width:120px"> ğŸ’Š è¯æ–¹æ¸…å• </span>
            <span class = "zdy-item suqingHome" style="width:120px"> ğŸ¿ <hig>è‹</hig><hio>è½»</hio><hiy>å·¥</hiy><wht>å…·</wht><hic>åŒ…</hic> </span>`),$(".xianyu-xyjq").on("click",function(){DungeonsShortcuts.xianyu_xyjq()}),$(".xianyu-ksyb").on("click",function(){DungeonsShortcuts.xianyu_ksyb()}),$(".xianyu-sdyt").on("click",function(){DungeonsShortcuts.xianyu_sdyt()}),$(".xianyu-mghyj").on("click",function(){DungeonsShortcuts.xianyu_mghyj()}),$(".xianyu-cbt").on("click",function(){DungeonsShortcuts.cangbaotu()}),$(".xianyu-xybm").on("click",function(){DungeonsShortcuts.xianyu_xybm()}),$(".xianyu-ltbm").on("click",function(){DungeonsShortcuts.xianyu_ltbm()}),$(".xianyu-setting").on("click",function(){DungeonsShortcuts.xianyu_setting()}),$(".about-script").on("click",function(){window.open("https://www.yuque.com/wsmud/doc","_blank").location}),$(".about-bug").on("click",function(){window.open("https://www.yuque.com/wsmud/doc/gr9gyy","_blank").location}),$(".about-yaofang").on("click",function(){window.open("https://emeisuqing.github.io/wsmud.old/","_blank").location}),$(".suqingHome").on("click",function(){window.open("https://emeisuqing.github.io/wsmud/","_blank").location})},shortcut:function(){var e=`
            <span class = "zdy-item outMaze" style="width:120px"> èµ°å‡ºæ¡ƒèŠ±æ— </span>
            <span class = "zdy-item zhoubotong" style="width:120px"> æ‰¾åˆ°å‘¨ä¼¯é€š </span>
            <span class = "zdy-item cihang" style="width:120px"> æ…ˆèˆªä¸ƒé‡é—¨ </span>
            <span class = "zdy-item zhanshendian" style="width:120px"> æˆ˜ç¥æ®¿è§£è°œ </span>
            <span class = "zdy-item guzongmen" style="width:120px"> å¤å®—é—¨å¯»è·¯ </span>
            <span class = "zdy-item cangbaotu" style="width:120px"> è—å®å›¾å¯»å® </span>
            <span class = "zdy-item uploadConfig" style="width:120px"> ä¸Šä¼ æœ¬åœ°é…ç½® </span>
            <span class = "zdy-item downloadConfig" style="width:120px"> ä¸‹è½½äº‘ç«¯é…ç½® </span>
            <span class = "zdy-item uploadFlows" style="width:120px"> åˆ†äº«è§’è‰²æµç¨‹ </span>
            <span class = "zdy-item downloadFlows" style="width:120px"> æ‹·è´è§’è‰²æµç¨‹ </span>
            <span class = "zdy-item uploadTriggers" style="width:120px"> åˆ†äº«è§’è‰²è§¦å‘ </span>
            <span class = "zdy-item downloadTriggers" style="width:120px"> æ‹·è´è§’è‰²è§¦å‘ </span>
            <span class = "zdy-item importFlow" style="width:120px"> å¯¼å…¥æµç¨‹ </span>
            <span class = "zdy-item importTrigger" style="width:120px"> å¯¼å…¥è§¦å‘å™¨ </span>
            <!--<span class = "zdy-item translateCode" style="width:120px"> æµç¨‹è½¬æ¢ä¿®å¤ </span>-->
            <span class = "zdy-item raidVersion" style="width:120px"> ğŸ¹ ${GM_info.script.version} </span>`;UI._appendHtml("ğŸ¯ <hiz>æ·å¾„</hiz>",e),$(".outMaze").on("click",function(){WG.SendCmd("stopstate"),THIsland.outMaze()}),$(".zhoubotong").on("click",function(){WG.SendCmd("stopstate"),THIsland.zhoubotong()}),$(".cihang").on("click",function(){WG.SendCmd("stopstate"),DungeonsShortcuts.cihang()}),$(".zhanshendian").on("click",function(){WG.SendCmd("stopstate"),DungeonsShortcuts.zhanshendian()}),$(".guzongmen").on("click",function(){WG.SendCmd("stopstate"),DungeonsShortcuts.guzongmen()}),$(".cangbaotu").on("click",function(){WG.SendCmd("stopstate"),DungeonsShortcuts.cangbaotu()}),$(".uploadConfig").on("click",e=>{Server.uploadConfig()}),$(".downloadConfig").on("click",e=>{layer.confirm("ä¸‹è½½æˆåŠŸå°†ä¼šå®Œå…¨è¦†ç›–è¯¥æµè§ˆå™¨æ‰€æœ‰è§’è‰²é…ç½®ï¼",{title:"<red>! è­¦å‘Š</red>",btn:["é‚£è¿˜æ˜¯ç®—äº†","å¥½çš„ç»§ç»­"],shift:2},function(e){layer.close(e)},function(){layer.prompt({title:"è¾“å…¥é…ç½®è·å–ç ",formType:0,shift:2},function(e,t){layer.close(t),Server.downloadConfig(e)})})}),$(".uploadFlows").on("click",e=>{Server.uploadFlows()}),$(".downloadFlows").on("click",e=>{layer.confirm("æ‹·è´æˆåŠŸå°†ä¼šå®Œå…¨è¦†ç›–åŸæœ‰è§’è‰²æµç¨‹ï¼",{title:"<red>! è­¦å‘Š</red>",btn:["é‚£è¿˜æ˜¯ç®—äº†","å¥½çš„ç»§ç»­"],shift:2},function(e){layer.close(e)},function(){layer.prompt({title:"è¾“å…¥è§’è‰²æµç¨‹è·å–ç ",formType:0,shift:2},function(e,t){layer.close(t),Server.downloadFlows(e)})})}),$(".uploadTriggers").on("click",e=>{Server.uploadTriggers()}),$(".downloadTriggers").on("click",e=>{layer.confirm("æ‹·è´æˆåŠŸå°†ä¼šå®Œå…¨è¦†ç›–åŸæœ‰è§’è‰²è§¦å‘å™¨ï¼",{title:"<red>! è­¦å‘Š</red>",btn:["é‚£è¿˜æ˜¯ç®—äº†","å¥½çš„ç»§ç»­"],shift:2},function(e){layer.close(e)},function(){layer.prompt({title:"è¾“å…¥è§’è‰²è§¦å‘è·å–ç ",formType:0,shift:2},function(e,t){layer.close(t),Server.downloadTriggers(e)})})}),$(".importFlow").on("click",e=>{var t=`
                #input ($token)=åˆ†äº«ç ,
                #select ($target)=ç›®æ ‡æ–‡ä»¶å¤¹,${WorkflowConfig.getFinderNames().join("|")},${WorkflowConfig.rootFinderName}
                #config
                @js Server.importFlow("(token)", "(target)");
                `,t=new Performer("å¯¼å…¥æµç¨‹",t);t.log(!1),t.start()}),$(".importTrigger").on("click",e=>{var t=new Performer("å¯¼å…¥è§¦å‘å™¨",`
                #input ($token)=åˆ†äº«ç ,
                #config
                @js Server.importTrigger("(token)");
                `);t.log(!1),t.start()}),$(".translateCode").on("click",e=>{layer.prompt({title:"å®¢æ ˆ->æµç¨‹è®¨è®ºï¼Œé˜…è¯»ä½¿ç”¨è¯´æ˜åæ“ä½œ",formType:0,shift:2},function(e,t){"æˆ‘ç¡®è®¤å¼€å§‹è½¬æ¢"==e&&(layer.close(t),CodeTranslator.run())})}),$(".raidVersion").on("click",e=>{Server.getNotice()})},dungeons:function(){UI._appendHtml("ğŸº <hic>è‡ªåŠ¨å‰¯æœ¬</hic>","");var e=UI._dungeonsContentModel();UI._mountableDiv().appendChild(e.$el)},workflows:function(){0==ManagedPerformerCenter.getAll().length?UI.workflowsHome():UI.runningFlows()},workflowsHome:function(){UI._appendHtml("ğŸ¥— <hig>å·¥ä½œæµç¨‹</hig>","",`
            <select style='width:80px' id="workflows-opts">
                <option value="none">é€‰æ‹©æ“ä½œ</option>
                <option value="createFinder">æ–°å»ºæ–‡ä»¶å¤¹</option>
                <option value="createFlow">æ–°å»ºæµç¨‹</option>
            </select>`,null,"<wht>è¿è¡Œä¸­</wht>",UI.runningFlows),$("#workflows-opts").val("none"),$("#workflows-opts").change(function(){switch($("#workflows-opts").val()){case"createFinder":UI.createFinder();break;case"createFlow":UI.createWorkflow(WorkflowConfig.rootFinderName)}});var e=UI._workflowContentModel(WorkflowConfig.finderList(WorkflowConfig.rootFinderName));UI._mountableDiv().appendChild(e.$el)},runningFlows:function(){UI._appendHtml("ğŸ¥— <hig>è¿è¡Œä¸­æµç¨‹</hig>","",null,null,UI._backTitle,UI.workflowsHome);var e=UI._runningFlowsContentModel();UI._mountableDiv().appendChild(e.$el)},createFinder:function(){UI._appendHtml("ğŸ¥— <hig>æ–°å»ºæ–‡ä»¶å¤¹</hig>",`
            <div style="margin: 0 2em 5px 2em;text-align:center;width:calc(100% - 4em)">
                <label for="create-finder-name"> åç§°:</label><input id ="create-finder-name" style='width:120px' type="text"  name="create-finder-name" value="">
            </div>`,"<wht>ä¿å­˜</wht>",function(){var e=$("#create-finder-name").val(),e=WorkflowConfig.createFinder(e);1==e?UI.workflowsHome():alert(e)},UI._backTitle,UI.workflowsHome)},modifyFinder:function(t){UI._appendHtml("ğŸ¥— <hig>ä¿®æ”¹æ–‡ä»¶å¤¹</hig>",`
            <div style="margin: 0 2em 5px 2em;text-align:center;width:calc(100% - 4em)">
                <label for="modify-finder-name"> åç§°:</label><input id ="modify-finder-name" style='width:120px' type="text"  name="modify-finder-name" value="">
            </div>`,"åˆ é™¤",function(){confirm("åˆ é™¤æ–‡ä»¶å¤¹å°†åˆ é™¤å…¶ä¸­çš„æ‰€æœ‰æµç¨‹ï¼Œç¡®è®¤åˆ é™¤å—ï¼Ÿ")&&(WorkflowConfig.removeFinder(t),UI.workflowsHome())},UI._backSaveTitle,function(){var e=$("#modify-finder-name").val(),e=WorkflowConfig.modifyFinder(t,e);1!=e?alert(e):UI.workflowsHome()}),$("#modify-finder-name").val(t.name)},openFinder:function(e){var t;e==WorkflowConfig.rootFinderName?UI.workflowsHome():(t=WorkflowConfig.finderList(e),UI._appendHtml(`<wht>ğŸ“‚ ${e}</wht>`,"",null,null,UI._backTitle,UI.workflowsHome),e=UI._workflowContentModel(t),UI._mountableDiv().appendChild(e.$el))},createWorkflow:function(o){UI._appendHtml("ğŸ¥— <hig>æ–°å»ºæµç¨‹</hig>",`
            <div style="margin: 0 2em 5px 2em;text-align:left;width:calc(100% - 4em)">
                <label for="create-flow-name"> åç§°:</label><input id ="create-flow-name" style='width:120px' type="text"  name="create-flow-name" value="">
            </div>
            <textarea class = "settingbox hide" style = "height:5rem;display:inline-block;font-size:0.8em;width:calc(100% - 4em)" id = "create-flow-source"></textarea>`,"<wht>ä¿å­˜</wht>",function(){var e=$("#create-flow-name").val(),t=$("#create-flow-source").val(),e=WorkflowConfig.createWorkflow(e,t,o);1==e?UI.workflowsHome():alert(e)},UI._backTitle,UI.workflowsHome)},modifyWorkflow:function(n){let t="";WorkflowConfig.getFinderNames().forEach(e=>{t+=`<option value="${e}">${e}</option>`});var e=`
            <div style="margin: 0 2em 5px 2em;text-align:left;width:calc(100% - 4em)">
                <label for="modify-flow-name"> åç§°:</label><input id ="modify-flow-name" style='width:120px' type="text"  name="modify-flow-name" value="">
                <label for="modify-flow-finder">ç§»åŠ¨è‡³</label><select id="modify-flow-finder">
                    ${t}
                </select>
            </div>
            <textarea class = "settingbox hide" style = "height:5rem;display:inline-block;font-size:0.8em;width:calc(100% - 4em)" id = "modify-flow-source"></textarea>
            <span class="raid-item shareFlow">åˆ†äº«æ­¤æµç¨‹</span>`;UI._appendHtml("ğŸ¥— <hig>ä¿®æ”¹æµç¨‹</hig>",e,"åˆ é™¤",function(){confirm("ç¡®è®¤åˆ é™¤æ­¤å·¥ä½œæµç¨‹å—ï¼Ÿ")&&(WorkflowConfig.removeWorkflow(n),UI.workflowsHome())},UI._backSaveTitle,function(){var e=$("#modify-flow-name").val(),t=$("#modify-flow-source").val(),o=$("#modify-flow-finder").val(),e=WorkflowConfig.modifyWorkflow(n,e,t,o);1!=e?alert(e):UI.openFinder(o)}),$("#modify-flow-name").val(n.name),$("#modify-flow-source").val(FlowStore.get(n.name)),$("#modify-flow-finder").val(n.finder),$(".shareFlow").on("click",function(){var e={name:$("#modify-flow-name").val(),source:$("#modify-flow-source").val()};UI._share("æµç¨‹",e)})},_toolbarHidden:!0,_backTitle:"<wht>< è¿”å›</wht>",_backSaveTitle:"<wht>< ä¿å­˜&è¿”å›</wht>",_appendHtml(e,t,o,n,s,i){s=`
            <div class = "item-commands" style="text-align:center">
                <div style="margin-top:0.5em">
                    <div style="width:8em;float:left;text-align:left;padding:0px 0px 0px 2em;height:1.23em" id="wsmud_raid_left">${null==s?"":s}</div>
                    <div style="width:calc(100% - 16em);float:left;height:1.23em">${e}</div>
                    <div style="width:8em;float:left;text-align:right;padding:0px 2em 0px 0px;height:1.23em" id="wsmud_raid_right">${null==o?"":o}</div>
                </div>
                <br><br>
                ${t}
            </div>`;Message.clean(),Message.append(s),$("#wsmud_raid_left").on("click",function(){i&&i()}),$("#wsmud_raid_right").on("click",function(){n&&n()})},_mountableDiv:function(){return document.getElementsByClassName("WG_log")[0].getElementsByTagName("pre")[0].getElementsByTagName("div")[0]},_workflowContentModel:function(a){return new Vue({el:"#WorkflowsContentModel",methods:{createSpan:function(e,t){let o={width:"120px","background-color":"#12e4a0",border:"solid 1px rgb(107, 255, 70)",color:"#000dd4"};var n={attrs:{class:"zdy-item"},style:o="finder"==t.type?{width:"120px","background-color":"#0359c3",border:"solid 1px rgb(107, 203, 255)",color:"white"}:o},s=e("div",{style:{width:"30px",float:"left","background-color":"#ffffff4f","border-radius":"4px"},on:{click:function(){"finder"==t.type?UI.modifyFinder(t):UI.modifyWorkflow(t)}}},"âš™"),i=e("div",{attrs:{class:"breakText"},style:{width:"85px",float:"right"},on:{click:function(){"finder"==t.type?UI.openFinder(t.name):ManagedPerformerCenter.start(t.name,FlowStore.get(t.name))}}},"finder"==t.type?t.name:"â–¶ï¸"+t.name);return e("span",n,[s,i])}},render:function(t){var o=this;let n=[],s=[];a.forEach(e=>{"finder"==e.type&&s.push(o.createSpan(t,e)),"flow"==e.type&&n.push(o.createSpan(t,e))});var e=[],i=(0<n.length&&e.push(n),0<s.length&&(e.push(t("hr",{style:{"background-color":"gray",height:"1px",width:"calc(100% - 4em)",border:"none"}})),e.push(s)),t("style",".breakText {word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"));return e.push(i),t("div",{attrs:{class:"item-commands"}},e)}})},_dungeonsContentModel:function(){return new Vue({el:"#DungeonsContentModel",methods:{getItems:function(){return Dungeons},createSpan:function(e,t){return e("span",{attrs:{class:"zdy-item"},style:{width:"120px"},on:{click:function(){ManagedPerformerCenter.start("è‡ªåŠ¨å‰¯æœ¬-"+t.name,GetDungeonSource(t.name))}}},null!=t.desc?t.desc:t.name)}},render:function(t){var e=this.getItems(),o=this,e=e.map(function(e){return o.createSpan(t,e)});return t("div",{attrs:{class:"item-commands"}},e)}})},_runningFlowsContentModel:function(){return new Vue({el:"#WorkflowsContentModel",methods:{createSpan:function(e,t){var o={attrs:{class:"zdy-item"},style:{width:"120px","background-color":"#05b77d",border:"solid 1px rgb(107, 255, 70)",color:"white"}},n=e("div",{style:{width:"30px",float:"left","background-color":"#ffffff4f","border-radius":"4px"},on:{click:function(){t.pausing()?t.resume():t.pause(),UI.runningFlows(),t.pausing()?Message.append(`<hiy>æš‚åœæ‰§è¡Œï¼Œæµç¨‹: ${t.name()}...</hiy>`):Message.append(`<hiy>æ¢å¤æ‰§è¡Œï¼Œæµç¨‹: ${t.name()}ã€‚</hiy>`)}}},t.pausing()?"â–¶ï¸":"â¸"),s=e("div",{attrs:{class:"breakText"},style:{width:"85px",float:"right"},on:{click:function(){t.stop()}}},"â¹"+t.name());return e("span",o,[n,s])}},render:function(t){var e=ManagedPerformerCenter.getAll(),o=this,e=e.map(function(e){return o.createSpan(t,e)}),n=t("style",".breakText {word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}");return e.push(n),t("div",{attrs:{class:"item-commands"}},e)}})},_shareData:null,_share:function(e,t){UI._shareData=t;t=`
            [if] (__FormUserName) == null
                (__FormUserName) = (:name)
            #input ($__FormUserName)=å½“å‰è§’è‰²å,(:name)
            #config
            ($__FormUserName)=(:name)
            ($password)=233
            @js Server.shareFlowTrigger("(__FormUserName)", "(password)", "${e}", UI._shareData);
            `,e=new Performer("åˆ†äº«"+e,t);e.log(!1),e.start()}};class AncientCmdExecuter{constructor(e,t,o,n,s,i){this.cmds=e,this.willStartExecute=t,this.didFinishExecute=o,this.willPerformCmd=n,this.didPerformCmd=s,this.interval=i||1e3}execute(){this.isWorking||(this.isWorking=!0,this.willStartExecute&&this.willStartExecute(),this._performCmd(0))}_performCmd(e){if(e>=this.cmds.length)this._finishExecute();else if(Role.isFree()){var t=this.cmds[e];if(this.willPerformCmd){var o=null,o=(0<e&&(o=this.cmds[e-1]),this.willPerformCmd(o,t));if(!o)return void this._delayPerformCmd(e);t=o}-1==t.indexOf("@")&&-1==t.indexOf("kill?")&&WG.SendCmd(t),this.didPerformCmd&&this.didPerformCmd(t),-1!=t.indexOf("[exit]")?this._finishExecute():this._delayPerformCmd(e+1)}else this._delayPerformCmd(e)}_delayPerformCmd(e){var t=this;window.setTimeout(function(){t._performCmd(e)},t.interval)}_finishExecute(){this.isWorking=!1,WG.remove_hook(AncientCmdExecuter._hookIndex),this.didFinishExecute&&this.didFinishExecute()}}let THIsland={outMaze:function(e){Role.atPath("taohua/haitan")?new AncientCmdExecuter(["go south","@look 1","@look 5"],function(){THIsland._monitorMaze()},function(){THIsland._cancelMonitorMaze(),e&&e()},function(e,t){return"@look 1"==t?THIsland._goCenterCmd||null:"@look 5"==t?THIsland._decodedMaze?THIsland._outMazeCmd():null:t},void 0,1e3).execute():Message.append("åªæœ‰åœ¨ æ¡ƒèŠ±å²›çš„æµ·æ»© æ‰èƒ½ä½¿ç”¨æ­¤è™«æ´ã€‚")},zhoubotong:function(e){Role.atPath("taohua/wofang")?new AncientCmdExecuter(["go south;go west;go west;go west;go north;go north;go north","go west;go east;go west;go east;go west","go south","@look 1","@look 5","@go 2","@go 3","@go 4","@go 6","@go 7","@go 8","@end"],function(){THIsland._monitorMaze(),THIsland._exitsHookIndex=WG.add_hook("exits",function(e){if(null!=THIsland._lastCoord&&THIsland._lastCoord!=[0,0]&&4==Object.keys(e.items).length){for(var t in e.items)if("æ¡ƒèŠ±æ—"!=e.items[t])return;var o,n=THIsland._lastCoord[0]+1,s=THIsland._lastCoord[1]+1,i=[[["north","northeast","east"],["east","north","south"],["east","south","southeast"]],[["east","north","west"],[],["west","east","south"]],[["west","northwest","north"],["west","south","north"],["west","southwest","south"]]][n][s];for(o in e.items)if(-1==i.indexOf(o))return void(THIsland._goCave="go "+o)}})},function(){THIsland._lastCoord=void 0,THIsland._lastGo=void 0,THIsland._goCave=void 0,THIsland._cancelMonitorMaze(),WG.remove_hook(THIsland._exitsHookIndex),e&&e()},function(e,t){if(THIsland._goCave)return THIsland._goCave+";go west;[exit]";var o,n=0;switch(t){case"@look 1":return THIsland._goCenterCmd||null;case"@look 5":if(THIsland._decodedMaze)break;return null;case"@go 2":return THIsland._lastCoord=THIsland._mazeCoords[2],THIsland._lastGo=THIsland._mazePath(THIsland._lastCoord),THIsland._lastGo;case"@go 3":n=3;break;case"@go 4":n=4;break;case"@go 6":n=6;break;case"@go 7":n=7;break;case"@go 8":n=8}return 0!=n?(o=THIsland._mazeBackPath(THIsland._lastGo),THIsland._lastCoord=THIsland._mazeCoords[n],THIsland._lastGo=THIsland._mazePath(THIsland._lastCoord),o+";"+THIsland._lastGo):t},void 0,1e3).execute():Message.append("åªæœ‰åœ¨ è“‰å„¿çš„å§å®¤ æ‰èƒ½ä½¿ç”¨æ­¤è™«æ´ã€‚")},_outMazeCmd:function(){for(var e="",t=2;t<=9;t++){var o=THIsland._mazeCoords[t],o=THIsland._mazePath(o);e+=9==t?o+";"+o:o+";"+THIsland._mazeBackPath(o)+";"}return e+=";go south"},_mazePath:function(e){return[["go southwest","go west","go northwest"],["go south","","go north"],["go southeast","go east","go northeast"]][e[0]+1][e[1]+1]},_mazeBackPath:function(e){return{"":"","go southwest":"go northeast","go west":"go east","go northwest":"go southeast","go south":"go north","go north":"go south","go southeast":"go northwest","go east":"go west","go northeast":"go southwest"}[e]},_monitorMaze:function(){THIsland._mazeCoords=[[2,2],[2,2],[2,2],[2,2],[2,2],[0,0],[2,2],[2,2],[2,2],[2,2]],THIsland._atFirst=!1,THIsland._goCenterCmd=void 0,THIsland._decodedMaze=!1;var e=WG.add_hook(["room","exits"],function(e){null==THIsland._goCenterCmd&&("room"==e.type?null!=e.desc&&new RegExp("å››å‘¨æ ½äº†å¤§æ¦‚æœ‰ä¸€æ£µæ¡ƒæ ‘").exec(e.desc)&&(THIsland._atFirst=!0):"exits"==e.type&&null!=e.items&&THIsland._atFirst&&(e.items.north&&e.items.south?e.items.west?(THIsland._mazeCoords[1]=[1,0],THIsland._goCenterCmd="go west"):(THIsland._mazeCoords[1]=[-1,0],THIsland._goCenterCmd="go east"):e.items.west&&e.items.east&&(e.items.north?(THIsland._mazeCoords[1]=[0,-1],THIsland._goCenterCmd="go north"):(THIsland._mazeCoords[1]=[0,1],THIsland._goCenterCmd="go south"))))}),t=WG.add_hook("room",function(e){if(!THIsland._decodedMaze&&null!=e.desc){e=new RegExp("èƒ½çœ‹åˆ°ä¸œå—æ–¹å‘å¤§æ¦‚æœ‰.(?=æ£µæ¡ƒæ ‘)").exec(e.desc);if(e){e=e.toString();switch(e.substring(e.length-1)){case"äºŒ":THIsland._mazeCoords[2]=[1,-1];break;case"å››":THIsland._mazeCoords[4]=[1,-1];break;case"å…­":THIsland._mazeCoords[6]=[1,-1];break;case"å…«":THIsland._mazeCoords[8]=[1,-1]}for(THIsland._mazeCoords[9]=[-THIsland._mazeCoords[1][0],-THIsland._mazeCoords[1][1]];;)if(2!=THIsland._mazeCoords[2][0]&&(THIsland._mazeCoords[8]=[-THIsland._mazeCoords[2][0],-THIsland._mazeCoords[2][1]]),2!=THIsland._mazeCoords[8][0]&&(THIsland._mazeCoords[8][0]==THIsland._mazeCoords[1][0]?THIsland._mazeCoords[6]=[THIsland._mazeCoords[8][0],-THIsland._mazeCoords[8][1]]:THIsland._mazeCoords[6]=[-THIsland._mazeCoords[8][0],THIsland._mazeCoords[8][1]]),2!=THIsland._mazeCoords[6][0]&&(THIsland._mazeCoords[4]=[-THIsland._mazeCoords[6][0],-THIsland._mazeCoords[6][1]]),2!=THIsland._mazeCoords[4][0]&&(THIsland._mazeCoords[4][0]==THIsland._mazeCoords[9][0]?THIsland._mazeCoords[2]=[THIsland._mazeCoords[4][0],-THIsland._mazeCoords[4][1]]:THIsland._mazeCoords[2]=[-THIsland._mazeCoords[4][0],THIsland._mazeCoords[4][1]]),2!=THIsland._mazeCoords[2][0]&&2!=THIsland._mazeCoords[4][0]&&2!=THIsland._mazeCoords[6][0]&&2!=THIsland._mazeCoords[8][0])break;THIsland._mazeCoords[8][0]==THIsland._mazeCoords[4][0]?THIsland._mazeCoords[3]=[THIsland._mazeCoords[8][0],0]:THIsland._mazeCoords[3]=[0,THIsland._mazeCoords[8][1]],THIsland._mazeCoords[7]=[-THIsland._mazeCoords[3][0],-THIsland._mazeCoords[3][1]],THIsland._decodedMaze=!0}}});THIsland._mazeHookIndexes=[e,t]},_cancelMonitorMaze:function(){for(var e=THIsland._mazeHookIndexes.length-1;0<=e;e--){var t=THIsland._mazeHookIndexes[e];WG.remove_hook(t)}}},DungeonsShortcuts=(!function(){var e=new AtCmdExecutor("taohualin",function(e,t){return new Promise(e=>{THIsland.outMaze(e)})});CmdExecuteCenter.addExecutor(e)}(),!function(){var e=new AtCmdExecutor("zhoubotong",function(e,t){return new Promise(e=>{THIsland.zhoubotong(e)})});CmdExecuteCenter.addExecutor(e)}(),{xianyu_xyjq:function(){var e=new Performer("è¥„é˜³æé’±",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>è¥„é˜³æé’±</hic>
@cmdDelay 500
stopstate;jh fam 8 start
@await 500
[if] (:room)==è¥„é˜³åŸ-å¹¿åœº
  juanxian {réƒ­é–}?;juanxian2 {réƒ­é–}?
@print å·²å®Œæˆï¼šè¥„é˜³æé’±
$zdwk
            `);e.log(!1),e.start()},xianyu_xybm:function(){var e=new Performer("è¥„é˜³æŠ¥å",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>è¥„é˜³æŠ¥å</hic>
@cmdDelay 500
stopstate;jh fam 8 start
@await 500
[if] (:room)==è¥„é˜³åŸ-å¹¿åœº
  baoming {réƒ­é–}?
  @tip ä½ å¯ä»¥å»($xyBM)é™„è¿‘æŸ¥çœ‹æ•Œæƒ…|è¿™ä½($xyBM)å·²ç»æŠ¥åäº†ã€‚|æ‰å¯ä»¥å†æ¬¡($xyOver)è¥„é˜³å®ˆåŸ|æœ€è¿‘æ²¡($xyNone)æˆ˜äº‹
  [if] (xyBM) != null
    @print è¥„é˜³å·²æŠ¥åï¼Œè¯·é€‰æ‹©å®ˆé—¨ä½ç½®ï¼š
    @js Message.append('<div class="item-commands"><span cmd="$wait 350;jh fam 8 start;go north;go north;go north;go north;go north;">â¬†ï¸ å®ˆåŒ—é—¨</span><span cmd="$wait 350;jh fam 8 start;go south;go south;go south;go south;go south;">â¬‡ï¸ å®ˆå—é—¨</span><span cmd="$wait 350;jh fam 8 start;go east;go east;go east;go east;go east;">â¡ï¸ å®ˆä¸œé—¨</span><span cmd="$wait 350;jh fam 8 start;go west;go west;go west;go west;go west;">â¬…ï¸ å®ˆè¥¿é—¨</span></div>')
  [else if] (xyNone) != null
    @print è¥„é˜³å°šæœªå¼€å¯ã€‚
    $zdwk
  [else if] (xyOver) != null
    @print è¥„é˜³å·²ç»å®Œæˆã€‚
    $zdwk
  [else]
    $zdwk
            `);e.log(!1),e.start()},xianyu_ksyb:function(){var e=new Performer("å¿«é€Ÿè¿é•–",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>å¿«é€Ÿè¿é•–</hic>
@cmdDelay 500
stopstate
$to æ‰¬å·åŸ-é•–å±€æ­£å…
ksyb {ræ—éœ‡å—}
@tip æœ€è¿‘æš‚æ—¶($done)å§”æ‰˜ï¼Œä½ å…ˆä¼‘æ¯ä¸‹å§|ä½ éœ€è¦æ”¯ä»˜($charges)é»„é‡‘çš„é›‡ä½£è´¹ç”¨|åªæœ‰æ€»é•–å¤´æ‰($can)é›‡ä½£é•–å¸ˆ|å¦‚æœä½ ä¸èƒ½æŠŠé•–é“¶($escort)é€åˆ°|ä½ ä¸æ˜¯($escort)è¿é•–å—
[if] (charges)!=null
  <-recordGains
  task yunbiao {ræ—éœ‡å—} qkstart
  @await 11000
  @tidyBag
  recordGains->nopopup
[else if] (can)!=null
  tm è¿é•–ç¯æ•°ä¸åˆ°200ç¯ï¼Œæ— æ³•å¿«é€Ÿè¿é•–ã€‚
[else if] (escort)!=null
  tm å½“å‰æœ‰æœªå®Œæˆçš„è¿é•–ä»»åŠ¡ï¼Œæ— æ³•å¿«é€Ÿè¿é•–ã€‚
$zdwk 
            `);e.log(!1),e.start()},xianyu_sdyt:function(){var e=new Performer("æ‰«è¡å¦–å¡”",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>æ‰«è¡å¦–å¡”</hic>
@print <hic>å¦‚æœæƒ³è‡ªå·±é™é»˜å¼è°ƒç”¨æ‰«è¡å¦–å¡”åŠŸèƒ½ï¼Œè¯·å…ˆè®¾å®šå˜é‡æ‰«è¡æ¬¡æ•° <hiy>SDYTnum</hiy> å’Œ å•æ¬¡æ¶ˆè€—ç²¾åŠ›ä¸Šé™ <hiy>SDYTjlsx</hiy> çš„å€¼ã€‚</hic>
[if] (SDYTjlsx) == 0 || (SDYTjlsx) == null || (SDYTjlsx) == undefined
  @js ($SDYTjlsx) = prompt("è¯·è¾“å…¥å•æ¬¡æ¶ˆè€—ç²¾åŠ›ä¸Šé™ï¼Œè¶…è¿‡åå°†è‡ªåŠ¨åœæ­¢ï¼š", "85");
[if] (SDYTnum) == 0 || (SDYTnum) == null || (SDYTnum) == undefined
  @js ($SDYTnum) = prompt("è¯·è¾“å…¥æœ¬è½®æ‰«è¡æ¬¡æ•°ï¼Œæ³¨æ„ï¼šå•æ¬¡æ¶ˆè€—ç²¾åŠ›è¾¾åˆ°ä¸Šé™åå°†è‡ªåŠ¨åœæ­¢ã€‚","5")
($sdyt_num) = (SDYTnum)
//($SDYTnum) = null
[if] (sdyt_num) == 0 || (sdyt_num) == null || (sdyt_num) == undefined
  @print <ord>æ‰«è¡æ¬¡æ•°ä¸º0ï¼Œå–æ¶ˆæ‰«è¡ã€‚</ord>
  [exit]
@print <hiy>è®¡åˆ’æ‰«è¡(sdyt_num)æ¬¡å¦–å¡”ã€‚</hiy>
stopstate
[if] (:room) != å¤å¤§é™†-å¢“å›­
  $goyt
  @await 1500
[if] (:room) != å¤å¤§é™†-å¢“å›­
  @print <ord>æ— æ³•å‰å¾€å¤å¤§é™†ï¼Œè¯·é‡è¯•æˆ–ç¡®å®šå½“å‰è§’è‰²æ˜¯å¦å·²è§£é”å¤å¤§é™†ã€‚</ord>
  $zdwk
  [exit]
[if] {bæ‰«è¡ç¬¦#}? < (sdyt_num) || {bæ‰«è¡ç¬¦}? == null
  shop 0 (sdyt_num)
($num) = 0
@cmdDelay 500
($ytWeek) = null
[while] (num) < (sdyt_num)
  ss muyuan
  @tip ä½ å³å°†æ¶ˆè€—ä¸€ä¸ªæ‰«è¡ç¬¦ï¼Œ($jl_yt)ç²¾åŠ›å¿«é€Ÿå®Œæˆä¸€æ¬¡å¼‘å¦–å¡”|ä½ å³å°†æ¶ˆè€—($jl_yt)ç²¾åŠ›å¿«é€Ÿå®Œæˆä¸€æ¬¡å¼‘å¦–å¡”|ä½ å°šæœª($ytJS)å¼‘å¦–å¡”|ä½ å·²è¾¾åˆ°($ytWeek)ä¸Šé™
  [if] (ytJS) != null
    @print <hiy>å¦–å¡”æœªè§£é”ï¼Œæ— æ³•æ‰«è¡ã€‚</hiy>
    [break]
  [if] (ytWeek) != null
    @print <hiy>å¦–å¡”æ‰«è¡å·²è¾¾åˆ°æœ¬å‘¨ä¸Šé™ã€‚</hiy>
    [break]
  [if] (jl_yt) > (SDYTjlsx) && (jl_yt) != null
    @print <ord>å•æ¬¡æ‰«è¡ç²¾åŠ›è¶…è¿‡(SDYTjlsx)ï¼Œè‡ªåŠ¨åœæ­¢ã€‚</ord>
    [break]
  [else]
    saodang muyuan
    @tip ä½ æ¶ˆè€—ä¸€ä¸ªæ‰«è¡ç¬¦|ç²¾åŠ›å¿«é€Ÿå®Œæˆå¼‘å¦–å¡”|ä½ çš„($lack)ä¸å¤Ÿ|ä½ å·²è¾¾åˆ°($ytWeek)ä¸Šé™
    [if] (ytWeek) != null
      @print <hiy>å¦–å¡”æ‰«è¡å·²è¾¾åˆ°æœ¬å‘¨ä¸Šé™ã€‚</hiy>
      [break]
    [if] (lack) != null
      @print <ord>(lack)ä¸è¶³ï¼Œè‡ªåŠ¨åœæ­¢æ‰«è¡å¦–å¡”ã€‚</ord>
      [break]
  ($num) = (num) + 1
@await 1000
$zdwk
            `);e.log(!1),e.start()},xianyu_mghyj:function(){var e=new Performer("é—¨è´¡æ¢å…ƒæ™¶",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>é—¨è´¡æ¢å…ƒæ™¶</hic>
@cmdDelay 500
stopstate
($hqName) = é—¨æ´¾åå‹¤ç®¡ç†å‘˜
[if] (:family) == æ­¦å½“æ´¾
  ($hqMap) = æ­¦å½“æ´¾-çŸ³é˜¶
[else if] (:family) == å°‘æ—æ´¾
  ($hqMap) = å°‘æ—æ´¾-å±±é—¨æ®¿
[else if] (:family) == åå±±æ´¾
  ($hqMap) = åå±±æ´¾-ç»ƒæ­¦åœº
[else if] (:family) == å³¨çœ‰æ´¾
  ($hqMap) = å³¨çœ‰æ´¾-èµ°å»Š
[else if] (:family) == é€é¥æ´¾
  ($hqMap) = é€é¥æ´¾-æ—é—´å°é“
[else if] (:family) == ä¸å¸®
  ($hqMap) = ä¸å¸®-æš—é“
[else if] (:family) == æ€æ‰‹æ¥¼
  ($hqMap) = æ€æ‰‹æ¥¼-ä¼‘æ¯å®¤
[else]
  ($hqMap) = æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†
  ($hqName) = æ­¦é¦†åå‹¤
[while] (:room) != (hqMap)
  $to (hqMap)
  [if] (:family) == ä¸å¸®
    @await 300
    go east
  @await 500
[if] {r(hqName)}? == null
  @print åå‹¤å¤±è¸ªï¼Œè¯·ç¨åå†è¯•ã€‚
[else]
  ask1 {r(hqName)}?
  @dialog
  buy 1 {då…ƒæ™¶o}? from {r(hqName)}?
  @tip ä½ ä»é—¨æ´¾åå‹¤ç®¡ç†å‘˜è´­ä¹°äº†|è¿™é‡Œæ²¡æœ‰($mgYJ)å¤šçš„|ä½ æ²¡æœ‰é‚£ä¹ˆå¤šçš„($mgGJ)åŠŸç»©
  [if] (mgGJ) != null
    @print é—¨è´¡ä¸è¶³ï¼Œæ— æ³•è´­ä¹°ã€‚
  [else if] (mgYJ) != null
    @print å…ƒæ™¶å·²å”®ç©ºï¼Œæ— æ³•è´­ä¹°ã€‚
  [else]
    @print å·²è´­ä¹°ä¸€ä¸ª<hio>å…ƒæ™¶</hio>ã€‚
$zdwk
            `);e.log(!1),e.start()},xianyu_ltbm:function(){var e=new Performer("æ“‚å°æŠ¥å",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>æ“‚å°æŠ¥å</hic>
@cmdDelay 500
stopstate;$to æ‰¬å·åŸ-æ“‚å°
@await 500
select {ræ“‚å°æ¯”æ­¦æŠ¥å}?
askbiwu {ræ“‚å°æ¯”æ­¦æŠ¥å}?
@tip ä½ ä½¿ç”¨å½“å‰è£…å¤‡å’ŒæŠ€èƒ½($ltBM)å‚åŠ æ¯”æ­¦|ä½ å·²ç»æŠ¥åå‚åŠ æ¯”æ­¦ï¼Œ($ltGX)æ›´æ–°ä½ çš„æŠ€èƒ½å’Œè£…å¤‡|ä½ å·²æŠ¥åæˆ–æ›´æ–°çŠ¶æ€ï¼Œè¯·å‹¿è¿ç»­æŠ¥åã€‚
[if] (ltGX) != null
  biwu record ok
$zdwk
            `);e.log(!1),e.start()},xianyu_setting:function(){var e=new Performer("å‚æ•°è®¾ç½®",`
[(SDYTjlsx)==null]($SDYTjlsx)=85
[(SDYTnum)==null]($SDYTnum)=5
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>å‚æ•°è®¾ç½®</hic>
#input ($SDYTjlsx)=<hiz>ä¸€é”®è®¾ç½®å„ç§å¸¸ç”¨æµç¨‹ï¼ˆé™†ç»­æ›´æ–°æ·»åŠ ï¼‰å‚æ•°</hiz><br/>&nbsp*&nbsp<ord>ğŸ‰ æ‰«è¡å¦–å¡”</ord> å‚æ•°<br/>&nbsp*&nbspå¦–å¡”å•æ¬¡æ¶ˆè€—ç²¾åŠ›ä¸Šé™,(SDYTjlsx)
#input ($SDYTnum)=æ¯è½®å¦–å¡”æ‰«è¡æ¬¡æ•°,(SDYTnum)
#config
@print å·²å®Œæˆå‚æ•°è®¾ç½®
            `);e.log(!1),e.start()},cangbaotu:function(){var e=new Performer("è—å®å›¾å¯»å®",`
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
    @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
    [exit]
@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>è—å®å›¾</hic>
[if] {bè—å®å›¾}? == null
    tm èƒŒåŒ…ä¸­æ— è—å®å›¾ï¼Œå–æ¶ˆæœ¬æ¬¡å¯»å®ã€‚
    [exit]
@cmdDelay 500
stopstate
@toolbar jh
@toolbar pack
($money1) = (:money)
($ebony1) = {bç„æ™¶#}?
($number)=1
($cbt_n) = 0
@stopSSAuto
<-recordGains
[while] {bè—å®å›¾}? != null
    <---
    ($pos)=null
    use {bè—å®å›¾}?
    @tip å‘ç°ä¸Šé¢çš„å›¾æ¡ˆæ‰€ç»˜çš„æ–¹ä½ä¼¼ä¹($pos)ã€‚|ä½ æ‰¾åˆ°äº†
    [if] (pos) == å°±åœ¨ä½ è¿™é‡Œ
        use {bè—å®å›¾}?
        ($cbt_n) = (cbt_n) + 1
        [continue]
    [else if] (pos) == null
        [continue]
    --->
    jh fam (number) start
    [if] (pos) != ç¦»ä½ æ‰€åœ¨çš„ä½ç½®æŒºè¿œçš„
        // æ­¦å½“
        [if] (number)=1
            [if] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                go north
                go south;go west;go northup;go north;go east
            [else if] (pos) == åœ¨ä½ çš„è¥¿æ–¹
                go west
                go west
            [else]
                go west;go northup
                go north
                go west
                go northup
                go northup
                go northup
                [while] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                    go north
        // å°‘æ—
        [else if] (number)=2
            [if] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                go north
                go north
                go northup
                go southdown;go northwest;go northeast
                [while] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                    go north
            [else if] (pos) == åœ¨ä½ çš„è¥¿åŒ—æ–¹å‘
                go north;go west
                go east;go north;go northwest
                go northeast;go north;go west
                go east;go north;go west
                go east;go north;go west
            [else]
                go north;go east
                go west;go north;go northeast
                go northwest;go north;go east
                go west;go north;go east
        // åå±±
        [else if] (number)=3
            [if] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                go westup;go north;go east
                go west;go north;go east
            [else if] (pos) == åœ¨ä½ çš„è¥¿åŒ—æ–¹å‘
                go westup;go north
                go north
                go north
            [else if] (pos) == åœ¨ä½ çš„è¥¿æ–¹
                go westup
                go west
            [else if] (pos) == åœ¨ä½ ä¸œæ–¹
                go eastup
            [else if] (pos) == åœ¨ä½ çš„ä¸œå—æ–¹å‘
                go eastup;go southup
                jumpdown
                go southup
                go south
                go east
            [else]
                go westup
                go south
                go southup
                go southup
                break bi;go enter
                go westup
                go westup
                jumpup
        // å³¨çœ‰
        [else if] (number)=4
            go west;go south;go west
            [if] (pos) == åœ¨ä½ ä¸œæ–¹
                go east
                go east
                go east
            [else if] (pos) == åœ¨ä½ çš„è¥¿æ–¹
                go west
            [else if] (pos) == åœ¨ä½ çš„å—æ–¹
                go south
                go south
            [else if] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                go north
                go north
            [else if] (pos) == åœ¨ä½ çš„ä¸œåŒ—æ–¹å‘
                go east;go north
                go east
                go northup
                go east
            [else]
                go east;go south
                go north;go east;go south
        // é€é¥
        [else if] (number)=5
            [if] (pos) == åœ¨ä½ ä¸œæ–¹
                go east
            [else if] (pos) == åœ¨ä½ çš„è¥¿æ–¹
                go west
            [else if] (pos) == åœ¨ä½ çš„å—æ–¹
                go south
                go south
            [else if] (pos) == åœ¨ä½ çš„åŒ—æ–¹
                go north
                go north
            [else if] (pos) == åœ¨ä½ çš„ä¸œåŒ—æ–¹å‘
                go east;go north
            [else if] (pos) == åœ¨ä½ çš„ä¸œå—æ–¹å‘
                go east;go south
                go south
            [else if] (pos) == åœ¨ä½ çš„è¥¿å—æ–¹å‘
                go west;go south
            [else]
                go down
                go down
        // ä¸å¸®
        [else]
            [if] (pos) == åœ¨ä½ ä¸œæ–¹
                go down;go east;go east;go east;go up
                go down;go east;go east;go up
            [else if] (pos) == åœ¨ä½ çš„å—æ–¹
                go down
            [else]
                go down;go east
                go east
                go east
                go east
                go east
    [else if] (number)<6
        ($number) = (number) + 1
    [else]
        ($number)=1
//ç»“æŸåè‡ªåŠ¨æŒ–çŸ¿æˆ–è€…é—­å…³
@await 1000
@tidyBag
@wait 2000
$zdwk
recordGains->nopopup
@recoverSSAuto
@toolbar pack
($money2) = (:money)
@js ($income_m) = parseInt(((money2) - (money1))/10000)
($ebony2) = {bç„æ™¶#}?
[if] (ebony1) != null
    ($income_e) = (ebony2) - (ebony1)
[else]
    ($income_e) = (ebony2)
tm æŒ–å® (cbt_n) æ¬¡ï¼Œæ”¶ç›Š (income_e)ä¸ªç„æ™¶ï¼Œ(income_m) ä¸¤é»„é‡‘
@print æŒ–å® (cbt_n) æ¬¡ï¼Œæ”¶ç›Š <hiy>(income_e)</hiy> ä¸ªç„æ™¶ï¼Œ<hiy>(income_m)</hiy> ä¸¤é»„é‡‘
            `);e.log(!1),e.start()},cihang:function(){var e=new Performer("æ…ˆèˆªä¸ƒé‡é—¨",`
[if] (:room æ…ˆèˆªé™æ–‹) == false
    @print <hiy>è¯·å…ˆè¿›å…¥æ…ˆèˆªå‰¯æœ¬å†è¿è¡Œã€‚</hiy>
    [exit]
[else]
    [if] (:room) != æ…ˆèˆªé™æ–‹-å±±é—¨(å‰¯æœ¬åŒºåŸŸ) && (:room) != æ…ˆèˆªé™æ–‹-å¸è¸å³°(å‰¯æœ¬åŒºåŸŸ)
        @print <hiy>è¯·åœ¨å±±é—¨æˆ–å¸è¸å³°è¿è¡Œã€‚</hiy>
        [exit]
($go) = 'east','west','south','north'
($qiku) = 'è€','ç—…','æ­»','çˆ±åˆ«ç¦»','æ€¨æ†ä¼š','æ±‚ä¸å¾—'
($num1) = 0
[if] (:room) == æ…ˆèˆªé™æ–‹-å±±é—¨(å‰¯æœ¬åŒºåŸŸ)
    go south
[else if] (:room) == æ…ˆèˆªé™æ–‹-å¸è¸å³°(å‰¯æœ¬åŒºåŸŸ)
    go south[2]
@print <hiy>å¼€å§‹è‡ªåŠ¨å¯»è·¯ï¼Œå¯»è·¯æœŸé—´è¯·å‹¿ç‚¹å‡»åœ°å›¾â€¦â€¦</hiy>
@cmdDelay 500
[while] (num1) < 6
    @js ($ku) = [(qiku)][(num1)]
    ($num2) = 0
    [while] true
        [if] (map) != null && (retry) == true
            (map)
            @await 500
        @js ($fx) = [(go)][(num2)]
        [if] (fx) == null
            @print <hiy>è‡ªåŠ¨å¯»è·¯å¤±è´¥ï¼Œè¯·å›åˆ°å±±é—¨é‡æ–°è¿è¡Œï¼</hiy>
            [exit]
        go (fx)
        [if] (:room) == æ…ˆèˆªé™æ–‹-ä¸ƒé‡é—¨(å‰¯æœ¬åŒºåŸŸ)
            @js ($ku_now) = $(".room_desc").text().match("ï¼Œæ˜¯å([^%]+)è‹¦ã€‚")[1]
            [if] (ku) != (ku_now)
                [while] true
                    go west
                    [if] (:room) == æ…ˆèˆªé™æ–‹-ä¸ƒé‡é—¨(å‰¯æœ¬åŒºåŸŸ)
                        @js ($dir_gc) = $("text:contains('å¹¿åœº')").attr("dir")
                    [if] (dir_gc) == south
                        go south
                    @await 200
                    [if] (:room) == æ…ˆèˆªé™æ–‹-å±±é—¨(å‰¯æœ¬åŒºåŸŸ)
                        [break]
                    [else if] (:room) == æ…ˆèˆªé™æ–‹-å¹¿åœº(å‰¯æœ¬åŒºåŸŸ)
                        @print <hiy>å·²èµ°å‡ºä¸ƒé‡é—¨ï¼</hiy>
                        [exit]
                go south
                ($num2) = (num2) + 1
                ($retry) = true
            [else]
                [if] (map) == null
                    ($map) = go (fx)
                [else]
                    ($map) = (map);go (fx)
                ($retry) = false
                [break]
        [else if] (:room) == æ…ˆèˆªé™æ–‹-å¹¿åœº(å‰¯æœ¬åŒºåŸŸ)
            @print <hiy>å·²èµ°å‡ºä¸ƒé‡é—¨ï¼</hiy>
            [exit]
    ($num1) = (num1) + 1
go south
[if] (:room) == æ…ˆèˆªé™æ–‹-å¹¿åœº(å‰¯æœ¬åŒºåŸŸ)
    @print <hiy>å·²èµ°å‡ºä¸ƒé‡é—¨ï¼</hiy>
            `);e.log(!1),e.start()},zhanshendian:function(){var e=new Performer("æˆ˜ç¥æ®¿è§£è°œ",`
[if] (:room æˆ˜ç¥æ®¿) == false
    @print <hiy>è¯·å…ˆè¿›å…¥æˆ˜ç¥æ®¿å‰¯æœ¬å†è¿è¡Œã€‚</hiy>
    [exit]
[if] (:room) != æˆ˜ç¥æ®¿-å·¦é›ç¿¼(å‰¯æœ¬åŒºåŸŸ)
    @print <hiy>è¯·å…ˆæ‰‹åŠ¨å‘å·¦èµ°åˆ°å·¦é›ç¿¼ã€‚</hiy>
@until (:room) == æˆ˜ç¥æ®¿-å·¦é›ç¿¼(å‰¯æœ¬åŒºåŸŸ)
look shi
@tip å’Œå¤–é¢æ˜Ÿç©ºæ˜Ÿå®¿ä½ç½®ä¸€ä¸€å¯¹åº”ï¼Œ($star_0)ï¼Œ($star_1)ï¼Œ($star_2)ï¼Œ($star_3)ï¼Œ($star_4)ï¼Œ($star_5)ï¼Œ($star_6)ï¼Œ($star_7)è¿™äº›æ˜Ÿå®¿ä¾æ¬¡é—ªçƒ
($stars) = "(star_0)","(star_1)","(star_2)","(star_3)","(star_4)","(star_5)","(star_6)","(star_7)"
($dirs) = {"star":"è§’äº¢å®¤","dir":1,"eswn":"ä¸œåŒ—â†—ï¸","go":"northeast"},{"star":"æ°æˆ¿å¿ƒ","dir":0,"eswn":"ä¸œâ†’","go":"east"},{"star":"å°¾ç®•è½¸","dir":2,"eswn":"ä¸œå—â†˜ï¸","go":"southeast"},{"star":"äº•é¬¼å‚","dir":4,"eswn":"è¥¿å—â†™ï¸","go":"southwest"},{"star":"æŸ³æ˜Ÿå¼ ç¿¼","dir":3,"eswn":"å—â†“","go":"south"},{"star":"å¥å¨„æ–—ç‰›","dir":6,"eswn":"è¥¿åŒ—â†–ï¸","go":"northwest"},{"star":"èƒƒæ˜´æ¯•è§œ","dir":5,"eswn":"è¥¿â†","go":"west"},{"star":"å¥³è™šå±å£","dir":7,"eswn":"åŒ—â†‘","go":"north"}
@cmdDelay 100
($num_1) = 0
[while] (num_1) < 8
    @js ($star) = [(stars)][(num_1)]
    ($num_2) = 0
    [while] (num_2) < 28
        ($dir) = null
        @js ($dir) = var d=[(dirs)];var s=d[(num_2)]["star"].indexOf("(star)");if(s>=0){d[(num_2)]["dir"]}
        [if] (dir) != null
            [break]
        ($num_2) = (num_2) + 1
    push (dir)
    ($num_1) = (num_1) + 1
look shi
@tip æ®¿é¡¶çš„æ˜Ÿå›¾ä¾æ—§ï¼Œå´ä»…å‰©ä¸€é¢—($last)å®¿æ˜Ÿå­¤é›¶é›¶çš„é—ªçƒç€
($num_3) = 0
[while] (num_3) < 28
    ($dir_l) = null
    ($go_l) = null
    @js ($dir_l) = var d=[(dirs)];var s=d[(num_3)]["star"].indexOf("(last)");if(s>=0){d[(num_3)]["eswn"]}
    @js ($go_l) = var d=[(dirs)];var s=d[(num_3)]["star"].indexOf("(last)");if(s>=0){d[(num_3)]["go"]}
    [if] (dir_l) != null && (go_l) != null
        [break]
    ($num_3) = (num_3) + 1
@print <hiy>(last)å®¿ï¼Œæœ€åä¸€ä¸ªæ–¹ä½æ˜¯ã€(dir_l)ã€‘</hiy>
tm (last)å®¿ï¼Œæœ€åä¸€ä¸ªæ–¹ä½æ˜¯ã€(dir_l)ã€‘60ç§’å€’è®¡æ—¶å·²å¼€å§‹ï¼Œè¯·æŠ“ç´§å¼€æ‰“ã€‚
@print <ord>æ‰“å®Œå³é›ç¿¼æœ€åä¸€æ³¢å®ˆå«åä¼šè‡ªåŠ¨è¿›ç§˜é“ã€(go_l)ã€‘</ord>
@until (:room) == æˆ˜ç¥æ®¿-å³é›ç¿¼(å‰¯æœ¬åŒºåŸŸ) || (:room å‰¯æœ¬åŒºåŸŸ) == false
@until (:combating) == true || (:room å‰¯æœ¬åŒºåŸŸ) == false
@until (:combating) == false || (:room å‰¯æœ¬åŒºåŸŸ) == false
[if] (:room å‰¯æœ¬åŒºåŸŸ) == false
    [exit]
[while] (:room) == æˆ˜ç¥æ®¿-å³é›ç¿¼(å‰¯æœ¬åŒºåŸŸ) && (:living) == true
    go (go_l);$wait 100
            `);e.log(!1),e.start()},guzongmen:function(){var e=new Performer("å¤å®—é—¨å¯»è·¯",`
@print <hiy>å¦‚æœå¯»è·¯ä¸€ç›´å¤±è´¥ï¼Œè¯·æ£€æŸ¥è®¾ç½®ä¸­<ord>ã€åˆ‡æ¢æˆ¿é—´æ—¶ä¸æ¸…ç©ºä¸Šæˆ¿é—´ä¿¡æ¯ã€‘</ord>æ˜¯å¦å¼€å¯ã€‚</hiy>
[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·) == true
    @print <ord>å½“å‰å¤„äºå‰¯æœ¬ä¸­ï¼Œæ— æ³•å¯»è·¯ï¼</ord>
    [exit]
@cmdDelay 500
stopstate
jh fam 9 start
go enter
go up
@tip æ‰“è´¥æˆ‘ï¼Œä½ å°±($pass)ä¸Šå»|èšé­‚æˆåŠŸ|è¸è¿‡é•¿ç”Ÿé—¨|ä½ å·²å ªç ´ç”Ÿæ­»|å¤è€çš„å¤§é™†å¯»æ‰¾çœŸç›¸|ä½ è¿($pass)éƒ½æ²¡èšåˆ|ä½ æƒ³($pass)ä¸ºç¥å—
[if] (pass) != null
    @print <ord>ä¸ç¬¦åˆå‰å¾€å¤å¤§é™†è¦æ±‚ï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>
    [exit]
ggdl {rç–¯ç™«çš„è€å¤´}
go north[3]
go north[3]
look shi
tiao1 shi;tiao1 shi;tiao2 shi
@until (:room) == å¤å¤§é™†-æ–­å±±
@js ($ylfx) = $(".room_desc").text().match(/[ä¸œå—è¥¿åŒ—]ï¼Œ/g)
@js ($ylfx) = var f="(ylfx)";f.replace(/ï¼Œ/g,"")
@js ($ylfx) = var f="(ylfx)";f.replace(/ä¸œ/g,"west")
@js ($ylfx) = var f="(ylfx)";f.replace(/è¥¿/g,"east")
@js ($ylfx) = var f="(ylfx)";f.replace(/å—/g,"north")
@js ($ylfx) = var f="(ylfx)";f.replace(/åŒ—/g,"south")
@js ($ylfx) = var f="(ylfx)";f.replace(/,/g,"','")
@js ($ylfx) = var f=['(ylfx)'];f.reverse()
@js ($ylfx) = var f="(ylfx)";f.replace(/,/g,"','")
@js ($ylfx) = "'"+"(ylfx)"+"'"
@js ($fl) = [(ylfx)].length
go down
go south[3]
go south[2]
go west
($go) = 'east','west','south','north'
($num) = 0
[while] (num) < 4
    @await 500
    @js $(".content-message pre").html("");
    @await 500
    @js ($fx1) = [(go)][(num)]
    go (fx1)
    @js ($lost) = $(".content-message").text().match("ä½ ä¼¼ä¹è¿·è·¯äº†")
    [if] (lost) != null
        go south[3]
        go south[3]
        go west
        ($num) = (num) + 1
    [else]
        [break]
[if] (fl) == 5
    ($num) = 0
    [while] (num) < 5
        @js ($fx) = [(ylfx)][(num)]
        go (fx)
        ($num) = (num) + 1
[else if] (fl) == 4
    @js ($fx2) = [(ylfx)][0]
    @js ($fx3) = [(ylfx)][1]
    @js ($fx4) = [(ylfx)][2]
    @js ($fx5) = [(ylfx)][3]
    ($lxjh) = {"lx":"go (fx2);go (fx3);go (fx4);go (fx5);go (fx5)"},{"lx":"go (fx2);go (fx3);go (fx4);go (fx4);go (fx5)"},{"lx":"go (fx2);go (fx3);go (fx3);go (fx4);go (fx5)"},{"lx":"go (fx2);go (fx2);go (fx3);go (fx4);go (fx5)"}
[else if] (fl) == 3
    @js ($fx2) = [(ylfx)][0]
    @js ($fx3) = [(ylfx)][1]
    @js ($fx4) = [(ylfx)][2]
    ($lxjh) = {"lx":"go (fx2);go (fx3);go (fx4);go (fx4);go (fx4)"},{"lx":"go (fx2);go (fx3);go (fx3);go (fx3);go (fx4)"},{"lx":"go (fx2);go (fx2);go (fx2);go (fx3);go (fx4)"},{"lx":"go (fx2);go (fx3);go (fx3);go (fx4);go (fx4)"},{"lx":"go (fx2);go (fx2);go (fx3);go (fx4);go (fx4)"},{"lx":"go (fx2);go (fx2);go (fx3);go (fx3);go (fx4)"}
[else if] (fl) == 2
    @js ($fx2) = [(ylfx)][0]
    @js ($fx3) = [(ylfx)][1]
    ($lxjh) = {"lx":"go (fx2);go (fx3);go (fx3);go (fx3);go (fx3)"},{"lx":"go (fx2);go (fx2);go (fx3);go (fx3);go (fx3)"},{"lx":"go (fx2);go (fx2);go (fx2);go (fx3);go (fx3)"},{"lx":"go (fx2);go (fx2);go (fx2);go (fx2);go (fx3)"}
[else if] (fl) == 1
    @js ($fx2) = [(ylfx)][0]
    ($lxjh) = {"lx":"go (fx2);go (fx2);go (fx2);go (fx2);go (fx2)"}
[if] (fl) < 5
    @js ($fxlen) = [(lxjh)].length
    ($num) = 0
    [while] (num) < (fxlen)
        @js ($map) = var f=[(lxjh)];f[(num)]["lx"]
        (map)
        [if] (:room) != å¤å¤§é™†-è¯æ—
            [while] (:room) != å¤å¤§é™†-å¹³åŸ
                go south
                @await 350
            go north;go west
            go (fx1)
            ($num) = (num) + 1
        [else]
            [break]
tiao bush
[if] (:room) == å¤å¤§é™†-å±±è„š
    @print <ord>å¤å®—é—¨è‡ªåŠ¨å¯»è·¯å·²å®Œæˆï¼</ord>
[else]
    @print <ord>å¯»è·¯å¤±è´¥ï¼Œè¯·é‡æ–°è¿è¡Œæˆ–æ¢ä¸ªæ—¶é—´ã€‚</ord>
            `);e.log(!1),e.start()}}),ToRaid={menu:UI.showToolbar,perform:function(e,t,o){ManagedPerformerCenter.start(t||"ç¬¬ä¸‰æ–¹è°ƒç”¨",e,o)},existAutoDungeon:function(e){return null!=AutoDungeonName(e)},shareTrigger:function(e){UI._share("è§¦å‘",e)}};function __init__(){null==(WG=unsafeWindow.WG)?setTimeout(()=>{__init__()},300):(messageAppend=unsafeWindow.messageAppend,messageClear=unsafeWindow.messageClear,T=unsafeWindow.T,L=unsafeWindow.L,unsafeWindow.ToRaid=ToRaid,(unsafeWindow.Role=Role).init(),Room.init(),SystemTips.init(),MsgTips.init(),DialogList.init(),TaskList.init(),Xiangyang.init())}$(document).ready(function(){__init__(),null==WG&&setTimeout(__init__,300)})}(),!function(){function m(e){return JSON.parse(JSON.stringify(e))}function n(e,t){return 0==e.length&&0==t.length||"*"==e[0]&&1==e.length||0!=e.length&&0!=t.length&&("?"==e[0]?n(e.substring(1),t.substring(1)):"*"==e[0]?n(e.substring(1),t)||n(e.substring(1),t.substring(1))||n(e,t.substring(1)):e[0]==t[0]&&n(e.substring(1),t.substring(1)))}class r{constructor(e,t){this.name=e,this.params=t}}class s{constructor(e,t){this.targetName=e,this.action=t}}let d={observe:function(e,t){var o=this._getOberverIndex(),e=new s(e,t);return this._observers[o]=e,o},removeOberver:function(e){delete this._observers[e]},post:function(e){for(var t in this._observers)this._observers.hasOwnProperty(t)&&(t=this._observers[t]).targetName==e.name&&t.action(e.params)},_observerCounter:0,_observers:{},_getOberverIndex:function(){var e=this._observerCounter;return this._observerCounter+=1,e}};class e{constructor(e){this.run=e}}function i(e,t){return e==t}function t(e,t){return!!/^\s*\*?\s*$/.test(e)||-1!=e.split("|").indexOf(t)}function o(e,t){return console.log(e,t),!!/^\s*\*?\s*$/.test(e)||-1==e.split("|").indexOf(t)}function a(e,t){if(/^\s*\*?\s*$/.test(e))return!0;var o;for(o of e.split("|"))if(-1!=t.indexOf(o))return!0;return!1}let l={addMonitor:function(e){this._monitors.push(e)},run:function(){for(var e of this._monitors)e.run()},_monitors:[]};class u{constructor(e,t,o,n){this.name=e,this.type=t,this.defaultValue=o,this.assert=null==n?i:n}description(e){if(null==e)return null==this._desc?this.name:this._desc;this._desc=e}}class c extends u{constructor(e,t,o,n){super(e,"select",t[o],n),this.options=t}}let p={number:"æ•°å­—",text:"æ–‡æœ¬"};class g extends u{constructor(e,t,o,n){super(e,"input",o,n),this.format=t}}class f{constructor(e,t,o){this.event=e,this.filters=t,this.introdution=o+`
// å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥åˆ°è®ºå›è§¦å‘å™¨ç‰ˆå—å‘å¸–ã€‚`}getFilter(e){for(var t of this.filters)if(t.name==e)return t;return null}}let h={add:function(e){this._templates[e.event]=e},getAll:function(){return Object.values(this._templates)},get:function(e){return this._templates[e]},_templates:{}};class _{constructor(r,d,u,c){this.name=r,this.template=d,this.conditions=u,this.source=c,this._action=function(e){var t,o,n=m(e);for(t in u)if(u.hasOwnProperty(t)){var s=d.getFilter(t),i=u[t],a=e[t];if(!s.assert(i,a))return;delete n[t]}let l=c;for(o in n)l=`($${o}) = ${n[o]}
`+l;0==/\/\/\s*~silent\s*\n/.test(c)&&(l=`@print ğŸ’¡<hio>è§¦å‘=>${r}</hio>
`+l),b.perform(l,r,!1)},this._observerIndex=null}event(){return this.template.event}active(){return null!=this._observerIndex}_activate(){null==this._observerIndex&&null!=this.template&&(this._observerIndex=d.observe(this.template.event,this._action))}_deactivate(){null!=this._observerIndex&&(d.removeOberver(this._observerIndex),this._observerIndex=null)}}class k{constructor(e,t,o,n,s){this.name=e,this.event=t,this.conditions=o,this.source=n,this.active=s}}let y={run:function(){for(var e in GM_getValue(this._saveKey(),{}))this._loadTrigger(e)},reload:function(){for(var e in this._triggers)this._triggers.hasOwnProperty(e)&&(this._triggers[e]._deactivate(),delete this._triggers[e]);this.run()},getAllData:function(){return GM_getValue(this._saveKey(),{})},corver:function(e){for(var t of this.getAll())this.remove(t.name);for(var o in e){o=e[o];this.create(o.name,o.event,o.conditions,o.source,o.active)}},getAll:function(){return Object.values(this._triggers)},create:function(e,t,o,n,s){var i=this._checkName(e);return 1!=i?i:(i=null!=s&&s,s=new k(e,t,o,n,i),this._updateData(s),this._loadTrigger(e),!0)},modify:function(e,t,o,n){var s,i=this._triggers[e];return null==i?"ä¿®æ”¹ä¸å­˜åœ¨çš„è§¦å‘å™¨ï¼Ÿ":(s=i.event(),e==t?(i=new k(t,s,o,n,i.active()),this._updateData(i),this._reloadTrigger(t),!0):(1==(i=this.create(t,s,o,n))&&(this.remove(e),this._loadTrigger(t)),i))},remove:function(e){var t=this._triggers[e];null!=t&&(t._deactivate(),delete this._triggers[e],delete(t=GM_getValue(this._saveKey(),{}))[e],GM_setValue(this._saveKey(),t))},activate:function(e){for(var t in this._triggers){var o;!n(e,t)||null==(o=this._triggers[t])||o.active()||(o._activate(),(o=this._getData(t)).active=!0,this._updateData(o))}},deactivate:function(e){for(var t in this._triggers){var o;n(e,t)&&null!=(o=this._triggers[t])&&o.active()&&(o._deactivate(),(o=this._getData(t)).active=!1,this._updateData(o))}},_triggers:{},_saveKey:function(){return W.id+"@triggers"},_reloadTrigger:function(e){var t=this._triggers[e];null!=t&&t._deactivate(),this._loadTrigger(e)},_loadTrigger:function(e){var t,o=this._getData(e);null!=o&&("æ–°èŠå¤©ä¿¡æ¯"===o.event&&void 0===o.conditions["å¿½ç•¥å‘è¨€äºº"]&&(o.conditions["å¿½ç•¥å‘è¨€äºº"]=""),t=this._toTrigger(o),this._triggers[e]=t,o.active)&&t._activate()},_getData:function(e){return GM_getValue(this._saveKey(),{})[e]},_updateData:function(e){var t=GM_getValue(this._saveKey(),{});t[e.name]=e,GM_setValue(this._saveKey(),t)},_toTrigger:function(e){var t=h.get(e.event);return new _(e.name,t,e.conditions,e.source)},_checkName:function(e){return null!=this._triggers[e]?"æ— æ³•ä¿®æ”¹åç§°ï¼Œå·²ç»å­˜åœ¨åŒåè§¦å‘å™¨ï¼":/\S+/.test(e)?!!/^[_a-zA-Z0-9\u4e00-\u9fa5]+$/.test(e)||"è§¦å‘å™¨çš„åç§°åªèƒ½ä½¿ç”¨ä¸­æ–‡ã€è‹±æ–‡å’Œæ•°å­—å­—ç¬¦ã€‚":"è§¦å‘å™¨çš„åç§°ä¸èƒ½ä¸ºç©ºã€‚"}};var w,v=null,G=null,x=null,b=null,W=null,C=(w=[new c("æ”¹å˜ç±»å‹",["æ–°å¢","ç§»é™¤","å±‚æ•°åˆ·æ–°"],0),new g("BuffId",p.text,"weapon",t),new c("è§¦å‘å¯¹è±¡",["è‡ªå·±","ä»–äºº"],0)],w=new f("BuffçŠ¶æ€æ”¹å˜",w,`// BuffçŠ¶æ€æ”¹å˜è§¦å‘å™¨
// è§¦å‘å¯¹è±¡idï¼š(id)
// buffçš„sidï¼š(sid)
// buffå±‚æ•°ï¼š(count)
// durationæŒç»­æ—¶é—´ï¼š(duration)`),h.add(w),w=new e(function(){function n(e,t,o){(o={"æ”¹å˜ç±»å‹":o,BuffId:t,"è§¦å‘å¯¹è±¡":e.id==W.id?"è‡ªå·±":"ä»–äºº"}).id=e.id,o.sid=t,o.count=0,o.duration=0,null!=e.count&&(o.count=e.count),null!=e.duration&&(o.duration=e.duration),t=new r("BuffçŠ¶æ€æ”¹å˜",o),d.post(t)}v.add_hook("status",e=>{if(null!=e.action&&null!=e.id&&null!=e.sid){var t={add:"æ–°å¢",remove:"ç§»é™¤",refresh:"å±‚æ•°åˆ·æ–°"}[e.action];if(null!=t)if(e.sid instanceof Array)for(var o of e.sid)n(e,o,t);else n(e,e.sid,t)}})}),l.addMonitor(w),w=[new c("é¢‘é“",["å…¨éƒ¨","ä¸–ç•Œ","é˜Ÿä¼","é—¨æ´¾","å…¨åŒº","å¸®æ´¾","è°£è¨€","ç³»ç»Ÿ"],0,function(e,t){return"å…¨éƒ¨"==e||e==t}),new g("å‘è¨€äºº",p.text,"",t),new g("å¿½ç•¥å‘è¨€äºº",p.text,"",o),new g("å…³é”®å­—",p.text,"",a)],w=new f("æ–°èŠå¤©ä¿¡æ¯",w,`// æ–°èŠå¤©ä¿¡æ¯è§¦å‘å™¨
// èŠå¤©ä¿¡æ¯å†…å®¹ï¼š(content)
// å‘è¨€äººï¼š(name)
// å‘è¨€äººidï¼š(id)
// é¢‘é“ï¼š(channel)`),h.add(w),w=new e(function(){v.add_hook("msg",e=>{var t,o,n,s;null!=e.ch&&null!=e.content&&null!=(t={chat:"ä¸–ç•Œ",tm:"é˜Ÿä¼",fam:"é—¨æ´¾",es:"å…¨åŒº",pty:"å¸®æ´¾",rumor:"è°£è¨€",sys:"ç³»ç»Ÿ"}[e.ch])&&(o=null==e.name?"æ— ":e.name,n=null==e.uid?null:e.uid,s=e.content.replace(/\n/g,""),(e={"é¢‘é“":t,"å‘è¨€äºº":o,"å…³é”®å­—":e.content,"å¿½ç•¥å‘è¨€äºº":o}).content=s,e.name=o,e.id=n,e.channel=t,s=new r("æ–°èŠå¤©ä¿¡æ¯",e),d.post(s))})}),l.addMonitor(w),(w=new g("äººç‰©åç§°",p.text,"",a)).description("äººåå…³é”®å­—"),w=new f("äººç‰©åˆ·æ–°",w=[w],`// äººç‰©åˆ·æ–°è§¦å‘å™¨
// åˆ·æ–°äººç‰©idï¼š(id)
// åˆ·æ–°äººç‰©åç§°ï¼š(name)`),h.add(w),w=new e(function(){v.add_hook("itemadd",e=>{var t;null!=e.name&&null!=e.id&&((t={"äººç‰©åç§°":e.name}).id=e.id,t.name=e.name,e=new r("äººç‰©åˆ·æ–°",t),d.post(e))})}),l.addMonitor(w),w=[new g("åç§°å…³é”®å­—",p.text,"",a)],w=new f("ç‰©å“æ‹¾å–",w,`// ç‰©å“æ‹¾å–è§¦å‘å™¨
// æ‹¾å–ç‰©å“idï¼š(id)
// æ‹¾å–ç‰©å“åç§°ï¼š(name)
// æ‹¾å–ç‰©å“æ•°é‡ï¼š(count)
// ç‰©å“å“è´¨ï¼š(quality)  å€¼ï¼šç™½ã€ç»¿ã€è“ã€é»„ã€ç´«ã€æ©™ã€çº¢ã€æœªçŸ¥`),h.add(w),w=new e(function(){v.add_hook("dialog",function(e){var t;"pack"==e.dialog&&null!=e.id&&null!=e.name&&null!=e.count&&null==e.remove&&((t={"åç§°å…³é”®å­—":e.name}).id=e.id,t.name=e.name,t.count=e.count,e=/<\w{3}>/.exec(e.name)[0],t.quality={"<wht>":"ç™½","<hig>":"ç»¿","<hic>":"è“","<hiy>":"é»„","<HIZ>":"ç´«","<hio>":"æ©™","<ord>":"çº¢"}[e],e=new r("ç‰©å“æ‹¾å–",t),d.post(e))})}),l.addMonitor(w),w=[new g("å…³é”®å­—",p.text,"",a)],w=new f("æ–°æç¤ºä¿¡æ¯",w,`// æ–°æç¤ºä¿¡æ¯è§¦å‘å™¨
// æç¤ºä¿¡æ¯ï¼š(text)`),h.add(w),w=new e(function(){v.add_hook("text",e=>{var t;null!=e.msg&&((t={"å…³é”®å­—":e.msg}).text=e.msg,e=new r("æ–°æç¤ºä¿¡æ¯",t),d.post(e))})}),l.addMonitor(w),w=[new c("ç±»å‹",["è¿›å…¥æˆ˜æ–—","è„±ç¦»æˆ˜æ–—"],0)],w=new f("æˆ˜æ–—çŠ¶æ€åˆ‡æ¢",w,"// æˆ˜æ–—çŠ¶æ€åˆ‡æ¢è§¦å‘å™¨"),h.add(w),w=new e(function(){v.add_hook("combat",e=>{let t=null;null!=e.start&&1==e.start?t={"ç±»å‹":"è¿›å…¥æˆ˜æ–—"}:null!=e.end&&1==e.end&&(t={"ç±»å‹":"è„±ç¦»æˆ˜æ–—"});e=new r("æˆ˜æ–—çŠ¶æ€åˆ‡æ¢",t);d.post(e)}),v.add_hook("text",function(e){null==e.msg||-1==e.msg.indexOf("åªèƒ½åœ¨æˆ˜æ–—ä¸­ä½¿ç”¨")&&-1==e.msg.indexOf("è¿™é‡Œä¸å…è®¸æˆ˜æ–—")&&-1==e.msg.indexOf("æ²¡æ—¶é—´è¿™ä¹ˆåš")||(e={"ç±»å‹":"è„±ç¦»æˆ˜æ–—"},e=new r("æˆ˜æ–—çŠ¶æ€åˆ‡æ¢",e),d.post(e))})}),l.addMonitor(w),w=[new c("ç±»å‹",["å·²ç»æ­»äº¡","å·²ç»å¤æ´»"],0)],w=new f("æ­»äº¡çŠ¶æ€æ”¹å˜",w,"// æ­»äº¡çŠ¶æ€æ”¹å˜è§¦å‘å™¨"),h.add(w),w=new e(function(){v.add_hook("die",e=>{e={"ç±»å‹":null==e.relive?"å·²ç»æ­»äº¡":"å·²ç»å¤æ´»"},e=new r("æ­»äº¡çŠ¶æ€æ”¹å˜",e);d.post(e)})}),l.addMonitor(w),w=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],w=[new c("æ—¶",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],0,i),new c("åˆ†",w,0,i),new c("ç§’",w,0,i)],w=new f("æ—¶è¾°å·²åˆ°",w,"// æ—¶è¾°å·²åˆ°è§¦å‘å™¨"),h.add(w),w=new e(function(){!function e(){var t=new Date,t={"æ—¶":t.getHours(),"åˆ†":t.getMinutes(),"ç§’":t.getSeconds()},t=new r("æ—¶è¾°å·²åˆ°",t),t=(d.post(t),Date.now()),o=1e3*parseInt((t+1e3)/1e3)+1;setTimeout(()=>{e()},o-t)}()}),l.addMonitor(w),w=[new g("æŠ€èƒ½id",p.text,"",t)],w=new f("æŠ€èƒ½é‡Šæ”¾",w,`// æŠ€èƒ½é‡Šæ”¾è§¦å‘å™¨
// æŠ€èƒ½idï¼š(id)
// å‡ºæ‹›æ—¶é—´ï¼š(rtime)
// å†·å´æ—¶é—´ï¼š(distime)`),h.add(w),w=new g("æŠ€èƒ½id",p.text,"",t),w=new f("æŠ€èƒ½å†·å´ç»“æŸ",w=[w],`// æŠ€èƒ½å†·å´ç»“æŸè§¦å‘å™¨
// æŠ€èƒ½idï¼š(id)`),h.add(w),w=new e(function(){v.add_hook("dispfm",o=>{var e;null!=o.id&&null!=o.distime&&null!=o.rtime&&((e={"æŠ€èƒ½id":o.id}).id=o.id,e.rtime=o.rtime,e.distime=o.distime,e=new r("æŠ€èƒ½é‡Šæ”¾",e),d.post(e),setTimeout(e=>{var t={"æŠ€èƒ½id":o.id},t=(t.id=o.id,new r("æŠ€èƒ½å†·å´ç»“æŸ",t));d.post(t)},o.distime))})}),l.addMonitor(w),{});w=[new g("äººåå…³é”®å­—",p.text,"",a),new c("ç±»å‹",["æ°”è¡€","å†…åŠ›"],0,i),new c("å½“",["ä½äº","é«˜äº"],0,i),new c("å€¼ç±»å‹",["ç™¾åˆ†æ¯”","æ•°å€¼"],0,i),new g("å€¼",p.number,0,function(e,t){var t=t.split(";"),o=parseFloat(t[0]),t=parseFloat(t[1]);return e<=o&&t<e||o<=e&&e<t})],w=new f("æ°”è¡€å†…åŠ›æ”¹å˜",w,`// æ°”è¡€å†…åŠ›æ”¹å˜è§¦å‘å™¨
// äººç‰©idï¼š(id)
// äººç‰©å½“å‰æ°”è¡€ï¼š(hp)
// äººç‰©æœ€å¤§æ°”è¡€ï¼š(maxHp)
// äººç‰©å½“å‰å†…åŠ›ï¼š(mp)
// äººç‰©æœ€å¤§å†…åŠ›ï¼š(maxMp)`),h.add(w),w=new e(function(){v.add_hook("items",e=>{if(null!=e.items){C={};for(var t of e.items)C[t.id]=m(t)}}),v.add_hook("itemadd",e=>{C[e.id]=m(e)});function l(e,t){e.id=t.id,e.hp=t.hp,e.maxHp=t.max_hp,e.mp=t.mp,e.maxMp=t.max_mp}v.add_hook("sc",t=>{if(null!=t.id){var o=C[t.id];if(null!=o){if(null!=t.hp){let e="ä½äº";t.hp>o.hp&&(e="é«˜äº");var n=o.hp,s=(o.hp/o.max_hp*100).toFixed(2),i=(o.hp=t.hp,o.max_hp<o.hp&&(o.max_hp=o.hp),null!=t.max_hp&&(o.max_hp=t.max_hp),o.hp),a=(o.hp/o.max_hp*100).toFixed(2),s={"äººåå…³é”®å­—":o.name,"ç±»å‹":"æ°”è¡€","å½“":e,"å€¼ç±»å‹":"ç™¾åˆ†æ¯”","å€¼":s+";"+a},a=(l(s,o),new r("æ°”è¡€å†…åŠ›æ”¹å˜",s)),s=(d.post(a),{"äººåå…³é”®å­—":o.name,"ç±»å‹":"æ°”è¡€","å½“":e,"å€¼ç±»å‹":"æ•°å€¼","å€¼":n+";"+i}),a=(l(s,o),new r("æ°”è¡€å†…åŠ›æ”¹å˜",s));d.post(a)}if(null!=t.mp){let e="ä½äº";t.mp>o.mp&&(e="é«˜äº");n=o.mp,i=(o.mp/o.max_mp*100).toFixed(2),s=(o.mp=t.mp,o.max_mp<o.mp&&(o.max_mp=o.mp),null!=t.max_mp&&(o.max_mp=t.max_mp),o.mp),a=(o.mp/o.max_mp*100).toFixed(2),t={"äººåå…³é”®å­—":o.name,"ç±»å‹":"å†…åŠ›","å½“":e,"å€¼ç±»å‹":"ç™¾åˆ†æ¯”","å€¼":i+";"+a},i=(l(t,o),new r("æ°”è¡€å†…åŠ›æ”¹å˜",t)),a=(d.post(i),{"äººåå…³é”®å­—":o.name,"ç±»å‹":"å†…åŠ›","å½“":e,"å€¼ç±»å‹":"æ•°å€¼","å€¼":n+";"+s}),t=(l(a,o),new r("æ°”è¡€å†…åŠ›æ”¹å˜",a));d.post(t)}}}})}),l.addMonitor(w),w=[new g("äººåå…³é”®å­—",p.text,"",a),new c("å€¼ç±»å‹",["ç™¾åˆ†æ¯”","æ•°å€¼"],0,i),new g("å€¼",p.number,0,(e,t)=>{var t=t.split(";"),o=parseFloat(t[0]),t=parseFloat(t[1]);return o<=e&&e<t})],w=new f("ä¼¤å®³å·²æ»¡",w,`// ä¼¤å®³å·²æ»¡è§¦å‘å™¨
// å¤‡æ³¨ï¼šé™åˆ¶æ¡ä»¶-å€¼ ä¸æ”¯æŒå¤šæ¡ä»¶
// äººç‰©idï¼š(id)
// äººç‰©åç§°ï¼š(name)
// ä¼¤å®³æ•°å€¼ï¼š(value)
// ä¼¤å®³ç™¾åˆ†æ¯”ï¼š(percent)`),h.add(w),w=new e(function(){function i(e,t,o,n){e.id=t.id,e.name=t.name,e.value=o,e.percent=n}v.add_hook("sc",e=>{var t,o,n,s;null!=e.id&&null!=e.damage&&null!=(t=C[e.id])&&null!=t.id&&null!=t.name&&null!=t.max_hp&&(s=null==t._damage?0:t._damage,n=null==t._damagePer?0:t._damagePer,o=((e=e.damage)/t.max_hp*100).toFixed(2),t._damage=e,t._damagePer=o,n={"äººåå…³é”®å­—":t.name,"å€¼ç±»å‹":"ç™¾åˆ†æ¯”","å€¼":n+";"+o},i(n,t,e,o),n=new r("ä¼¤å®³å·²æ»¡",n),d.post(n),n={"äººåå…³é”®å­—":t.name,"å€¼ç±»å‹":"æ•°å€¼","å€¼":s+";"+e},i(n,t,e,o),s=new r("ä¼¤å®³å·²æ»¡",n),d.post(s))})}),l.addMonitor(w);let S={append:function(e){G(e)},clean:function(){x()}},z={triggerHome:function(){z._appendHtml("ğŸŸ <hio>è§¦å‘å™¨</hio>",`
            <style>.breakText {word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}</style>
            <span class="zdy-item" style="width:120px" v-for="t in triggers" :style="activeStyle(t)">
                <div style="width: 30px; float: left; background-color: rgba(255, 255, 255, 0.31); border-radius: 4px;" v-on:click="editTrigger(t)">âš™</div>
                <div class="breakText" style="width: 85px; float: right;" v-on:click="switchStatus(t)">{{ t.name }}</div>
            </span>
            `,"<span v-on:click='createTrigger()'><wht>æ–°å»º</wht></span>"),new Vue({el:"#app",data:{triggers:y.getAll()},methods:{switchStatus:function(e){e.active()?y.deactivate(e.name):y.activate(e.name),z.triggerHome()},editTrigger:z.editTrigger,activeStyle:function(e){return e.active()?{"background-color":"#a0e6e0",border:"1px solid #7284ff",color:"#001bff"}:{}},createTrigger:z.selectTriggerTemplate}})},selectTriggerTemplate:function(){z._appendHtml("<wht>é€‰æ‹©è§¦å‘äº‹ä»¶</wht>",`
            <span class="zdy-item" style="width:120px" v-for="t in templates" v-on:click="select(t)">{{ t.event }}</span>
            `,null,"<span v-on:click='back()'>< è¿”å›</span>"),new Vue({el:"#app",data:{templates:h.getAll()},methods:{select:z.createTrigger,back:z.triggerHome}})},createTrigger:function(e){z._updateTrigger(e)},editTrigger:function(e){z._updateTrigger(e.template,e)},_updateTrigger:function(t,o){let e="<span v-on:click='save'><wht>ä¿å­˜</wht></span>",n=(o&&(e="<span v-on:click='remove'>åˆ é™¤</span>"),"<span v-on:click='back'>< è¿”å›</span>"),s=(o&&(n="<span v-on:click='saveback'>< ä¿å­˜&è¿”å›</span>"),z._appendHtml(`<input style='width:110px' type="text" placeholder="è¾“å…¥è§¦å‘å™¨åç§°" v-model="name">`,`
            <div style="margin:0 2em 0 2em">
                <div style="float:left;width:120px">
                    <span class="zdy-item" style="width:90px" v-for="f in filters">
                    <p style="margin:0"><wht>{{ f.description() }}</wht></p>
                    <input v-if="f.type=='input'" style="width:80%" v-model="conditions[f.name]">
                    <select v-if="f.type=='select'" v-model="conditions[f.name]">
                        <option v-for="opt in f.options" :value="opt">{{ opt }}</option>
                    </select>
                    </span>
                </div>
                <div style="float:right;width:calc(100% - 125px)">
                    <textarea class = "settingbox hide" style = "height:10rem;display:inline-block;font-size:0.8em;width:100%" v-model="source"></textarea>
                    <span class="raid-item shareTrigger" v-if="canShared" v-on:click="share()">åˆ†äº«æ­¤è§¦å‘å™¨</span>
                </div>
            </div>
            `,e,n),{});if(null!=o)s=o.conditions;else for(var i of t.filters)s[i.name]=i.defaultValue;let a=t.introdution;null!=o&&(a=o.source),new Vue({el:"#app",data:{filters:t.filters,name:o?o.name:"",conditions:s,source:a,canShared:null!=o},methods:{save:function(){var e=y.create(this.name,t.event,this.conditions,this.source);1==e?z.triggerHome():alert(e)},remove:function(){confirm("ç¡®è®¤åˆ é™¤æ­¤è§¦å‘å™¨å—ï¼Ÿ")&&(y.remove(o.name),z.triggerHome())},back:function(){z.selectTriggerTemplate()},saveback:function(){var e=y.modify(o.name,this.name,this.conditions,this.source);1==e?z.triggerHome():alert(e)},share:function(){b.shareTrigger(y._getData(o.name))}}})},_appendHtml:function(e,t,o,n){n=`
            <div class = "item-commands" style="text-align:center" id="app">
                <div style="margin-top:0.5em">
                    <div style="width:8em;float:left;text-align:left;padding:0px 0px 0px 2em;height:1.23em" id="wsmud_raid_left">${null==n?"":n}</div>
                    <div style="width:calc(100% - 16em);float:left;height:1.23em">${e}</div>
                    <div style="width:8em;float:left;text-align:right;padding:0px 2em 0px 0px;height:1.23em" id="wsmud_raid_right">${null==o?"":o}</div>
                </div>
                <br><br>
                ${t}
            </div>`;S.clean(),S.append(n)}},j={get:function(){let t={};return GM_listValues().forEach(e=>{"roles"!=e&&(t[e]=GM_getValue(e))}),t},set:function(e){for(var t in e)GM_setValue(t,e[t]);y.reload()}},T=!1;function M(){v=unsafeWindow.WG,G=unsafeWindow.messageAppend,x=unsafeWindow.messageClear,b=unsafeWindow.ToRaid,null==v||null==b?setTimeout(()=>{M()},300):(W=unsafeWindow.Role,unsafeWindow.TriggerUI=z,unsafeWindow.TriggerConfig=j,unsafeWindow.TriggerCenter=y,v.add_hook("login",function(e){T||(T=!0,y.run(),l.run())}))}$(document).ready(function(){M(),null!=v&&null!=b||setTimeout(M,300)})}();